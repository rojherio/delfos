"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["pull-requests","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{66661:(e,t,n)=>{function i(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let i=t.children;for(let t=0;t<i.length;++t)if(i[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let a=0;function r(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let l={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p"),n=e.textContent||"";return t.textContent=n.replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let i=e.hasAttribute("width")?` width="${r(e.getAttribute("width")||"")}"`:"",a=e.hasAttribute("height")?` height="${r(e.getAttribute("height")||"")}"`:"";return i||a?`<img alt="${r(t)}"${i}${a} src="${r(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e)){if("OL"===t.nodeName){if(a>0&&!t.previousSibling){let t=i(e)+a+1;n=`${t}\\. `}else n=`${i(e)+1}. `}else n="* "}let r=n.replace(/\S/g," "),l=(e.textContent||"").trim().replace(/^/gm,r),s=document.createElement("pre");return s.textContent=l.replace(r,n),s},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};l.UL=l.OL;for(let e=2;e<=6;++e)l[`H${e}`]=l.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null===(e=this.selection)||void 0===e?void 0:e.rangeCount)||0)>0}get range(){var e;return(null===(e=this.selection)||void 0===e?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null===(t=this.selection)||void 0===t||t.removeAllRanges(),null===(n=this.selection)||void 0===n||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null===(e=this.selection)||void 0===e?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,"\n> ")}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let r=n.parentNode,l=e.cloneContents();if(t){let e=l.querySelector(t);e&&(l=document.createDocumentFragment()).appendChild(e)}a=0;let s=r.closest("li");if(r.closest("pre")){let e=document.createElement("pre");e.appendChild(l),(l=document.createDocumentFragment()).appendChild(e)}else if(s&&s.parentNode&&("OL"===s.parentNode.nodeName&&(a=i(s)),!l.querySelector("li"))){let e=document.createElement("li");if(!s.parentNode)throw Error();let t=document.createElement(s.parentNode.nodeName);e.appendChild(l),t.appendChild(e),(l=document.createDocumentFragment()).appendChild(t)}return l}(this.range,null!==(e=this.scopeSelector)&&void 0!==e?e:"");null===(t=this.callback)||void 0===t||t.call(this,n),function(e){let t=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in l&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),n=[],i=t.nextNode();for(;i;)i instanceof HTMLElement&&n.push(i),i=t.nextNode();for(let e of(n.reverse(),n))e.replaceWith(l[e.nodeName](e))}(n);let r=document.body;if(!r)return"";let s=document.createElement("div");s.appendChild(n),s.style.cssText="position:absolute;left:-9999px;",r.appendChild(s);let o="";try{let e=document.createRange();e.selectNodeContents(s),this.selection.removeAllRanges(),this.selection.addRange(e),o=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{r.removeChild(s)}return this.processSelectionText(o.trim())}}},58924:(e,t,n)=>{n.d(t,{A:()=>i});let i={activityHeader:"ActivityHeader-module__activityHeader--Flalv",footer:"ActivityHeader-module__footer--FVHp7",narrowViewportWrapper:"ActivityHeader-module__narrowViewportWrapper--Hjl75",edits:"ActivityHeader-module__edits--LwHTE"}},8489:(e,t,n)=>{n.d(t,{A:()=>i});let i={avatarOuter:"Avatar-module__avatarOuter--MZJZH",avatarInner:"Avatar-module__avatarInner--rVuJD",avatarLink:"Avatar-module__avatarLink--S36bm",hiddenActivityAvatar:"Avatar-module__hiddenActivityAvatar--TkNWK",activityAvatar:"Avatar-module__activityAvatar--yNkmi",issueViewerAvatar:"Avatar-module__issueViewerAvatar--grA_h",avatarWithDivider:"Avatar-module__avatarWithDivider--QAWxt",avatarWithoutDivider:"Avatar-module__avatarWithoutDivider--VO6EM"}},32138:(e,t,n)=>{n.d(t,{A:()=>i});let i={askCopilotButton:"DiffHeaderAskCopilotButton-module__askCopilotButton--XnBQK"}},93307:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{N:()=>DebouncedWorkerManager});let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if(this.debounceOverrideCondition&&this.debounceOverrideCondition(e))return this.delayId&&clearTimeout(this.delayId),this.postNow(e);this.idle()?(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.postNow(e)},this.delayMs)):this.nextRequest=e}postNow(e){this.currentRequest=e,this.worker.postMessage(e)}idle(){return!this.currentRequest}terminate(){this.worker.terminate()}constructor(e,t=200,n){i(this,"currentRequest",void 0),i(this,"nextRequest",void 0),i(this,"onResponse",void 0),i(this,"delayId",void 0),this.worker=e,this.delayMs=t,this.debounceOverrideCondition=n,this.worker.onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),this.nextRequest?(this.postNow(this.nextRequest),this.nextRequest=void 0):this.currentRequest=void 0}}}},76235:(e,t,n)=>{n.d(t,{Bq:()=>a,Sp:()=>l,mU:()=>i,tD:()=>r});let i={issueComment:"react-issue-comment",commentsContainer:"react-comments-container",markdownBody:"markdown-body",issueBody:"react-issue-body"},a={issueCommentComposer:"react-issue-comment-composer"};function r(){var e,t;let n=document.querySelector(`${l(i.commentsContainer)} ${(e=a.issueCommentComposer,`#${e}`)}[data-inside-side-panel=true]`);return n||document.querySelector((t=a.issueCommentComposer,`#${t}`))}function l(e){return`.${e}`}},99582:(e,t,n)=>{n.d(t,{k:()=>i});let i={canNotComment:e=>e?`You do not have permissions to comment on this ${e}.`:"You do not have permissions to comment.",confirmations:{deleteCommentTitle:"Delete comment",deleteCommentContent:"Are you sure you'd like to delete this comment?",deleteCommentConfirmButtonContent:"Delete"},hiddenComment:"Hidden comment",hiddenCommentWithReason:"Hidden as",issueLockedToCollaborators:"This conversation has been locked and limited to collaborators.",repoArchived:"This repository has been archived.",sentViaEmail:"via email",commentAuthor:"Author",spammyBadge:"Spammy",spammyBadgeTooltip:"This user is marked as spammy. Their comments will only show in staff mode.",sponsorBadge:"Sponsor",newComment:"new Comment",newCommentPlaceholder:"Use Markdown to format your comment",commentSubjectAuthor:(e,t)=>`${e?"You are the":"This user is the"} author${t?` of this ${t}`:""}`,sponsor:(e,t)=>`${e}'s sponsor since ${t}`,noDescriptionProvided:"No description provided.",staleCommentErrorPrefix:"GraphQL error: STALE_DATA",issueConvertedToDiscussion:"Commenting has been disabled because this issue was converted to a"}},14438:(e,t,n)=>{n.d(t,{Y:()=>i});let i={avatarLink:"avatar-link",commentAuthorAssociation:"comment-author-association",commentSubjectAuthor:"comment-subject-author",spammyLabel:"spammy-label",sponsorLabel:"sponsor-label",commentHeader:"comment-header",commentHeaderLeftSideItems:"comment-header-left-side-items",commentHeaderRightSideItems:"comment-header-right-side-items",commentHeaderHamburger:"comment-header-hamburger",commentHeaderHamburgerOpen:"comment-header-hamburger-open",commentMenuRefComment:"comment-menu-ref-comment",commentViewerOuterBox:e=>e?`comment-viewer-outer-box-${e}`:"comment-viewer-outer-box",commentComposer:"comment-composer",markdownBody:"markdown-body",commentBox:(e="")=>`markdown-editor-${e}`,readonlyCommentBox:(e="")=>`readonly-markdown-editor-${e}`,commentSkeleton:"comment-skeleton"}},52655:(e,t,n)=>{n.d(t,{t:()=>i});let i={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"},localStorageKeys:{issueComment:(e,t,n)=>`${e}-i${t}-c${n}.view-issue-comment`,issueNewComment:(e,t)=>`${e}-i${t}.view-issue-comment-new`}}},31402:(e,t,n)=>{n.d(t,{x:()=>h});var i=n(63510),a=n(67737),r=n(38359),l=n(81356),s=n(26677),o=n(96540),d=n(76235);let c={focusCommentComposer:"r"};var u=n(52655),m=n(86856);function h({commentBoxRef:e,markdownComposerRef:t,onChange:n,onCancel:h,referenceId:f,hasSingleKeyShortcutEnabled:p,insidePortal:g}){let[x,y]=(0,s.F)(u.t.localStorageKeys.issueNewComment("viewer",f),""),[b,v]=(0,o.useState)(x),C=(0,o.useMemo)(()=>(0,i.KG)(b),[b]),j=(0,r.X)(),w=void 0!==p?p:j?.current_user_settings?.use_single_key_shortcut||!1,{anyItemPickerOpen:N}=(0,a.t)(),S=(0,o.useCallback)(e=>{v(e),y(e)},[y]),k=(0,o.useCallback)(e=>{S(e),n(),""===e&&h()},[S,h,n]);(0,o.useImperativeHandle)(t,()=>({appendText:e=>{k(`${b}

${e}`)},setText:e=>{k(e)},focus:()=>{e.current?.focus()}}),[k,b,e]),(0,o.useEffect)(()=>v(b),[b,v]);let E=(0,o.useCallback)(t=>{if(!(!w||N())&&e&&e.current){t.preventDefault();let n=window.getSelection();if(n&&n.anchorNode){let e={anchorNode:n.anchorNode,range:n.getRangeAt(0)},t=n.anchorNode.parentElement,i=t?.closest(d.Sp(d.mU.issueComment))??t?.closest(d.Sp(d.mU.issueBody));if(i&&i instanceof HTMLDivElement){let t=(0,m.E)(i,e);S(`${t}`)}}e.current.scrollIntoView(),e.current.focus()}},[N,S,e,w]),L=(0,o.useCallback)(()=>{e.current?e.current.reset():v(""),y(void 0)},[e,y]);return(0,l._N)([c.focusCommentComposer],E,{triggerWhenInputElementHasFocus:!1,triggerWhenPortalIsActive:g}),{handleMarkdownBodyChanged:k,markdownValidationResult:C,markdownBody:b,resetMarkdownBody:L}}},68310:(e,t,n)=>{n.d(t,{i:()=>a});var i=n(99582);function a(e,t,n=null,r="issue"){return e?i.k.repoArchived:t?i.k.issueLockedToCollaborators:n||i.k.canNotComment(r)}},86856:(e,t,n)=>{n.d(t,{E:()=>d,s:()=>r});var i=n(66661),a=n(76235);function r(e){if(!e)return e;let t=e.split("\n"),n="";for(let e of t)n=n.concat(`> ${e}
`);return n}let l=e=>t=>{for(let n of e.matchAll(/(!\[[^[]+?\]\([^()]+\/)([\w\d-]+)(.+)/g)){let e=n[1],i=n[2],a=n[3];if(!e||!i||!a)continue;let r=`${e}${i}${a.split(")")[0]})`,l=t.split(i);if(l.length<2)continue;let s=l[0]?.match(/!\[[^[]+$/),o=l[1]?.split(")")[0],d=`${s}${i}${o})`;t=t.replaceAll(d,r)}return t},s=e=>"none"===e.style.display||"hidden"===e.style.visibility||"true"===e.ariaHidden,o=e=>{let t=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT}),n=t.nextNode();for(;n;)n instanceof HTMLElement&&s(n)&&n.remove(),n=t.nextNode()};function d(e,t,n){if(!e)return;let r=e.querySelector((0,a.Sp)(a.mU.markdownBody)),s=new i.g("",o);t&&r.contains(t.anchorNode)&&r.contains(t.range.startContainer)&&r.contains(t.range.endContainer)&&!t.range.collapsed&&""!==t.range.toString().trim()?s.range=t.range:s.select(r),n&&(s.processSelectionTextFn=l(n));let d=(0,a.tD)();if(d){let e=d?.querySelector("textarea"),t=d?.querySelector("button");if(e)return s.insert(e),e.value;if(t)return s.quotedText}}},79740:(e,t,n)=>{n.d(t,{X:()=>d});var i=n(17908),a=n(5796),r=n(86365),l=n(57572),s=n(53526),o=n(96540);function d(){let e=(0,i.t)(),t=(0,s.S)(),n=(0,r.B)(),{commit:d}=n,c=`/${(0,a.QU3)(e.ownerLogin)}/${(0,a.QU3)(e.name)}/commit_comment`,u=`${c}/create`,m=(0,o.useCallback)(async(e,t,n)=>{let i=new FormData;i.append("commit_id",d.oid),i.append("comment[body]",e),t&&n&&(i.append("path",t),i.append("position",n.toString()));let a=await (0,l.DI)(u,{method:"POST",body:i});return a.ok?{error:null,comment:(await a.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[d.oid,u]),h=(0,o.useCallback)(async(e,t)=>{let n=new FormData;n.append("_method","put"),n.append("commit_comment[id]",t.id.toString()),n.append("commit_comment[body]",e),n.append("commit_comment[bodyVersion]",t.bodyVersion);let i=await (0,l.DI)(c,{method:"POST",body:n});if(!i.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await i.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[c]),f=(0,o.useCallback)(async e=>{if(!await t({content:"Are you sure you want to delete this comment?",title:"Delete comment",confirmButtonContent:"Delete",confirmButtonType:"danger"}))return"canceled";let n=new FormData;return(n.append("_method","delete"),n.append("commit_comment[id]",e),(await (0,l.DI)(c,{method:"POST",body:n})).ok)?"success":"error"},[c,t]),p=(0,o.useCallback)(async(e,t)=>{let n=new FormData;return(n.append("_method","put"),n.append("classifier",t),(await (0,l.DI)(`${c}/${e}/minimize`,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok)?"success":"error"},[c]),g=(0,o.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,l.DI)(`${c}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[c]);return(0,o.useMemo)(()=>({addComment:m,commentBoxConfig:{pasteUrlsAsPlainText:n.pasteUrlLinkAsPlainText,useMonospaceFont:n.useMonospaceFont},editComment:h,deleteComment:f,hideComment:p,unhideComment:g}),[m,n.pasteUrlLinkAsPlainText,n.useMonospaceFont,f,h,p,g])}},9916:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(38359);function a(){return(0,i.X)()}},74493:(e,t,n)=>{n.d(t,{I:()=>c,p:()=>m});var i=n(5796),a=n(46584),r=n(47584),l=n(57572),s=n(96540),o=n(43732),d=n(55833);function c({repo:e,commit:t,viewerCanReply:n,getInlineCommentInfoByPathAndPosition:r}){let{addComments:d}=(0,o.B)(),{diff_inline_comments:c}=(0,a.h)();return(0,s.useCallback)((a,s)=>new Promise(async(o,m)=>{let[h,f]=a.split("::");if(!h||!f){m(Error("Invalid threadId"));return}if(c&&!s){let i=r(h,Number(f));o(i?u(i,t,e,n,a):void 0);return}let p=await (0,l.lS)(`${(0,i.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:h,position:f})}${s?"&isRefetch=true":""}`);if(p.ok){let i=await p.json();d(i.comments,h,f),o(i.comments?u(i.comments,t,e,n,a):void 0)}else m(Error("Failed to fetch thread"))}),[d,t,c,r,e,n])}function u(e,t,n,i,a){return{commentsData:{comments:e.map(e=>m(e,t,n))},id:a,viewerCanReply:i}}function m(e,t,n){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${r.cg?.location.origin}${(0,i.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reference:{number:void 0,text:(0,d.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:n.id.toString(),isPrivate:n.private,name:n.name,owner:{id:n.ownerLogin,login:n.ownerLogin,url:""}}}}},95017:(e,t,n)=>{n.d(t,{I:()=>o,d_:()=>d,wu:()=>s});var i=n(56366),a=n(57572),r=n(96540),l=n(82169);function s(e,t){let[n,s]=(0,r.useState)(l.UI);return(0,r.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{s(l.UI);let n=await (0,a.Sr)((0,i.RD)(e));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&((0,i.Av)(e),s(e))}else s(l.Xx)}catch{s(l.Xx)}})(),function(){t=!0}},[e,t]),n}function o(e){let[t,n]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{e&&(async()=>{let t=await (0,a.Sr)((0,i.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,i.Av)(e),n(e.data))}}catch{}})()},[e]),t}function d(e,t,n,i){let[s,o]=(0,r.useState)(l.UI),d=(0,r.useRef)([...Array(n)]),c=(0,r.useRef)(t);return(0,r.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let r=await (0,a.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(r.ok){let e=await r.json();if(e){let t=0;for(let n=c.current;n<e.nextIndex;n++)d.current[n]=e.deferredCommits[t],t++;e.deferredCommits=d.current,e.loadMore&&c.current!==e.nextIndex?(c.current=e.nextIndex,e.error=!1,o(e),setTimeout(()=>i(e.nextIndex),0)):(c.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:d.current}))}catch{o(e=>({...e,loading:!1,deferredCommits:d.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,r.useEffect)(()=>{d.current=[],c.current=t},[e,i,t]),s}},55833:(e,t,n)=>{n.d(t,{F:()=>i});function i(e){return e.slice(0,7)}},74779:(e,t,n)=>{n.d(t,{N:()=>i});function i(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}},82431:(e,t,n)=>{n.d(t,{$S:()=>a.$,Su:()=>r.S,uo:()=>J.u,dE:()=>B,c7:()=>$,H1:()=>R.H,UA:()=>U.U,yF:()=>G,cT:()=>X,i4:()=>Y.i,nN:()=>J.n,L4:()=>Z.L});var i=n(22025),a=n(80765),r=n(97745),l=n(74848),s=n(73218),o=n(85349),d=n(75177),c=n(63867),u=n(16255),m=n(96540),h=n(56126),f=n(38621),p=n(87330),g=n(81229),x=n(52464);function y({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,l.jsxs)(x.A,{sx:{color:"fg.muted"},children:[(0,l.jsx)(x.A,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,l.jsx)(x.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function b({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:i,decrementActiveMarker:a,filteredMarkers:r}=t;return r.find(t=>t.id===e)&&r.length>1?(0,l.jsxs)(d.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,l.jsx)(p.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:f.ChevronLeftIcon,variant:"invisible",onClick:()=>{a(e),n()}}),(0,l.jsx)(p.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:f.ChevronRightIcon,variant:"invisible",onClick:()=>{i(e),n()}}),(0,l.jsx)(d.A,{sx:{ml:1},children:(0,l.jsx)(y,{markerId:e,markers:r})})]}):null}try{y.displayName||(y.displayName="MarkerPosition")}catch{}try{b.displayName||(b.displayName="GlobalMarkerNavigation")}catch{}function v({annotation:e,markerNavigationImplementation:t,onClose:n}){return(0,l.jsxs)(d.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,l.jsx)(d.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,l.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,l.jsx)(b,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,l.jsx)(d.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,l.jsx)(p.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:f.XIcon,variant:"invisible",onClick:n})})]})}),(0,l.jsx)(g.Y,{annotation:e})]})}try{v.displayName||(v.displayName="AnnotationDialog")}catch{}var C=n(52655),j=n(62456),w=n(89323),N=n(8338),S=n(30729),k=n(82126);function E({anchorRef:e,annotations:t,handleOpenChange:n,threads:i,onShowAnnotation:a,onShowCommentThread:r,ghostUser:s=C.t.ghostUser}){function o(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,l.jsx)(w.W,{anchorRef:e,open:!0,onOpenChange:n,children:(0,l.jsx)(w.W.Overlay,{width:"small",children:(0,l.jsx)("div",{children:(0,l.jsxs)(N.l,{children:[t.map(e=>(0,l.jsxs)(N.l.Item,{onSelect:()=>a(e.id),children:[(0,l.jsx)(N.l.LeadingVisual,{sx:{mr:2},children:(0,l.jsx)(k.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,l.jsxs)(d.A,{sx:{...o(2)},children:[e.checkSuiteName," /"," ",(0,l.jsx)(x.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,l.jsx)(N.l.Description,{variant:"block",children:(0,l.jsx)(d.A,{sx:{...o(1)},children:e.title})}),(0,l.jsx)(N.l.TrailingVisual,{children:(0,l.jsx)(S.A,{icon:f.ArrowRightIcon})})]},e.id)),i.map(e=>(0,l.jsxs)(N.l.Item,{onSelect:()=>r(e.id),children:[(0,l.jsx)(N.l.LeadingVisual,{sx:{mr:2},children:(0,l.jsx)(j.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??s.avatarUrl})}),"Thread by ",e.author.login,(0,l.jsxs)(N.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,l.jsx)(N.l.TrailingVisual,{children:(0,l.jsx)(S.A,{icon:f.ArrowRightIcon})})]},e.id))]})})})})}try{E.displayName||(E.displayName="MarkersListActionMenu")}catch{}var L=n(67136),A=n(70404),D=n(47139),_=n(42522),R=n(94493);function I({children:e}){return(0,l.jsx)(x.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function T({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?O({thread:e}):F({thread:e}):null}function F({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R";return(0,l.jsxs)(x.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,l.jsxs)(I,{children:[t,e.line]})]})}function O({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,l.jsxs)(x.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,l.jsxs)(I,{children:[t,e.startLine]})," ","to"," ",(0,l.jsxs)(I,{children:[n,e.line]})]})}function M({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:i,thread:a,threads:r,threadsConnectionId:s,markerNavigationImplementation:o,ghostUser:u,...h}){let{sendAnalyticsEvent:g}=(0,A.s)(),{resolveThread:x,unresolveThread:y,resolvingEnabled:v}=e,C=r.find(e=>e.id===a.id),j=a.commentsData.comments.length>0,w=!!a.isResolved,{addToast:N}=(0,L.Y6)(),S=C?.commentsConnectionId;return j?(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,l.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{markerId:a.id,markerNavigationImplementation:o,onNavigate:n}),(0,l.jsx)(T,{thread:C})]}),(0,l.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[w&&(0,l.jsx)(D.A,{variant:"done",size:"large",children:"Resolved"}),v&&(0,l.jsx)(_.m,{text:w?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,l.jsx)(p.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:w?f.CheckCircleFillIcon:f.CheckCircleIcon,sx:{color:w?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:w?()=>{y({thread:a,onCompleted:()=>i(a.id),onError:()=>{N({type:"error",message:"Failed to unresolve thread"})}}),g("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{x({thread:a,onCompleted:()=>i(a.id),onError:()=>{N({type:"error",message:"Failed to resolve thread"})}}),g("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,l.jsx)(p.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:f.XIcon,variant:"invisible",onClick:n})]})]})}),(0,l.jsx)(m.Suspense,{fallback:(0,l.jsxs)(d.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,l.jsx)(c.A,{}),(0,l.jsx)("p",{children:"Loading comments"})]}),children:(0,l.jsx)(R.H,{commentingImplementation:e,commentsConnectionId:S,filePath:t,onRefreshThread:i,thread:a,threadsConnectionId:s,...h,ghostUser:u})})]}):null}try{I.displayName||(I.displayName="Emphasis")}catch{}try{T.displayName||(T.displayName="ThreadBanner")}catch{}try{F.displayName||(F.displayName="SingleLineThreadBanner")}catch{}try{O.displayName||(O.displayName="MultineLineThreadBanner")}catch{}try{M.displayName||(M.displayName="ReviewThreadDialog")}catch{}function $(e){return(0,l.jsx)(h.j,{children:(0,l.jsx)(P,{...e})})}function P({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:i,conversationListThreads:a,isMarkerListOpen:r,fileAnchor:u,filePath:f,onAnnotationSelected:p,onCloseConversationDialog:g,onCloseConversationList:x,onThreadSelected:y,returnFocusRef:b,selectedAnnotationId:C,selectedThreadId:j,threadsConnectionId:w,markerNavigationImplementation:N,suggestedChangesConfig:S,ghostUser:k,...L}){let{isDialogOpen:A}=(0,h.W)(),[D,_]=(0,m.useState)(),{fetchThread:R}=t,I=(0,m.useCallback)(()=>!A&&g(),[A,g]),T=async e=>{_(void 0);let t=a.find(t=>t.id===e)?.isOutdated;_(await R(e,t))},F=(0,m.useMemo)(()=>{if(u&&D&&D.subject?.startDiffSide&&D.subject?.endDiffSide&&D.subject?.startLine&&D.subject?.endLine&&S?.configureSuggestedChangesFromLineRange){let e=D.subject?.startLine??D?.subject?.endLine,t=D.subject?.startDiffSide??D?.subject?.endDiffSide,n={diffAnchor:u,endLineNumber:D?.subject?.endLine,endOrientation:D.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return S?.configureSuggestedChangesFromLineRange(n)}},[u,D,S]);(0,m.useEffect)(()=>{!j&&D?_(void 0):j&&j!==D?.id&&T(j)},[R,j]);let O=j||C,$=C?e.find(e=>e.id===C):void 0;return(0,l.jsx)(l.Fragment,{children:O?(0,l.jsx)(o.T,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{"aria-label":`${j?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:b,role:"dialog",width:"xlarge",preventOverflow:!1,sx:{borderRadius:2},onClickOutside:s.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()},portalContainerName:N.overlayPortalContainerName},onClose:I,children:D?(0,l.jsx)(M,{commentingImplementation:t,filePath:f,thread:D,threads:a,threadsConnectionId:w,onClose:I,onThreadSelected:y,onRefreshThread:T,markerNavigationImplementation:N,suggestedChangesConfig:F,ghostUser:k,...L}):$?(0,l.jsx)(v,{annotation:$,markerNavigationImplementation:N,onClose:I}):(0,l.jsxs)(d.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,l.jsx)(c.A,{}),(0,l.jsx)("p",{children:"Loading comments"})]})}):r&&(0,l.jsx)(E,{anchorRef:i,annotations:e,handleOpenChange:x,threads:a,onShowCommentThread:y,onShowAnnotation:p,ghostUser:k})})}function B({id:e}){let t=(0,m.useRef)(null);return(0,m.useEffect)(()=>{t.current&&(0,u.c)(t.current,e)},[e]),(0,l.jsx)("span",{id:e,ref:t,style:{position:"absolute",top:0,right:0,zIndex:10}})}try{$.displayName||($.displayName="Markers")}catch{}try{P.displayName||(P.displayName="MarkersInternal")}catch{}try{B.displayName||(B.displayName="MarkerPortalRoot")}catch{}var U=n(8187),H=n(81874),V=n(77433),K=n(44968),q=n(47584),z=n(93345);function G({isAnchorable:e=!1,index:t=0,isLastChild:n,anchorPrefix:i="r",comment:a,commentingImplementation:r,filePath:o,hideActions:c,enterDialogMode:u=s.l,onRefreshThread:h,onQuoteReply:f=s.l,threadCommentCount:p,threadId:g,threadsConnectionId:x,ghostUser:y=C.t.ghostUser}){let{addToast:b}=(0,L.Y6)(),[v,j]=(0,m.useState)(!1),[w,N]=(0,m.useState)(a.isHidden),[S,k]=(0,m.useState)(!1),{deleteComment:E,hideComment:A,unhideComment:D}=r,_=(0,m.useRef)(null),R=(0,m.useRef)(null),I=()=>{_.current?.focus()};(0,m.useEffect)(()=>{if(v){let e=window.setTimeout(I);return()=>{window.clearTimeout(e)}}},[v]);let T=a.currentDiffResourcePath?.split("#r").pop(),F=T?`${i}${T}`:void 0,O=F&&q.fV?new URL(`${q.fV.pathname}#${F}`,q.fV.origin).toString():void 0,M=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&T&&F&&window.location.hash.split("#").pop()===F&&((0,z.p)(T,i),u?.(!1),M.current?.focus())},[i,F,T,u,e]);let $={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},P=t>0,B=t>1,U={headingProps:{as:"h3"},avatarUrl:a.author?.avatarUrl??y.avatarUrl,comment:{...a,url:O??"",referenceText:a.reference.text??`#${a.reference.number}`},commentRef:M,deleteComment:()=>{E({commentId:a.id,onCompleted:()=>{h?.(g)},onError:()=>{k(!1),b({type:"error",message:"Failed to delete comment"})},threadCommentCount:p,threadId:g,threadsConnectionId:x,filePath:o})},editComment:()=>{j(!0)},editHistoryComponent:void 0,hideComment:e=>{A({commentId:a.id,reason:e,onCompleted:()=>{h?.(g)},onError:()=>{k(!1),b({type:"error",message:"Failed to hide comment"})}})},onMinimize:N,isMinimized:w,commentAuthorLogin:a.author?.login??y.login,navigate:s.l,commentSubjectAuthorLogin:a.reference?.author?.login??"",commentSubjectType:r.commentSubjectType,onReplySelect:f,unhideComment:()=>{D({commentId:a.id,onCompleted:()=>{h?.(g)},onError:()=>{k(!1),b({type:"error",message:"Failed to unhide comment"})}})},hideActions:c,isReply:P,forceInlineAvatar:!0,containerStyle:{}};return(0,l.jsxs)(d.A,{ref:M,id:e?F:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":$,":focus":$,pb:P?0:2},children:[B&&(0,l.jsx)(d.A,{sx:{display:"flex",pl:P?1:0},children:(0,l.jsx)(d.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,l.jsx)(d.A,{sx:{px:3,pt:B?0:2,pb:0},children:(0,l.jsx)(H.v,{...U,actions:c?void 0:(0,l.jsx)(V.p,{...U})})}),(0,l.jsxs)(d.A,{sx:{display:"flex",pl:P?1:0},children:[P&&(0,l.jsx)(d.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),(0,l.jsx)(d.A,{sx:P?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:a.bodyHTML&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(K.oG,{ref:R,className:"markdown-body","comment-testid":`Comment body html for comment ${a.id}`,html:a.bodyHTML,sx:{mt:1,fontSize:1}})})})]})]})}try{G.displayName||(G.displayName="ReviewThreadCommentWithoutReactions")}catch{}var W=n(84217);function Q({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:a,onAddComment:r,onClose:s,viewerData:o,threadsConnectionId:c,...u}){return(0,l.jsxs)(d.A,{sx:{px:2,pb:2,pt:1},children:[(0,l.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)(W.A,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,l.jsx)(j.r,{alt:o.login,size:24,src:o.avatarUrl||"",sx:{mr:2}}),(0,l.jsx)("span",{children:e??"Add a comment"})]}),s&&(0,l.jsx)(p.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:f.XIcon,onClick:s,"aria-label":"Cancel"})]}),(0,l.jsx)(i.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:a,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:a})=>{r({text:e,onError:i,onCompleted:(e,n)=>{n&&(0,z.p)(n.toString()),t?.(e,n)},submitBatch:a,filePath:n,threadsConnectionId:c})},onCancelComment:s,side:t?"LEFT":"RIGHT",...u})]})}try{Q.displayName||(Q.displayName="StartThreadComment")}catch{}function X({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:a,onCloseCommentDialog:r,suggestedChangesConfig:d,...c}){let{sendAnalyticsEvent:u}=(0,A.s)(),h=(0,m.useMemo)(()=>{if(n&&d?.configureSuggestedChangesFromLineRange)return d.configureSuggestedChangesFromLineRange(d?.selectedDiffRowRange,d?.shouldStartNewConversationWithSuggestedChange)},[n,d]);return n?i?(0,l.jsx)(o.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:a,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:s.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:r,children:(0,l.jsx)(Q,{onClose:()=>{r(),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:h,...c})}):(0,l.jsx)("div",{className:"bgColor-default rounded-2",children:(0,l.jsx)(Q,{onClose:()=>{r(),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:h,...c})}):null}try{X.displayName||(X.displayName="StartConversation")}catch{}var Y=n(78869),J=n(38061),Z=n(61445);n(42389),s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l,s.l},93345:(e,t,n)=>{n.d(t,{p:()=>i});function i(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}},61445:(e,t,n)=>{n.d(t,{L:()=>d});var i=n(80688),a=n(96540);let{getItem:r,removeItem:l,setItem:s}=(0,i.D)("localStorage"),o=(e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:r}=e;if(t)return`PullRequest:${r}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${r}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:d,threadId:c,fileLevelComment:u}){let m,h;let f=(0,a.useMemo)(()=>c||(c??o({diffSide:e,filePath:t,line:i,subjectId:d},u)),[e,t,i,d,c,u]),{hasPersistedComment:p,removePersistedCommentFromStorage:g}=(m=r(f),h=!!m?.text?.trim(),(0,a.useEffect)(()=>{h&&n?.(m)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{l(f),h=!1,m=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),s(f,t)},removePersistedCommentFromStorage:g}}},70283:(e,t,n)=>{function i(e,t){return t.some(t=>a(t,e))}function a(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&r(e.suggestion,t.suggestion)}n.d(t,{EJ:()=>o,Lm:()=>d,c0:()=>i,o_:()=>s,yM:()=>a});let r=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),l={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function s({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:a,pullRequestIsInMergeQueue:r,userCanApplySuggestion:s,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(t)return{isValid:!1,reason:l.IS_OUTDATED};if(n)return{isValid:!1,reason:l.IS_PENDING};if(i)return{isValid:!1,reason:l.IS_RESOLVED};if(a)return{isValid:!1,reason:l.PULL_REQUEST_IS_CLOSED};if(r)return{isValid:!1,reason:l.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!s)return{isValid:!1,reason:l.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:l.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:l.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:l.DELETED_LINES};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join("\n");return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:l.UNCHANGED_CODE}:{isValid:!0}}function o(e,t){let n={isValid:!1,reason:l.INVALID_RANGE},i={isValid:!1,reason:l.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},42389:(e,t,n)=>{n.d(t,{U:()=>i});let i={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"}},57259:(e,t,n)=>{n.d(t,{e:()=>i});function i(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},14614:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(a());if(!i)return n;let r=i.groups.fence;if(!r)return n;let l=r.includes("~")?"~":"`",s=t.match(function(e,t){let n=a([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(l,r.length));if(!s)return n;let o=0,d=i.groups.indent;""!==d&&(o=d.length);let c=s.groups.suggestion;if(o>0){let e=RegExp(`^ {0,${o}}`,"m");c=c.replace(e,"")}return n.push(c),e(t.slice(s.index+s[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},96558:(e,t,n)=>{n.d(t,{Bc:()=>r,Qs:()=>d,fv:()=>l,uN:()=>a,wJ:()=>o,wX:()=>s,wg:()=>i});let i="copilot-chat-textarea",a="copilot-chat-topic-search",r="Review",l="copilot-chat-header-button",s="copilot-diff-header-button",o="copilot-chat-panel",d="copilot-chat-panel"},91618:(e,t,n)=>{n.d(t,{HS:()=>r,Oc:()=>a,Tv:()=>o,Xr:()=>SymbolChangedEvent,f7:()=>l,fD:()=>s,qR:()=>i});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function a(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function r(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function l(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function s(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function o(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},77342:(e,t,n)=>{n.d(t,{C6:()=>a,Wp:()=>o,hs:()=>l,mF:()=>s,wh:()=>i,xP:()=>r});let i={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent"},a=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],r=["bing-search","codesearch","semanticsearch","lexical-code-search","kb-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data","support-search","get-figma"],l={Experiments:"experiements",Prompt:"prompt",None:"none"},s={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},o="NULL_MESSAGE"},61720:(e,t,n)=>{n.d(t,{o:()=>DiffSelectionEvent});let DiffSelectionEvent=class DiffSelectionEvent extends Event{static dispatch(){window.dispatchEvent(new DiffSelectionEvent)}constructor(){super(DiffSelectionEvent.NAME,{bubbles:!1,cancelable:!0})}};!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(DiffSelectionEvent,"NAME","diff-line-selection")},30451:(e,t,n)=>{n.d(t,{D:()=>s,X:()=>GetDiffEntryDataForbiddenError});var i=n(5796),a=n(84100),r=n(57572),l=n(96540);let GetDiffEntryDataForbiddenError=class GetDiffEntryDataForbiddenError extends Error{constructor(...e){super(...e),this.name="GetDiffEntryDataForbiddenError"}};let s=e=>{let[t,n]=(0,l.useState)(!0),[s,o]=(0,l.useState)(),[d,c]=(0,l.useState)([]),u=(0,a.U)(async(e,t)=>{n(!0),o(void 0);try{let n=await (0,r.DI)(e);if(403===n.status)throw new GetDiffEntryDataForbiddenError;if(!n.ok)throw Error(`Request failed: ${n.status}`);let i=await n.json();if(t){let e=(i=[]).find(e=>e.path===t);e&&i.push(e)}c(i)}catch(e){o(e instanceof Error?e:Error("unknown error"))}n(!1)});return(0,l.useEffect)(()=>{u((0,i.Ti7)(e),e.filePath)},[e,u]),{entriesData:d,loading:t,error:s}}},26920:(e,t,n)=>{n.d(t,{QC:()=>h,s2:()=>f,sK:()=>m,wH:()=>l,xY:()=>u});var i=n(3240);function a(e,t){var n=function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t,0);return n.get?n.get.call(e):n.value}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return e<t?-1:e>t?1:0}function s(e,t){return l(e.name,t.name)}function o(e,t){return l(e.fileName,t.fileName)}function d(e){return e.diff}let FileNode=class FileNode{constructor(e){this.diff=e,this.filePath=e.path;let t=this.filePath.split("/");this.fileName=t[t.length-1],this.directoryParts=t.slice(0,t.length-1)}};var c=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=a(this,c).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),a(this,c).set(e,t)}return t}sort(){for(let e of(this.directories.sort(s),this.files.sort(o),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(d);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){r(this,"directories",[]),r(this,"files",[]),function(e,t,n){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(this,c,{writable:!0,value:new Map}),this.name=e,this.path=t}};function u(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function m(e){return u(e.filter(e=>!!e)).getOrderedDiffs()}function h(e){let t;t="string"==typeof e?e:e?.newPath||e?.oldPath;let n=t?.lastIndexOf(".");return t?!n||n<0?i.F7:`.${t.substring(n+1)}`:""}function f(e){let t={};return e.map(e=>{let n=h(e.path);void 0!==t[n]?t[n]+=1:t[n]=1}),t}},56471:(e,t,n)=>{n.d(t,{oO:()=>tJ,n$:()=>t4,cP:()=>t8,T5:()=>tM,Uz:()=>d,Yj:()=>f.Y,Wb:()=>tU,N0:()=>tT.N0,Dd:()=>tT.Dd,xB:()=>nn});var i=n(74848),a=n(1977),r=n(96540),l=n(8877),s=n(44968),o=n(63867);function d({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:a}){return a?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(o.A,{size:"large"})}):n?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(s.oG,{html:n})}):t?(0,i.jsx)(l.default,{...t}):e?(0,i.jsx)("include-fragment",{src:e,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(o.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{d.displayName||(d.displayName="RichDiff")}catch{}var c=n(84),u=n(73974),m=n(67220),h=n(34614),f=n(13253),p=n(37109),g=n(20053),x=n(55847);let y={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"};var b=n(38621);function v({children:e,helpText:t,helpUrl:n,onLoadDiff:a,diffAnchor:l}){let s=n&&t,[d,c]=(0,r.useState)("initial"),u=(0,r.useCallback)(async()=>{try{c("loading"),await a()}catch{c("error")}},[a,c]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":l,children:(0,i.jsxs)("div",{className:(0,g.$)(y.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===d&&(0,i.jsx)(o.A,{size:"medium"}),"error"===d&&(0,i.jsx)(b.AlertIcon,{size:24}),"initial"===d&&(0,i.jsx)(x.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),c("loading")},children:"Load Diff"}),"error"===d?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(h.A,{inline:!0,as:"button",onClick:()=>{u(),c("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,s&&(0,i.jsx)(h.A,{inline:!0,href:n,children:t})]})]})]})})}try{v.displayName||(v.displayName="HiddenDiffPatch")}catch{}let C={finalLineId:"final-hunk-header-line"};function j(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function w(e,t){if("HUNK"===e.type&&e.__id===C.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(j).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function N(e){let t=[],n=0;for(let i=1;i<e.length;i++){let a=e[i],r=i===e.length-1;if(a&&!(0,p.Po)(a)){if("HUNK"===a.type){let r;let l=e[n];if(!l||(0,p.Po)(l))continue;let s=i-1;for(;(!r||(0,p.Po)(r))&&(r=e[s],-1!=--s););r&&!(0,p.Po)(r)&&t.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:r.blobLineNumber}),a.__id===C.finalLineId&&t.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),n=i;continue}if(r){let i=e[n];i&&!(0,p.Po)(i)&&t.push({startBlobLineNumber:i.blobLineNumber,endBlobLineNumber:a.blobLineNumber})}}}return t}let S=(0,r.createContext)(null);function k({children:e,currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:l,fileLineCount:s,filePath:o,isLeftSide:d,isRowSelected:c=!1,isSplit:u,modifiedLineThreads:m,modifiedLineThreadsConnectionId:h,nextHunk:f,originalLineThreads:p,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y,diffContext:b,setInGridMode:v}){let C=(0,r.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:l,fileLineCount:s,filePath:o,isLeftSide:d,isRowSelected:c,isSplit:u,modifiedLineThreads:m,modifiedLineHasThreads:m&&m.length>0,modifiedLineThreadsConnectionId:h,nextHunk:f,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y,diffContext:b,setInGridMode:v}),[t,n,a,l,s,o,d,c,u,m,h,f,p,g,x,y,b,v]);return(0,i.jsx)(S.Provider,{value:C,children:e})}function E(){let e=(0,r.useContext)(S);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{S.displayName||(S.displayName="DiffLineContext")}catch{}try{k.displayName||(k.displayName="DiffLineContextProvider")}catch{}function L(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,a=e?.commentsData?.totalCount??0,r=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:a,commentsConnectionId:r,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var A=n(90189),D=n(82678);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n;let i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,r]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(a)&&this.savedColumnIndex&&(r=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(a-1)?(this.saveColumnIndex(r),n=this.grid[a-1]?.[0]):n=this.grid[a-1]?.[r];break;case"ArrowDown"===e:this.isHunkRow(a+1)?(this.saveColumnIndex(r),n=this.grid[a+1]?.[0]):n=this.grid[a+1]?.[r];break;case"ArrowLeft"===e:n=this.grid[a]?.[r-1];break;case"ArrowRight"===e:n=this.grid[a]?.[r+1];break;case"PageUp"===e:{this.saveColumnIndex(r);let e=this.getPreviousHunkRowIndex(a);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(r);let e=this.getNextHunkRowIndex(a),t=0;e||(e=this.grid.length-1,t=r),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[a]?.[0];break;case"End"===e:{let e=this.grid[a];if(e&&!this.isHunkRow(a)){let t=e.length-1;n=this.grid[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t;let n=this.lastSelectedGridCell||this.focusedGridCell,i=this.cellIdToGridLocation.get(n?.cellId??"");if(!i)return;let[a,r]=i;if(("ArrowUp"!==e||!(a<=1))&&("ArrowDown"!==e||a!==this.grid.length-1)){if("ArrowUp"===e){let e=a-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=a+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,p.qX)(this.fileAnchor,e,t),a=(0,p.u6)(i,0),r=this.cellIdToGridLocation.get(a);if(!r)return!1;let[l]=r;return!!n===this.isHunkRow(l)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty:return n?.[t-2];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if(this.isSplitDiff){let e=(t||[])[n],r=(0,p.qX)(this.fileAnchor,a,e);(0,p.Po)(a)||"HUNK"!==a.type?this.initializeSplitDiffCodeRow({leftLine:a,rightLine:e,row:i,rowIdentifier:r,rowIndex:n}):this.initializeHunkRow(i,r,n)}else{let e=(0,p.qX)(this.fileAnchor,a,a);(0,p.Po)(a)||"HUNK"!==a.type?this.initializeUnifiedDiffCodeRow({diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(i,e,n)}this.grid.push(i)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:r}){let l;let s=(0,p.u6)(a,e);(0,p.Po)(t)||"left"!==n||(l=t?.left),(0,p.Po)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isHunk:!1,isEmpty:(0,p.Po)(t),cellId:(0,p.u6)(a,e),columnIndex:e}),this.cellIdToGridLocation.set(s,[r,e])}initializeHunkRow(e,t,n){let i=(0,p.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),this.cellIdToGridLocation.set(i,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,p.Po)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,a){_(this,"grid",[]),_(this,"cellIdToGridLocation",new Map),_(this,"hunkRowIndexes",new Set),_(this,"focusedGridCell",void 0),_(this,"lastSelectedGridCell",void 0),_(this,"savedColumnIndex",void 0),this.fileAnchor=e,this.isSplitDiff=t,this.initializeGrid(n,i),this.focusFirstGridCell(a)}};function R(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}var I=n(69676);let T={ArrowLeft:I.z0.ArrowHorizontal,ArrowDown:I.z0.ArrowVertical,ArrowUp:I.z0.ArrowVertical,ArrowRight:I.z0.ArrowHorizontal,h:I.z0.HL,j:I.z0.JK,k:I.z0.JK,l:I.z0.HL,a:I.z0.AD,s:I.z0.WS,w:I.z0.WS,d:I.z0.AD,Tab:I.z0.Tab,Home:I.z0.HomeAndEnd,End:I.z0.HomeAndEnd,PageUp:I.z0.PageUpDown,PageDown:I.z0.PageUpDown,Backspace:I.z0.Backspace},F=I.z0.ArrowAll|I.z0.PageUpDown|I.z0.HomeAndEnd|I.z0.AD,O={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}};function M(e){return e in T&&(T[e]&F)>0}function $({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:a,replaceSelectedDiffRowRangeFromGridCells:l,rightLines:s,selectedDiffRowRange:o,updateSelectedDiffRowRange:d,disabled:c}){var u;let m=(0,r.useRef)(void 0),h=(0,r.useMemo)(()=>new GridNavigator(n,i,a,s,m.current?.focusedGridCell?.cellId),[n,i,a,s]);(0,r.useEffect)(()=>{m.current=h},[h]),u=m.current,(0,r.useEffect)(()=>{if(u&&document.activeElement){let e=function(e,t,n){let i=[];for(let a=0;a<t.length;a++){let r=t[a],l=n?.[a]??r,s=!(0,p.Po)(r)&&r?.type==="HUNK";r&&l&&!e.hasLine(r,l,s)&&i.push(r)}return i}(u,a,s);if(0!==e.length){if(document.activeElement===document.body){let t,i,r;let l=a.indexOf(e[e.length-1]),s=a[l+1],o=e[0];s&&!(0,p.Po)(s)&&"HUNK"===s.type&&(t=(0,p.u6)((0,p.qX)(n,s,s),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(t=(0,p.u6)((0,p.qX)(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(r?r.focus():i.focus(),h.focusGridCell(t),R(i))}else if("BUTTON"===document.activeElement.tagName)R(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=h.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,a,h,s,u,t]),function(e,t){let n=(0,r.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,r.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])}(t,h);let f=(0,r.useCallback)((t,i,a)=>{let r=h.getValidSelectableRowCell();switch(!0){case(a.metaKey||a.ctrlKey)&&"KeyA"===a.code:{let e=h.getFirstCodeCell(),t=h.getLastCodeCell();if(!e||!t)return i;return l({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case a.shiftKey&&"ArrowDown"===a.key:{let e=h.getNextSelectableCell("ArrowDown");if(!e||!r)return i;return o?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):l({diffAnchor:n,focusedGridCell:r,startGridCell:r,endGridCell:e}),i}case a.shiftKey&&"ArrowUp"===a.key:{let e=h.getNextSelectableCell("ArrowUp");if(!e||!r)return i;return o?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):l({diffAnchor:n,focusedGridCell:r,startGridCell:e,endGridCell:r}),i}case"ArrowLeft"===a.key&&a.metaKey&&a.shiftKey:return;default:{let t=h.moveToNextItem(a.key,a.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),h.clearLastSelectedCell(),n??void 0}}},[h,o,d,n,l,e]);return(0,D.G)({containerRef:t,bindKeys:F,getNextFocusable:f,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous",disabled:c},[f]),{gridNavigator:h}}var P=n(54332),B=n(42242),U=n(82431),H=n(56126),V=n(67136),K=n(70404),q=n(52464),z=n(75177),G=n(47139),W=n(87330),Q=n(42522);let X="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";var Y=n(94493);function J({children:e}){return(0,i.jsx)(q.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function Z({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?et({thread:e}):ee({thread:e}):null}function ee({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R";return(0,i.jsxs)(q.A,{sx:{color:"fg.muted",pl:2},children:["Comment on line"," ",(0,i.jsxs)(J,{children:[t,e.line]})]})}function et({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(q.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,i.jsxs)(J,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(J,{children:[n,e.line]})]})}function en({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:a,isOutdated:l,threads:s,threadsConnectionId:d,enterDialogMode:c,ghostUser:u,manuallyUpdateCommentsWithThisThreadId:m,suggestedChangesConfig:h,...f}){let[p,g]=(0,r.useState)(void 0),{fetchThread:x}=e,y=(0,r.useRef)(null),{isInDialogMode:v}=(0,B.q)(),C=(0,r.useCallback)(async(e,t=!0)=>{g(await x(e,t))},[x]);(0,r.useEffect)(()=>{C(a,!1)},[C,m,a]),(0,r.useEffect)(()=>{var e,t;v&&(v||!p)?(e=y.current,setTimeout(()=>{for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(X)??[]))t.setAttribute("tabindex","0")},100)):(t=y.current,t?.setAttribute("aria-hidden","true"),function e(n=0){setTimeout(()=>{let n=Array.from(t?.querySelectorAll("*")??[]),i=Array.from(t?.querySelectorAll(X)??[]);if(0===i.length)return e(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}())},[v,p]),(0,r.useEffect)(()=>{p||C(a,!1)},[a,p,x,C]);let j=(0,r.useMemo)(()=>{if(t&&p&&p.subject?.startDiffSide&&p.subject?.endDiffSide&&p.subject?.startLine&&p.subject?.endLine&&h?.configureSuggestedChangesFromLineRange){let e=p.subject?.startLine??p?.subject?.endLine,n=p.subject?.startDiffSide??p?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:p?.subject?.endLine,endOrientation:p.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return h?.configureSuggestedChangesFromLineRange(i)}},[t,p,h]),{sendAnalyticsEvent:w}=(0,K.s)(),{resolveThread:N,unresolveThread:S,resolvingEnabled:k}=e,E=s.find(e=>e.id===a),{addToast:L}=(0,V.Y6)();if(!p||!(p.commentsData.comments.length>0))return null;let A=!!p.isResolved,D=E?.commentsConnectionId;return(0,i.jsxs)(z.A,{sx:{mb:1,mt:1},className:"bgColor-default rounded-2",ref:y,children:[(0,i.jsxs)(z.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",borderBottom:"1px solid",borderColor:"border.muted"},children:[(0,i.jsx)(Z,{thread:E}),(0,i.jsxs)(z.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[A&&(0,i.jsx)(G.A,{variant:"done",size:"large",children:"Resolved"}),k&&(0,i.jsx)(Q.m,{text:A?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(W.K,{"aria-labelledby":"resolve-conversation",icon:A?b.CheckCircleFillIcon:b.CheckCircleIcon,sx:{color:A?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:A?()=>{p&&(S({thread:p,onCompleted:()=>C(p.id),onError:()=>{L({type:"error",message:"Failed to unresolve thread"})}}),w("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{p&&(N({thread:p,onCompleted:()=>C(p.id),onError:()=>{L({type:"error",message:"Failed to resolve thread"})}}),w("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,i.jsx)(r.Suspense,{fallback:(0,i.jsxs)(z.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(o.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(Y.H,{enterDialogMode:c,commentingImplementation:e,commentsConnectionId:D,filePath:n,onRefreshThread:C,thread:p,threadsConnectionId:d,suggestedChangesConfig:j,shouldLimitHeight:!1,...f,ghostUser:u})})]})}try{J.displayName||(J.displayName="Emphasis")}catch{}try{Z.displayName||(Z.displayName="ThreadBanner")}catch{}try{ee.displayName||(ee.displayName="SingleLineThreadBanner")}catch{}try{et.displayName||(et.displayName="MultineLineThreadBanner")}catch{}try{en.displayName||(en.displayName="InlineReviewThread")}catch{}function ei(e){return(0,i.jsx)(H.j,{children:(0,i.jsx)(ea,{...e})})}function ea({annotations:e,commentingImplementation:t,conversationListThreads:n,isMarkerListOpen:a,fileAnchor:l,filePath:s,onAnnotationSelected:o,onCloseConversationDialog:d,onCloseConversationList:c,onCloseFocusMode:u,onThreadSelected:m,returnFocusRef:h,selectedAnnotationId:f,startConversationElementJSX:p,selectedThreadId:g,threadsConnectionId:y,suggestedChangesConfig:b,manuallyUpdateCommentsWithThisThreadId:v,ghostUser:C,enterDialogMode:j,...w}){let N=(0,r.useCallback)(async e=>{let i=await t.fetchThread(e,!1);i&&n.push(i),k({})},[t,n]),[S,k]=(0,r.useState)({});(0,r.useEffect)(()=>{0===n.length&&v&&""!==v&&N(v)},[t,n.length,N,v]);let{isInDialogMode:E,enableInlineCommentDialogMode:L}=(0,B.q)();return(0,i.jsxs)("div",{style:{marginLeft:"-20px",marginRight:"-94px",maxWidth:"633px",width:"100%"},onClick:()=>{E||L()},children:[E&&(0,i.jsx)(x.Q,{variant:"default",size:"small",onMouseUp:u,onKeyUp:e=>{("Enter"===e.key||"Space"===e.code)&&u()},style:{position:"absolute",left:"-40px",top:"-1px"},children:"Exit"}),n.map(e=>(0,i.jsx)(en,{manuallyUpdateCommentsWithThisThreadId:v,enterDialogMode:j,commentingImplementation:t,filePath:s,fileAnchor:l,threadId:e.id,isOutdated:e.isOutdated,threads:n,threadsConnectionId:y,onThreadSelected:m,suggestedChangesConfig:b,ghostUser:C,...w},`review-thread-${e.id}`)),p]})}try{ei.displayName||(ei.displayName="InlineMarkers")}catch{}try{ea.displayName||(ea.displayName="InlineMarkersInternal")}catch{}var er=n(11499),el=n(84100),es=n(86617),eo=n(90495),ed=n(77393),ec=n(89323),eu=n(8338);let em=(0,r.createContext)(null);function eh({children:e,...t}){let n=!!t.commentingImplementation,a=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==a)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let l=t?.ghostUser??O.ghostUser,s=(0,r.useMemo)(()=>({ghostUser:l,...t}),[...Object.values(t),l]);return(0,i.jsx)(em.Provider,{value:s,children:e})}function ef(){let e=(0,r.useContext)(em);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{em.displayName||(em.displayName="DiffContext")}catch{}try{eh.displayName||(eh.displayName="DiffContextProvider")}catch{}var ep=n(57259);function eg(e){return null!=e}let ex="thread",ey="annotation",eb=(0,r.createContext)(null);function ev({children:e,line:t}){let[n,a]=(0,r.useState)(!1),[l,s]=(0,r.useState)(),[o,d]=(0,r.useState)(),[c,u]=(0,r.useState)(),[m,h]=(0,r.useState)(),[f,p]=(0,r.useState)(),{ghostUser:g,markerNavigationImplementation:x}=ef(),{originalLineThreads:y,modifiedLineThreads:b,originalLineThreadsConnectionId:v,modifiedLineThreadsConnectionId:C}=E(),[j,w]=(0,r.useState)(),{threads:N,threadConnectionId:S}=ej({line:t,side:j,originalLineThreads:y,modifiedLineThreads:b,originalLineThreadsConnectionId:v,modifiedLineThreadsConnectionId:C,ghostUser:g}),k=(0,r.useMemo)(()=>!!l||!!o||!!c||!!m,[l,c,o,m]),L=(0,r.useCallback)(()=>{a(!0)},[]),A=(0,r.useCallback)(()=>{a(!1)},[]),D=(0,r.useCallback)(e=>{e?p({id:e,kind:ex}):p(void 0)},[]),_=f?.kind===ex?f.id:void 0,R=f?.kind===ey?f.id:void 0,I=(0,r.useCallback)(e=>{e?p({id:e,kind:ey}):p(void 0)},[]),T=(0,r.useCallback)((e,t,n)=>{switch((0,ep.e)(x?.overlayPortalContainerName),e){case"context-menu":s(t),h(void 0),u(void 0),d(void 0);break;case"new-conversation":h({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),u(void 0),d(void 0);break;case"marker-details":u(t),s(void 0),d(void 0),h(void 0);break;case"marker-list":d(t),s(void 0),h(void 0),u(void 0)}},[x?.overlayPortalContainerName]),F=(0,r.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":h(void 0);break;case"marker-details":u(void 0);break;case"marker-list":d(void 0)}},[]),O=(0,r.useCallback)(e=>(w(e),ej({line:t,side:e,modifiedLineThreads:b,modifiedLineThreadsConnectionId:C,originalLineThreads:y,originalLineThreadsConnectionId:v,ghostUser:g}).threads),[t,b,C,y,v,g]),M=(0,r.useMemo)(()=>t.annotationsData?.annotations?.filter(eg)??[],[t.annotationsData?.annotations]),$=(0,r.useMemo)(()=>({annotations:M,isActionBarVisible:n,showActionBar:L,hideActionBar:A,selectThreadId:D,selectAnnotationId:I,closeDialog:F,openDialog:T,anyMenuOpen:k,selectedThreadId:_,selectedAnnotationId:R,openContextMenuCell:l,openMarkersListCell:o,openMarkerDetailsCell:c,openNewConversationCell:m,threads:N,updateVisibleThreads:O,threadConnectionId:S}),[M,n,L,A,D,I,F,T,k,_,R,l,o,c,m,N,S,O]);return(0,i.jsx)(eb.Provider,{value:$,children:e})}function eC(){let e=(0,r.useContext)(eb);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function ej({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,originalLineThreadsConnectionId:a,modifiedLineThreadsConnectionId:r,ghostUser:l}){switch(t){case"LEFT":return{threads:n||[],threadConnectionId:a};case"RIGHT":return{threads:i||[],threadConnectionId:r};case void 0:return{threads:L(e.threadsData,l),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{eb.displayName||(eb.displayName="MarkersDialogContext")}catch{}try{ev.displayName||(ev.displayName="MarkersDialogContextProvider")}catch{}var ew=n(45725),eN=n(46584);function eS({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=(0,f.o)(),{fileAnchor:a}=E(),[l,s]=(0,r.useState)(t),{annotations:o,openDialog:d,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:h,selectThreadId:p,openContextMenuCell:g,openNewConversationCell:x,openMarkerDetailsCell:y,openMarkersListCell:b,updateVisibleThreads:v,threads:C,threadConnectionId:j,anyMenuOpen:w}=eC(),{sendAnalyticsEvent:N}=(0,K.s)(),S=(0,r.useMemo)(()=>x?.cellId===e,[e,x]),k=(0,r.useMemo)(()=>x?.withSuggestedChange,[x]),L=(0,r.useCallback)(t=>{d("new-conversation",e,t)},[e,d]),A=(0,r.useCallback)(()=>{L()},[L]),D=(0,r.useCallback)(()=>{s(t),L(),N("diff.start_new_conversation","PLUS_ICON")},[t,L,N]),_=(0,r.useCallback)(()=>{L({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[L,N]),R=(0,r.useCallback)(()=>{s(t),L({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,L,N]),I=(0,r.useCallback)(()=>{c("new-conversation")},[c]),{diff_inline_comments:T}=(0,eN.h)(),F=(0,r.useMemo)(()=>g===e,[e,g]),O=(0,r.useCallback)(()=>{d("context-menu",e)},[e,d]),M=(0,r.useCallback)(()=>{s(t),O()},[t,O]),$=(0,r.useCallback)(()=>{c("context-menu")},[c]),P=(0,r.useCallback)(()=>{F?$():O()},[$,F,O]),B=(0,r.useCallback)(()=>{s(t),P()},[t,P]),U=(0,r.useMemo)(()=>y===e?h:void 0,[e,y,h]),H=(0,r.useMemo)(()=>y===e?u:void 0,[e,y,u]),V=(0,r.useCallback)(()=>{T?n?.():d("marker-details",e)},[e,T,n,d]),q=(0,r.useCallback)(()=>{c("marker-details")},[c]),z=(0,ew.K)((e,t={skipLineSelection:!1})=>{if(p(e),V(),t.skipLineSelection)return;let n=C.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:a,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),G=(0,ew.K)((e,t={skipLineSelection:!1})=>{if(m(e),V(),t.skipLineSelection)return;let n=o.find(t=>t.id===e);n&&i({diffAnchor:a,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),W=(0,r.useCallback)(()=>{d("marker-list",e)},[e,d]),Q=(0,r.useCallback)(()=>{c("marker-list")},[c]),X=(0,r.useCallback)(e=>{let t=v(e);if(!t?.length&&!o.length)return;let n=t&&t[0],i=t&&1===t.length&&n&&!o.length,a=o[0],r=1===o.length&&a&&!t?.length;i?z(n.id):r?G(a.id):W()},[o,W,G,z,v]);return{isNewConversationDialogOpen:S,startNewConversation:A,startNewConversationFromActionBar:D,closeNewConversationDialog:I,startNewConversationWithSuggestedChange:_,startNewConversationFromActionBarWithSuggestedChange:R,shouldStartNewConversationWithSuggestedChange:k,isContextMenuOpen:F,openContextMenu:O,openContextMenuFromActionBar:M,closeContextMenu:$,toggleContextMenu:P,toggleContextMenuFromActionBar:B,optimizedSelectedThreadId:U,optimizedSelectedAnnotationId:H,selectThread:z,selectAnnotation:G,openMarkerDetailsDialog:V,closeConversationDetailsDialog:q,isMarkerListDialogOpen:b===e,openMarkerListDialog:W,closeMarkerListDialog:Q,openMarkerOrListDialogFromActionBar:(0,r.useCallback)(e=>{X(e),s(t)},[t,X]),openMarkerOrListDialog:(0,r.useCallback)(e=>{X(e)},[X]),annotations:o,returnFocusRef:l,threadConnectionId:j,threads:C,anyMenuOpen:w}}function ek({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=eC(),[a,l]=(0,r.useState)(!1),s=(0,r.useCallback)(()=>{t()},[t]),o=(0,r.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),d=(0,r.useCallback)(()=>{t()},[t]),c=(0,r.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:o,handleCellFocus:s,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:(0,r.useCallback)(t=>{e.current&&!i&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&l(!1):(n(),l(!1)))},[i,e,n]),handleActionBarFocusCapture:(0,r.useCallback)(e=>{i||(e.stopPropagation(),l(!0))},[i]),handleActionBarKeydownCapture:(0,r.useCallback)(e=>{!i&&M(e.key)&&e.stopPropagation()},[i])}}var eE=n(26335),eL=n(64515),eA=n(91321),eD=n(62456),e_=n(46008),eR=n(82126);let eI={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3",AvatarStack:"CommentIndicator-module__AvatarStack--jMN2F",Compact:"CommentIndicator-module__Compact--SQwGN",Relaxed:"CommentIndicator-module__Relaxed--DWkA5",textStyles:"CommentIndicator-module__textStyles--ahQJa"},eT={compact:{avatarSize:18},relaxed:{avatarSize:20}};function eF({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=E(),{ghostUser:a}=ef();(0,r.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:l}=eT[t],s=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===s)return null;let o={},d=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&d.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:a?.login&&(o[a.login]=a)}));let c=[...d.sort((e,t)=>(eR.GF[e.level]?.priority||0)<(eR.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(eR.S,{annotationLevel:t.level},t.id):(0,i.jsx)(eR.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(a?.avatarUrl||" ");return(0,i.jsx)(eD.r,{alt:t,size:20,src:n},t)})].slice(0,3),u=s>9?"9+":`${s}`;return(0,i.jsxs)("div",{className:(0,g.$)("d-flex","flex-justify-between","flex-items-center",eI.commentIndicatorContainer),children:[(0,i.jsx)(e_.A,{disableExpand:!0,size:l,className:(0,g.$)(eI.AvatarStack,"relaxed"===t?eI.Relaxed:eI.Compact),children:c}),(0,i.jsx)("span",{className:(0,g.$)("fgColor-default","ml-1",eI.textStyles),children:u})]})}try{eF.displayName||(eF.displayName="CommentIndicator")}catch{}var eO=n(35149),eM=n(39298),e$=n(5993);let eP=({fileDiffReference:e,selectedRange:t,showDivider:n})=>{let a=(0,r.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ec.W,{children:[(0,i.jsx)(ec.W.Anchor,{children:(0,i.jsxs)(eu.l.Item,{children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(ec.W.Overlay,{children:(0,i.jsxs)(eu.l,{children:[(0,i.jsx)(eM.t,{fileDiffReference:a,eventContext:{prx:!0}}),(0,i.jsx)(e$.e,{fileDiffReference:a,eventContext:{prx:!0}}),(0,i.jsx)(eO.i,{fileDiffReference:a,eventContext:{prx:!0}})]})})]}),n&&(0,i.jsx)(eu.l.Divider,{})]})};try{eP.displayName||(eP.displayName="CopilotDiffChatContextMenu")}catch{}function eB(){let{nextHunk:e,currentHunk:t,previousHunk:n}=E(),{addInjectedContextLines:i}=ef();return eU(i,e,t,n)}function eU(e,t,n,i){let a=!!n&&0!==n.startBlobLineNumber,r=!!n&&!!t;return{expandStartOfHunk:()=>{a&&n&&e({start:Math.max(0,n.startBlobLineNumber-20),end:n.startBlobLineNumber})},expandEndOfHunk:()=>{r&&n&&e({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{i&&e({start:i.endBlobLineNumber+1,end:i.endBlobLineNumber+1+20})},canExpandEndOfHunk:r,canExpandStartOfHunk:a}}var eH=n(30871);let eV={left:"L",right:"R"},eK="Start conversation",eq="Suggest change";function ez(e,t,n){let i=n&&!(0,p.Ji)(t)?eV.left:eV.right;return`${e} on line ${i}${t.blobLineNumber}`}function eG({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,a,l;let{selectedDiffRowRange:s,selectedDiffLines:o,replaceSelectedDiffRowRange:d}=(0,f.o)(),{commentingEnabled:c}=ef(),{diffLine:u,isLeftSide:m,isSplit:h,diffContext:g}=E(),x=(0,r.useMemo)(()=>o.leftLines[0],[o.leftLines]),y=(0,r.useMemo)(()=>o.leftLines[o.leftLines.length-1],[o.leftLines]),v=(0,r.useMemo)(()=>o.leftLines.every(e=>!(0,p.Po)(e)&&"DELETION"!==e.type),[o.leftLines]),C=(0,r.useMemo)(()=>o.rightLines[0],[o.rightLines]),j=(0,r.useMemo)(()=>o.rightLines[o.rightLines.length-1],[o.rightLines]),w=(0,r.useMemo)(()=>0===o.rightLines.length,[o.rightLines]),N=(0,r.useMemo)(()=>0===o.leftLines.length,[o.leftLines]),S=(0,r.useMemo)(()=>!(o.leftLines.find(e=>!(0,p.Po)(e)&&!(0,p.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||o.rightLines.find(e=>!(0,p.Po)(e)&&!(0,p.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[o.leftLines,o.rightLines]),k=(0,r.useCallback)((n,i)=>{!(!s||!y||!x||(0,p.Po)(y)||(0,p.Po)(x))&&x.left&&y.left&&(d({diffAnchor:s.diffAnchor,endLineNumber:y.left,endOrientation:"left",startLineNumber:x.left,startOrientation:"left",firstSelectedLineNumber:x.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[s,y,x,d,e,t]),L=(0,r.useCallback)((n,i)=>{!(!s||!j||!C||(0,p.Po)(j)||(0,p.Po)(C))&&C.right&&j.right&&(d({diffAnchor:s.diffAnchor,endLineNumber:j.right,endOrientation:"right",startLineNumber:C.right,startOrientation:"right",firstSelectedLineNumber:C.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[s,j,C,d,e,t]),A="DELETION"!==u.type&&("pr"===g||void 0===g),D=(0,r.useMemo)(()=>!!s&&(s.startOrientation!==s.endOrientation||s.startLineNumber!==s.endLineNumber),[s]);if(!c)return null;let _=!1,R=!1;if(s&&D){let t=eV[s.startOrientation],r=eV[s.endOrientation];return l=` on lines ${t}${s.startLineNumber}-${r}${s.endLineNumber}`,!(0,p.Po)(x)&&!(0,p.Po)(y)&&x&&y&&(_=!0,n=x.left===y.left?w?` on line L${x.left}`:`, original line L${x.left}`:w?` on lines L${x.left}-L${y.right}`:`, original lines L${x.left}-L${y.left}`),!(0,p.Po)(C)&&!(0,p.Po)(j)&&C&&j&&(R=!0,a=C.right===j.right?N||h&&S?` on line R${C.right}`:`, modified line R${j.right}`:N||h&&S?` on lines R${C.right}-R${j.right}`:`, modified lines R${C.right}-R${j.right}`),(0,i.jsx)(i.Fragment,{children:h?(0,i.jsx)(i.Fragment,{children:S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eu.l.Item,{onSelect:L,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusIcon,{})}),eK+a,(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)(eH.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eu.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusCircleIcon,{})}),eq+a]})]}):(0,i.jsxs)(i.Fragment,{children:[_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eu.l.Item,{onSelect:k,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusIcon,{})}),eK+n,(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)(eH.U,{keys:w?"Alt+n":"Alt+Shift+N"})})]}),v&&(0,i.jsxs)(eu.l.Item,{onSelect:e=>k(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusCircleIcon,{})}),eq+n]})]}):null,R?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eu.l.Item,{onSelect:L,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusIcon,{})}),eK+a,(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)(eH.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eu.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusCircleIcon,{})}),eq+a]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(b.PlusIcon,{}),children:eK+l}),A&&v&&(0,i.jsxs)(eu.l.Item,{onSelect:e,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusCircleIcon,{})}),eq+l]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(b.PlusIcon,{}),children:ez(eK,u,m)}),A&&(0,i.jsxs)(eu.l.Item,{onSelect:e,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.PlusCircleIcon,{})}),ez(eq,u,m)]})]})}try{eG.displayName||(eG.displayName="StartConversationContextMenuItems")}catch{}function eW(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eJ,{...e}),(0,i.jsx)(eX,{fileDiffReference:e.copilotChatReference}),(0,i.jsx)(e4,{}),(0,i.jsx)(eY,{}),(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,i.jsx)(b.LinkIcon,{})}),(0,i.jsx)(e3,{})]})}function eQ(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e8,{}),(0,i.jsx)(eY,{})]})}let eX=e=>{let{selectedDiffRowRange:t}=(0,f.o)();return e.fileDiffReference?(0,i.jsx)(eP,{showDivider:!0,selectedRange:t,fileDiffReference:e.fileDiffReference}):null};function eY(){let{fileAnchor:e}=E();return(0,i.jsxs)(eu.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)(eH.U,{keys:"Mod+a"})})]})}function eJ({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:a,startConversationWithSuggestedChange:r}){let{commentingEnabled:l}=ef(),{originalLineHasThreads:s,modifiedLineHasThreads:o}=E(),{annotations:d}=eC(),c=d.length>0;return l&&(n||s||o||c)?(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(eG,{handleStartConversation:a,handleStartConversationWithSuggestedChange:r}),(0,i.jsx)(eZ,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,i.jsx)(eu.l.Divider,{})]}):null}function eZ({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{diff_inline_comments:n}=(0,eN.h)(),{data:a}=(0,es.Pe)(),{commentingEnabled:r}=ef(),{isSplit:l}=E();return a&&r&&(!n||a.commentsPreference!==es.sI.Visible)?l?(0,i.jsx)(e0,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,i.jsx)(e1,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null}function e0({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:a,isLeftSide:r}=E(),{annotations:l}=eC(),s=l.length>0;return r?(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(e2,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(a||s)&&(0,i.jsx)(e2,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(a||s)&&(0,i.jsx)(e2,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,i.jsx)(e2,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})}function e1({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=ef(),{diffLine:a}=E(),{annotations:r}=eC();return a&&L(a.threadsData,n).length>0||r.length>0?(0,i.jsx)(e2,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null}function e2({onSelect:e,text:t}){return(0,i.jsxs)(eu.l.Item,{onSelect:e,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.CommentDiscussionIcon,{})}),t]})}function e4(){return(0,i.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,i.jsx)(b.CopyIcon,{})})})}function e3(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=eB(),{previousHunk:n,nextHunk:a}=E();return e||t||n||a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eu.l.Divider,{}),(0,i.jsx)(e8,{}),(0,i.jsx)(e6,{})]}):null}function e8(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=eB();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,i.jsx)(b.FoldUpIcon,{})}),t&&(0,i.jsx)(er.Vr,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,i.jsx)(b.FoldDownIcon,{})})]})}function e6(){let{previousHunk:e,nextHunk:t}=E(),{fileAnchor:n}=E();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eu.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eu.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{eW.displayName||(eW.displayName="CellContextMenu")}catch{}try{eQ.displayName||(eQ.displayName="EmptyCellContextMenu")}catch{}try{eY.displayName||(eY.displayName="SelectAllListItem")}catch{}try{eJ.displayName||(eJ.displayName="MarkerListItems")}catch{}try{eZ.displayName||(eZ.displayName="ViewMarkerListItems")}catch{}try{e0.displayName||(e0.displayName="SplitDiffMarkersListItems")}catch{}try{e1.displayName||(e1.displayName="UnifiedDiffMarkerListItem")}catch{}try{e2.displayName||(e2.displayName="MarkerListItem")}catch{}try{e4.displayName||(e4.displayName="CopyContentListItems")}catch{}try{e3.displayName||(e3.displayName="HunkListItems")}catch{}try{e8.displayName||(e8.displayName="ExpandHunksListItems")}catch{}try{e6.displayName||(e6.displayName="JumpToHunkListItems")}catch{}var e5=n(86836);function e7({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:a}){return(0,i.jsx)(e5.k,{altText:`${t}'s avatar image with pending indicator`,icon:b.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...a}})}try{e7.displayName||(e7.displayName="InProgressCommentIndicator")}catch{}let e9={"action-bar-position":"ActionBar-module__action-bar-position--q5zYS","left-action-bar":"ActionBar-module__left-action-bar--EJ7Y6","left-action-bar-draft-compact":"ActionBar-module__left-action-bar-draft-compact--BA7vx","left-action-bar-draft-relaxed":"ActionBar-module__left-action-bar-draft-relaxed--yz9iI","left-action-bar-new":"ActionBar-module__left-action-bar-new--NXupU",actionBarArrowSizing:"ActionBar-module__actionBarArrowSizing--VJyrJ",actionBarHeight:"ActionBar-module__actionBarHeight--BT8aR",actionBarStartCommentWidth:"ActionBar-module__actionBarStartCommentWidth--NZ_pB","action-bar-button-group":"ActionBar-module__action-bar-button-group--eolOy"},te=(0,r.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:a,showStartConversation:l,hasDraftComment:s,copilotChatReference:o,onOpenInLineThread:d,shouldDisplayCollapseComments:c},u){let m=(0,r.useRef)(null),h=(0,r.useRef)(null),{commentingEnabled:f,viewerData:{lineSpacingPreference:p,commentsPreference:y}}=ef(),{diffLine:v,isRowSelected:C}=E(),j=(0,r.useRef)(null),w=m.current?m:h;(0,eL.T)(u,w);let{diff_inline_comments:N}=(0,eN.h)(),S=v.threadsData?.totalCommentsCount||0,k=v.annotationsData?.totalCount||0,{isActionBarFocused:L,handleActionBarBlur:A,handleActionBarFocusCapture:D,handleActionBarKeydownCapture:_}=ek({cellRef:a}),{annotations:R,isContextMenuOpen:I,openMarkerOrListDialogFromActionBar:T,startNewConversationFromActionBar:F,startNewConversationFromActionBarWithSuggestedChange:O,anyMenuOpen:M,threads:$,toggleContextMenu:P,toggleContextMenuFromActionBar:B}=eS({cellId:n,actionBarRef:j,onOpenInLineThread:d}),U=(0,r.useCallback)(e=>{C&&e.preventDefault()},[C]),H=f&&S+k>0&&(!N||y===es.sI.Collapsed),V=f&&l,K={onBlur:A,onFocusCapture:D,onKeyDownCapture:_},q=(0,r.useCallback)(e=>{F(),U(e)},[F,U]);return(0,i.jsxs)(i.Fragment,{children:[V&&(0,i.jsx)("div",{"aria-hidden":!L,className:(0,g.$)("d-flex","flex-row",e9["left-action-bar"]),children:(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(x.Q,{"aria-label":"Start conversation (comment in progress)",size:"small",className:(0,g.$)("py-0","compact"===p?e9["left-action-bar-draft-compact"]:e9["left-action-bar-draft-relaxed"],e9.actionBarHeight),onClick:q,...K,children:(0,i.jsx)(e7,{lineSpacingPreference:p,authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(W.K,{unsafeDisableTooltip:!0,"aria-label":"Start conversation",ref:h,icon:b.PlusIcon,size:"small",className:(0,g.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0",e9["left-action-bar-new"],e9.actionBarHeight,e9.actionBarStartCommentWidth),onClick:q,...K})})}),(0,i.jsx)("div",{"aria-hidden":!L,className:(0,g.$)("d-flex","flex-row",e9["action-bar-position"]),children:(0,i.jsxs)(eA.A,{onClick:U,className:e9["action-bar-button-group"],...K,children:[H&&(0,i.jsx)(x.Q,{ref:m,"aria-expanded":M,"aria-label":"View conversations",size:"small",className:(0,g.$)("py-0","px-1",e9.actionBarHeight),onClick:e=>{(1===$.length||1===R.length)&&e.preventDefault(),T()},children:(0,i.jsx)(eF,{lineSpacingPreference:p})}),(0,i.jsxs)(ec.W,{anchorRef:j,open:I,onOpenChange:P,children:[(0,i.jsx)(ec.W.Anchor,{children:(0,i.jsx)(W.K,{unsafeDisableTooltip:!0,ref:j,"aria-haspopup":"true","aria-label":"More actions",icon:b.TriangleDownIcon,size:"small",className:(0,g.$)("fgColor-muted",e9.actionBarArrowSizing),onClick:B})}),(0,i.jsx)(ec.W.Overlay,{width:"medium",children:(0,i.jsx)(eu.l,{children:(0,i.jsx)(eW,{shouldDisplayCollapseComments:c,copilotChatReference:o,showStartConversation:l,handleViewMarkersSelection:T,startConversationCurrentLine:F,startConversationWithSuggestedChange:O})})})]})]})})]})});te.displayName="ActionBar";let tt={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"};function tn({searchResults:e,focusedSearchResult:t,className:n,styleObject:a}){let r=0,l=e[0]?.text??"",s=e[0]?.diffLineNumIndex??-1,o=`overlay-${s}-${l}`;return(0,i.jsxs)("span",{className:(0,g.$)(n,"position-absolute",tt.userSelectNone,!e[0].isHunk&&tt.nonHunkStyles),style:{...a},children:[e.map(e=>{var n,a;let s=e.indexWithinPathDigest===t,o=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:(0,g.$)(tt.visibilityHidden,tt.userSelectNone),children:l.substring(r,e.column)}),(0,i.jsx)("span",{className:(0,g.$)(tt.userSelectNone,s&&tt.focusedResultStyles,!s&&tt.nonFocusedResultStyles),children:(0,i.jsx)("span",{className:(0,g.$)(!s&&tt.visibilityHidden),id:(n=e.indexWithinPathDigest,a=e.pathDigest,`match-${a}-${n}`),children:l.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return r=e.columnEnd,o}),(0,i.jsx)("span",{className:(0,g.$)(tt.visibilityHidden,tt.userSelectNone),children:l.substring(r)})]},o)}try{tn.displayName||(tn.displayName="DiffHighlightedOverlay")}catch{}function ti(e,t,n){let i=e.threadsData?.totalCount||0,a=t.threadsData?.totalCount||0;if(0===i&&0===a)return;let r="";1===i?r="has a conversation.":i>1&&(r="has conversations.");let l="";1===a?l="has a conversation.":a>1&&(l="has conversations.");let s="";if("LEFT"===n){let e=`${r.charAt(0).toUpperCase()}${r.slice(1)}`,t=`${l.length>1?"Modified line":""} ${l}`;s=`${e} ${t}`}else{let e=`${l.charAt(0).toUpperCase()}${l.slice(1)}`,t=`${r.length>1?"Original line":""} ${r}`;s=`${e} ${t}`}return s}function ta({summary:e}){let{diff_inline_comments:t}=(0,eN.h)();return""===e?null:(t&&(e+=" Press Enter to view."),(0,i.jsx)("span",{className:"sr-only user-select-none",children:e.trimStart().trimEnd()}))}try{ta.displayName||(ta.displayName="DiffLineScreenReaderSummary")}catch{}var tr=n(47584),tl=n(76797);let ts={"comment-indicator":"DiffLineTableCellParts-module__comment-indicator--eI0hb","in-progress-comment-indicator":"DiffLineTableCellParts-module__in-progress-comment-indicator--hx3m3"},to=["CONTEXT","INJECTED_CONTEXT"];function td(e){let{rowId:t}=E();if(t)return(0,p.u6)(t,e)}function tc(e,t){let{selectedDiffRowRange:n}=(0,f.o)();return(0,r.useMemo)(()=>{let i="Add a comment on",a=!!n&&n.startLineNumber!==n.endLineNumber;if(n&&a){let e={left:"L",right:"R"},t=e[n.startOrientation],a=e[n.endOrientation];i+=n.startLineNumber!==n.endLineNumber?` lines ${t}${n.startLineNumber} to ${a}${n.endLineNumber}`:` line ${t}${n.startLineNumber}`}else{let n=t&&!(0,p.Ji)(e)?"L":"R";i+=` line ${n}${e.blobLineNumber}`}return i},[e,t,n])}let tu=(0,r.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:a,handleDiffCellClick:l,handleDiffCellMouseDown:s,handleHideMarkersFromFocus:o,handleDiffSideCellSelectionBlocking:d,lineAnchor:c,firstLineNumberSelection:u,commentDialogOpen:m,startConversation:h,enterDialogMode:g,...x},y){let{diffLine:b,fileAnchor:v,isRowSelected:C,isLeftSide:j,isSplit:w,setInGridMode:N}=E(),S=(0,r.useRef)(null);(0,r.useImperativeHandle)(y,()=>S.current,[]);let[k,L]=(0,r.useState)(!1),{selectedDiffRowRange:A}=(0,f.o)(),{disableInlineCommentDialogMode:D,isInDialogMode:_}=(0,B.q)(),{getUnifiedDiffLineCode:R,getSplitDiffSingleLineCode:I,getSplitDiffMultiLineCode:T}=function(e){let{selectedDiffRowRange:t,selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=(0,f.o)();return{getUnifiedDiffLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:a,endOrientation:r,startLineNumber:l,endLineNumber:s}=t,o=0,d=0;return n.length>1&&(o=n.findIndex(e=>"left"===a?e.left===l:e.right===l),d=n.findIndex(e=>"left"===r?e.left===s:e.right===s)),(0,p.Ls)(n.slice(o,d+1))},getSplitDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let a=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return a?(0,p.Ls)([a]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,p.Ls)(n.leftLines):(0,p.Ls)(n.rightLines)}}(v),F=(0,r.useRef)(null),O=(0,el.U)(e=>{if(!e.target)return;let t=e.target;!k||F.current?.contains(t)||S.current?.contains(t)||2!==e.button?S.current?.contains(t)&&e.target.closest("button")?.contains(t)&&L(!1):L(!1),S.current?.contains(t)||(D(),N?.(!0))});(0,r.useEffect)(()=>(tr.XC?.addEventListener("mousedown",O),()=>tr.XC?.removeEventListener("mousedown",O)),[O]),(0,r.useEffect)(()=>()=>tr.XC?.removeEventListener("mousedown",O),[]);let M=(0,r.useCallback)(()=>{u?.current&&(u.current=null)},[u]),$=(0,r.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?s?.():u&&(u.current=null),u&&n&&(u.current=j?b.left:b.right),d?.(e)},[d]);(0,eo.r)({restoreFocusOnCleanUp:!0,containerRef:S,disabled:!_});let P=(0,r.useCallback)(()=>{S.current?.focus(),D(),N?.(!0)},[D,N]),{diff_inline_comments:U}=(0,eN.h)(),H=(0,r.useCallback)(e=>{U&&e.target===S.current&&"Enter"===e.key&&g?.()},[g,U]);return(0,ed.P)(()=>{P()},[P]),(0,i.jsxs)(er.tL,{as:"td",commands:{"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(w){void 0===A||A?.startOrientation===A?.endOrientation&&A?.startLineNumber===A?.endLineNumber?(0,tl.D)(I(j?"left":"right",j?b?.left:b?.right)):(0,tl.D)(T(j?"left":"right"));return}(0,tl.D)(R())},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,p.j2)({line:b,range:A,fileAnchor:v});e&&(0,tl.D)(e)},"pull-requests-diff-view:start-conversation-current":h},ref:S,"data-grid-cell-id":td(a),"data-line-anchor":c,"data-selected":C,role:_?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${a<3?"left-side":""}`:"focusable-grid-cell",onKeyUp:H,onBlur:e=>e.target.ariaSelected="false",onClick:l,onFocus:e=>e.target.ariaSelected="true",onMouseDown:$,onMouseUp:M,title:_?"Title":"",...x,children:[e,t&&k&&(0,i.jsx)(ec.W,{anchorRef:S,open:!0,onOpenChange:L,children:(0,i.jsx)(ec.W.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(eu.l,{children:t})})})]})});function tm(){let{isSplit:e}=E();return(0,i.jsx)("div",{className:(0,g.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(b.KebabHorizontalIcon,{})})}let th=(0,r.forwardRef)(function({summary:e,searchResultsForLine:t,focusedSearchResult:n,columnIndex:a,lineAnchor:l,firstLineNumberSelection:o,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,filePath:u,copilotChatReference:m},h){let{diffLine:x,fileAnchor:y,isLeftSide:v,setInGridMode:C}=E(),[j,w]=(0,p._S)(x.html,x.type),[N,S]=(0,r.useState)(""),k=w&&["+","-"].includes(w),{isActionBarVisible:L}=eC(),{selectedDiffRowRange:A,selectedDiffLines:D}=(0,f.o)(),{commentBatchPending:_,commentingEnabled:R,commentingImplementation:I,initialExpandedThreadId:T,markerNavigationImplementation:F,repositoryId:O,subjectId:M,subject:$,viewerData:P}=ef(),{hasPersistedComment:H}=(0,U.L4)({diffSide:v?"LEFT":"RIGHT",filePath:u,line:x.blobLineNumber,subjectId:M,fileLevelComment:!1}),{isInDialogMode:V,enableInlineCommentDialogMode:K,disableInlineCommentDialogMode:q}=(0,B.q)(),z=(0,r.useMemo)(()=>{var e;return e=P.viewerCanComment,R&&e&&(0,p.a1)(x,D)},[R,P,x,D]),G=(0,r.useRef)(null),W=(0,r.useRef)(null);(0,r.useImperativeHandle)(h,()=>W.current,[]);let{diff_inline_comments:Q}=(0,eN.h)(),X=!!x.threadsData?.threads?.length||!!x.annotationsData?.annotations?.length,Y=(0,p.S4)({hasThreads:X&&!Q}),J=tc(x,!!v),Z=td(a),{handleCellBlur:ee,handleCellFocus:et,handleCellMouseEnter:en,handleCellMouseLeave:ea}=ek({cellRef:W}),[er,el]=(0,r.useState)(!1),eo=(0,r.useCallback)(()=>{er?(q(),C?.(!0)):(K(),C?.(!1)),el(!er)},[q,K,C,er]),{annotations:ed,isNewConversationDialogOpen:ec,shouldStartNewConversationWithSuggestedChange:eu,startNewConversation:em,startNewConversationWithSuggestedChange:eh,openMarkerOrListDialog:ep,selectAnnotation:eg,selectThread:ex,isMarkerListDialogOpen:ey,closeNewConversationDialog:eb,closeMarkerListDialog:ev,closeConversationDetailsDialog:ej,returnFocusRef:ew,optimizedSelectedAnnotationId:eL,optimizedSelectedThreadId:eA,threadConnectionId:eD,threads:e_}=eS({cellId:Z,actionBarRef:G,onOpenInLineThread:eo}),eR=(0,r.useCallback)((e=!0)=>{W.current?.classList.contains("diff-text-cell")&&(K(),C?.(!1),e&&setTimeout(()=>{W.current?.querySelector('[aria-label="Start conversation"]')?.focus()},0))},[K,C]);(0,r.useEffect)(()=>{I&&T&&eA!==T&&e_.map(e=>e.id).includes(T)&&ex(T,{skipLineSelection:!0})},[T]),(0,r.useEffect)(()=>{if(!F)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=F;if(e){let n=e_.map(e=>e.id),i=ed.map(e=>e.id);n.includes(e)?(ex(e,{skipLineSelection:!0}),t()):i.includes(e)&&(eg(e,{skipLineSelection:!0}),t())}},[ex,e_,F,ed,eg]);let eI=({onCompleted:e,threadsConnectionId:t,...n})=>{if(!I||!x)return;let{leftLines:i,rightLines:a}=D;if(A){let e="left"===A.endOrientation?i:a,n=e[e.length-1];n&&(0,p.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}I.addThread({...n,diffLine:x,isLeftSide:v,selectedDiffRowRange:A,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),ex(t),Q&&S(t)}})},eT=({onCompleted:e,...t})=>{I&&x&&I.deleteComment({...t,onCompleted:()=>{e?.(),e_.length<=1&&(ej(),setTimeout(()=>W.current?.focus()))},filePath:u})},eO=(0,eE.S)(I?.suggestedChangesEnabled,x,eu),eM=(0,r.useCallback)(()=>{q(),C?.(!0)},[q,C]),e$=(0,r.useCallback)(()=>{V||0!==(W.current?.querySelectorAll(":focus")??[]).length||(q(),C?.(!0))},[q,V,C]),eP=(0,r.useRef)(!0),{ghostUser:eB}=ef(),eU=ec&&I?(0,i.jsx)(U.cT,{isDialog:!1,addCommentDialogTitle:J,anchorRef:W,batchPending:_,batchingEnabled:I.batchingEnabled,commentBoxConfig:I.commentBoxConfig,filePath:u,isLeftSide:!!v,isOpen:ec,lineNumber:x.blobLineNumber,repositoryId:O,returnFocusRef:ew,subjectId:M,suggestedChangesConfig:eO,threadsConnectionId:eD,viewerData:P,onAddComment:eI,onCloseCommentDialog:eb}):null;return(0,i.jsxs)(tu,{ref:W,columnIndex:a,commentDialogOpen:ec,handleDiffCellClick:d,enterDialogMode:eR,handleDiffSideCellSelectionBlocking:c,lineAnchor:l,firstLineNumberSelection:o,startConversation:em,ContextMenu:(0,i.jsx)(eW,{copilotChatReference:m,showStartConversation:z,handleViewMarkersSelection:ep,startConversationCurrentLine:em,startConversationWithSuggestedChange:eh}),className:(0,g.$)(`diff-text-cell ${v?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":v&&"HUNK"!==x.type}),style:{backgroundColor:tb(x.type,!1),paddingRight:Y},onBlur:e=>{ee(e),e$()},onFocus:et,onMouseEnter:en,onMouseLeave:ea,children:[(0,i.jsxs)("code",{className:(0,g.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===x.type,deletion:"DELETION"===x.type}),children:[k&&(0,i.jsx)("span",{className:"diff-text-marker",children:w}),t&&t.length>0&&(0,i.jsx)(tn,{searchResults:t,focusedSearchResult:n,className:(0,g.$)("diff-text-inner",{"color-fg-muted":"HUNK"===x.type})}),(0,i.jsx)(s.mo,{html:j,className:(0,g.$)("diff-text-inner",{"color-fg-muted":"HUNK"===x.type})})]}),x.displayNoNewLineWarning&&(0,i.jsx)(b.NoEntryIcon,{size:16,className:"fgColor-danger"}),L&&(0,i.jsx)(te,{shouldDisplayCollapseComments:!!Q&&er,copilotChatReference:m,authorAvatarUrl:P.avatarUrl,authorLogin:P.login,ref:G,cellId:Z,cellRef:W,hasDraftComment:H,showStartConversation:z,onOpenInLineThread:eo}),I&&F&&(0,i.jsx)(i.Fragment,{children:Q&&X&&(P.commentsPreference===es.sI.Visible||er)?(0,i.jsx)(ei,{manuallyUpdateCommentsWithThisThreadId:N,annotations:ed,enterDialogMode:eR,batchPending:_,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:eT},conversationListThreads:e_,fileAnchor:y,filePath:u,onCloseFocusMode:eM,isMarkerListOpen:!!W.current?.classList.contains("diff-text-cell")&&e_.length>0,repositoryId:O,returnFocusRef:ew,selectedAnnotationId:eL,selectedThreadId:eA||(W.current?.classList.contains("diff-text-cell")&&e_.length>0?e_[0]?.id:null),subjectId:M,subject:$,suggestedChangesConfig:eO,threadsConnectionId:eD,onCloseConversationDialog:ej,onCloseConversationList:ev,onAnnotationSelected:eg,onThreadSelected:ex,viewerData:P,ghostUser:eB,startConversationElementJSX:eU}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.c7,{annotations:ed,batchPending:_,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:eT},conversationAnchorRef:W,conversationListAnchorRef:ew,conversationListThreads:e_,fileAnchor:y,filePath:u,isMarkerListOpen:ey,repositoryId:O,returnFocusRef:ew,selectedAnnotationId:eL,selectedThreadId:eA,subjectId:M,subject:$,suggestedChangesConfig:eO,threadsConnectionId:eD,onCloseConversationDialog:ej,onCloseConversationList:ev,onAnnotationSelected:eg,onThreadSelected:ex,markerNavigationImplementation:F,viewerData:P,ghostUser:eB}),(0,i.jsx)(U.cT,{addCommentDialogTitle:J,anchorRef:W,batchPending:_,batchingEnabled:I.batchingEnabled,commentBoxConfig:I.commentBoxConfig,filePath:u,isLeftSide:!!v,isOpen:ec,lineNumber:x.blobLineNumber,repositoryId:O,returnFocusRef:ew,subjectId:M,suggestedChangesConfig:eO,threadsConnectionId:eD,viewerData:P,onAddComment:eI,onCloseCommentDialog:eb})]})}),!L&&(!Q||P.commentsPreference===es.sI.Collapsed)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===P.lineSpacingPreference?"-1px":"-2px"},className:(0,g.$)("position-absolute top-0 d-flex user-select-none",ts["in-progress-comment-indicator"]),children:H&&(0,i.jsx)(e7,{lineSpacingPreference:P.lineSpacingPreference,authorAvatarUrl:P.avatarUrl,authorLogin:P.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,g.$)("position-absolute top-0 d-flex user-select-none",ts["comment-indicator"]),children:(0,i.jsx)(eF,{shouldAnimateRef:eP,lineSpacingPreference:P.lineSpacingPreference})})]}),e&&(0,i.jsx)(ta,{summary:e})]})}),tf=(0,r.memo)(th),tp=(0,r.memo)(tg);function tg({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,firstLineNumberSelection:l,filePath:s,copilotChatReference:o,contentRef:d,...c}){let u=(0,r.useRef)(null),m=td(t),{commentBatchPending:h,commentingEnabled:x,commentingImplementation:y,repositoryId:b,subject:v,subjectId:C,markerNavigationImplementation:j,viewerData:w}=ef(),{diffLine:N,fileAnchor:S,isLeftSide:k}=E(),{selectedDiffRowRange:L,selectedDiffLines:A,updateSelectedDiffRowRange:D}=(0,f.o)(),_=tc(N,!!k),R=(0,r.useMemo)(()=>{var e;return e=w.viewerCanComment,x&&e&&(0,p.a1)(N,A)},[x,w,N,A]),{handleCellBlur:I,handleCellFocus:T,handleCellMouseEnter:F,handleCellMouseLeave:O}=ek({cellRef:d}),M=(0,r.useCallback)(()=>{l&&null!==l.current&&D(S,k?N.left:N.right,k?"left":"right",!0,!0),F()},[S,F,k,N.left,N.right,l,D]),$=(0,r.useCallback)(()=>{D(S,k?N.left:N.right,k?"left":"right",!1,!0)},[]),{ghostUser:P}=ef(),{annotations:B,isNewConversationDialogOpen:H,shouldStartNewConversationWithSuggestedChange:V,startNewConversation:K,startNewConversationWithSuggestedChange:q,openMarkerOrListDialog:z,isMarkerListDialogOpen:G,closeConversationDetailsDialog:W,closeMarkerListDialog:Q,selectAnnotation:X,selectThread:Y,closeNewConversationDialog:J,returnFocusRef:Z,optimizedSelectedThreadId:ee,optimizedSelectedAnnotationId:et,threadConnectionId:en,threads:ei}=eS({cellId:m,actionBarRef:u}),ea=(0,eE.S)(y?.suggestedChangesEnabled,N,V);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tu,{ref:u,className:(0,g.$)("diff-line-number",to.includes(N.type)&&"diff-line-number-neutral"),columnIndex:t,commentDialogOpen:H,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,firstLineNumberSelection:l,startConversation:K,style:{backgroundColor:tb(N.type,!0),textAlign:"center"},ContextMenu:(0,i.jsx)(eW,{copilotChatReference:o,showStartConversation:R,handleViewMarkersSelection:z,startConversationCurrentLine:K,startConversationWithSuggestedChange:q}),onBlur:I,onFocus:T,handleDiffCellMouseDown:$,onMouseEnter:M,onMouseLeave:O,...c,children:(0,i.jsx)("code",{children:e})}),y&&j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.c7,{annotations:B,batchPending:h,batchingEnabled:y.batchingEnabled,commentingImplementation:{...y,deleteComment:({onCompleted:e,...t})=>{y&&N&&y.deleteComment({...t,onCompleted:()=>{e?.(),ei.length<=1&&(W(),setTimeout(()=>u.current?.focus()))},filePath:s})}},conversationAnchorRef:u,conversationListAnchorRef:Z,conversationListThreads:ei,fileAnchor:S,filePath:s,isMarkerListOpen:G,repositoryId:b,returnFocusRef:Z,selectedAnnotationId:et,selectedThreadId:ee,subjectId:C,subject:v,suggestedChangesConfig:ea,threadsConnectionId:en,markerNavigationImplementation:j,onCloseConversationDialog:W,onCloseConversationList:Q,onThreadSelected:Y,onAnnotationSelected:X,viewerData:w,ghostUser:P}),(0,i.jsx)(U.cT,{addCommentDialogTitle:_,align:"start",anchorRef:u,batchPending:h,batchingEnabled:y.batchingEnabled,commentBoxConfig:y.commentBoxConfig,filePath:s,isLeftSide:!!k,isOpen:H,lineNumber:N.blobLineNumber,repositoryId:b,returnFocusRef:Z,subjectId:C,suggestedChangesConfig:ea,threadsConnectionId:en,viewerData:w,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!y||!N)return;let{leftLines:i,rightLines:a}=A;if(L){let e="left"===L.endOrientation?i:a,n=e[e.length-1];n&&(0,p.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}y.addThread({...n,diffLine:N,selectedDiffRowRange:L,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),Y(t)}})},onCloseCommentDialog:J})]})]})}function tx({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:a}){let l=(0,r.useRef)(null),[o,d]=function(e){let[t,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),l=(0,r.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),s=(0,r.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),o=(0,r.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]);return[{onFocus:s,onBlur:l},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:o,onFocusCapture:(0,r.useCallback)(e=>{e.stopPropagation(),a(!0)},[]),onKeyDownCapture:(0,r.useCallback)(e=>{M(e.key)&&e.stopPropagation()},[])}]}(l),{diffLine:c}=E();return(0,i.jsx)(tu,{ref:l,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...o,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(d)??(0,i.jsx)(tm,{}),(0,i.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,i.jsx)(tn,{searchResults:n,focusedSearchResult:a,className:(0,g.$)("diff-text-inner",{"color-fg-muted":"HUNK"===c.type})}),(0,i.jsx)(s.mo,{className:"diff-text-inner color-fg-muted",html:c.html})]})]})})}function ty({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(tu,{ContextMenu:(0,i.jsx)(eQ,{}),className:(0,g.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}function tb(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}try{tu.displayName||(tu.displayName="Cell")}catch{}try{tm.displayName||(tm.displayName="HunkKebabIcon")}catch{}try{th.displayName||(th.displayName="ContentCellUnmemoized")}catch{}try{tf.displayName||(tf.displayName="ContentCell")}catch{}try{tp.displayName||(tp.displayName="LineNumberCell")}catch{}try{tg.displayName||(tg.displayName="LineNumberCellUnmemoized")}catch{}try{tx.displayName||(tx.displayName="HunkCell")}catch{}try{ty.displayName||(ty.displayName="EmptyCell")}catch{}let tv=({summary:e,resultsForLine:t,focusedSearchResult:n,handleDiffSideCellSelectionBlocking:a,handleDiffRowClick:l,lineAnchor:s,filePath:o,copilotChatReference:d,firstLineNumberSelection:c})=>{let{diffLine:u,isLeftSide:m,isSplit:h}=E(),f=(0,r.useRef)(null),p="ADDITION"!==u.type,g=!h||m,x=g&&!p,y="DELETION"!==u.type,b=!h||!m,v=b&&!y,C=(0,r.useCallback)(e=>{u.left&&l(e,u.left,"left",e.shiftKey,!0)},[l,u.left]),j=(0,r.useCallback)(e=>{u.left&&l(e,u.left,"left",e.shiftKey,!1)},[l,u.left]),w=(0,r.useCallback)(e=>{u.right&&l(e,u.right,"right",e.shiftKey,!0)},[l,u.right]),N=(0,r.useCallback)(e=>{u.right&&l(e,u.right,"right",e.shiftKey,!1)},[l,u.right]),S=(0,r.useCallback)(()=>{a&&a("left")},[a]),k=(0,r.useCallback)(()=>{a&&a("right")},[a]);return(0,i.jsxs)(ev,{line:u,children:[g&&(0,i.jsx)(tp,{copilotChatReference:d,columnIndex:0,filePath:o,handleDiffCellClick:x?w:C,handleDiffSideCellSelectionBlocking:k,firstLineNumberSelection:c,contentRef:f,children:p&&u.left}),b&&(0,i.jsx)(tp,{copilotChatReference:d,columnIndex:h?2:1,filePath:o,handleDiffCellClick:v?C:w,handleDiffSideCellSelectionBlocking:S,firstLineNumberSelection:c,contentRef:f,children:y&&u.right}),(0,i.jsx)(B.k,{children:(0,i.jsx)(tf,{copilotChatReference:d,columnIndex:h?m?1:3:2,filePath:o,handleDiffCellClick:m?j:N,lineAnchor:s,handleDiffSideCellSelectionBlocking:m?k:S,searchResultsForLine:t,focusedSearchResult:n,summary:e,firstLineNumberSelection:c,ref:f})})]})},tC=({summary:e,resultsForLine:t,focusedSearchResult:n,fileAnchor:a,filePath:r,handleDiffRowClick:l,handleDiffSideCellSelectionBlocking:s,copilotChatReference:o,firstLineNumberSelection:d})=>{let{diffLine:c,isLeftSide:u}=E();if((0,p.Po)(c))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ty,{columnIndex:u?0:2}),(0,i.jsx)(ty,{columnIndex:u?1:3,showRightBorder:u})]});let h=u?"left":(0,m.XU)(c.type),f="left"===h?c.left:c.right,g=(0,m.IQ)(a,h,f??0);switch(c.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(tw,{copilotChatReference:o,filePath:r,handleDiffRowClick:l,handleDiffSideCellSelectionBlocking:s,lineAnchor:g,resultsForLine:t,focusedSearchResult:n,summary:e,firstLineNumberSelection:d});default:throw Error(`cannot handle type ${c.type}`)}},tj=r.memo(tC),tw=r.memo(tv);try{tv.displayName||(tv.displayName="CodeDiffLineUnmemoized")}catch{}try{tC.displayName||(tC.displayName="DiffLineSideUnmemoized")}catch{}try{tj.displayName||(tj.displayName="DiffLineSide")}catch{}try{tw.displayName||(tw.displayName="CodeDiffLine")}catch{}let tN={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--j86KQ"};function tS({direction:e,icon:t,label:n,onClick:a,ariaLabel:r,className:l,...s}){let{sendAnalyticsEvent:o}=(0,K.s)(),{isSplit:d}=E();return(0,i.jsx)("button",{onClick:()=>{a(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,g.$)("Button Button--iconOnly Button--invisible",tN["expand-button-line"],!d&&tN["expand-button-unified"],l),"aria-label":r??n,"data-direction":e,...s,children:(0,i.jsx)(t,{})})}function tk({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:a}){let{fileLineCount:l,diffLine:s}=E(),{expandStartOfHunk:o,expandEndOfPreviousHunk:d}=eB(),c=!t,u=!e,m=0===s.blobLineNumber,h=c||u,f=u&&s.blobLineNumber===l,g=(0,r.useMemo)(()=>!h&&!(s.blobLineNumber<=0)&&(s.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-s.blobLineNumber>=20),[h,s,e,t]),x=(0,r.useMemo)(()=>!h&&!f&&s.blobLineNumber-t.blobLineNumber>20,[h,f,s,t]),y=(0,r.useMemo)(()=>!(s.blobLineNumber<=0)&&!m&&!!c,[c,m,s]),v=(0,r.useMemo)(()=>!c&&!f&&!!u,[c,u,f]),C=(0,r.useMemo)(()=>{switch(!0){case g:return"expand-all";case x:return"expand-up-and-down";case y:return"expand-up";case v:return"expand-down"}},[g,x,y,v]),j=()=>o(),w=()=>d(),N=()=>o();return(0,i.jsx)(tx,{searchResultsForLine:n,focusedSearchResult:a,renderHunkButton:n=>{switch(C){case"expand-all":return(0,i.jsx)(tS,{...n,direction:"all",icon:b.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:N});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(tS,{...n,direction:"down",icon:b.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:tN["expand-up-and-down"],onClick:w}),(0,i.jsx)(tS,{...n,direction:"up",icon:b.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:tN["expand-up-and-down"],onClick:j})]});case"expand-up":return(0,i.jsx)(tS,{...n,direction:"up",icon:b.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:j});case"expand-down":return(0,i.jsx)(tS,{...n,direction:"down",icon:b.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:w});default:return null}},ContextMenu:(0,i.jsx)(tE,{handleCopyContent:()=>{let[e]=(0,p._S)((0,p.ZC)(s.html),s.type);(0,tl.D)(e)},handleExpandAbove:j,handleExpandAll:N,handleExpandBelow:w,shouldCopyContent:!!s.html,shouldExpandAbove:x||y,shouldExpandBelow:x||v})})}function tE({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:a,handleExpandBelow:r,handleExpandAbove:l,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},d={key:"]"},c={key:"["},u={key:"C"};return(0,i.jsx)(ec.W.Overlay,{width:"medium",children:(0,i.jsxs)(eu.l,{children:[(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":(0,p.oE)(o),onSelect:a,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,p.pI)(o)}`})})]}),t?(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":(0,p.oE)(d),onSelect:l,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,p.pI)(d)}`})})]}):null,e?(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":(0,p.oE)(c),onSelect:r,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,p.pI)(c)}`})})]}):null,(0,i.jsx)(e6,{}),n?(0,i.jsxs)(eu.l.Item,{"aria-keyshortcuts":(0,p.oE)(u),onSelect:s,children:[(0,i.jsx)(eu.l.LeadingVisual,{children:(0,i.jsx)(b.CopyIcon,{})}),"Copy",(0,i.jsx)(eu.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,p.pI)(u)}`})})]}):null]})})}try{tS.displayName||(tS.displayName="ExpandButtonLine")}catch{}try{tk.displayName||(tk.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{tE.displayName||(tE.displayName="HunkContextMenu")}catch{}let tL=(0,r.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:a,diffEntryId:l,diffLines:s,fileAnchor:o,fileLineCount:d,filePath:c,handleDiffRowClick:u,handleDiffSideCellSelectionBlocking:m,replaceSelectedDiffRowRangeFromGridCells:h,selectedDiffRowRange:f,setInGridMode:g,tableRef:x,updateDiffLines:y,updateSelectedDiffRowRange:b,copilotChatReference:v,inGridMode:C,firstLineNumberSelection:j}){let{leftLines:S,rightLines:E}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,r.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(P.V);for(;n.length<t.length;)n.push(P.V)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":i();let[e,r]=[{...a,threadsData:void 0,annotationsData:void 0},{...a,threadsData:a.threadsData?{...a.threadsData,threads:a.threadsData.threads,totalCommentsCount:a.threadsData.totalCommentsCount,totalCount:a.threadsData.totalCount}:void 0}];t.push(e),n.push(r);break;case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(s),{addInjectedContextLines:D,ghostUser:_}=ef();$({clearSelectedDiffRowRange:a,containerRef:x,fileAnchor:o,isSplitDiff:!0,leftLines:S,replaceSelectedDiffRowRangeFromGridCells:h,rightLines:E,selectedDiffRowRange:f,updateSelectedDiffRowRange:b,disabled:!C});let R=(0,r.useMemo)(()=>{if(f)return(0,A.A)({selectedDiffRowRange:f,leftLines:S,rightLines:E,isNumberCell:!0})},[f,S,E]);(0,r.useEffect)(()=>{y(o,s)},[s,o,y]);let I=(0,r.useMemo)(()=>N(S),[S]),T=new Map,F=new Map,O=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(T.has(n.leftLineNumber)?T.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&T.set(n.leftLineNumber,[n]),O.has(n.hunkLineNumber)?O.get(n.hunkLineNumber)?.push(n):n.isHunk&&O.set(n.hunkLineNumber,[n]),F.has(n.rightLineNumber)?F.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&F.set(n.rightLineNumber,[n]))}let M=[];for(let e=0;e<S.length;e++){let a=S[e],s=E[e],h=S[e-1],f=(0,p.Po)(S[e+1])?E[e+1]:S[e+1],x=(0,p.qK)(a)&&"HUNK"===a.type,y=(0,p.qX)(o,a,s),b=(0,p.Po)(a)?(0,p.Po)(s)?void 0:s:a;if(!b)continue;let C=(0,p.Po)(a)?void 0:a.threadsData,N=(0,p.Po)(s)?void 0:s.threadsData,{currentHunk:A,nextHunk:$,previousHunk:P}=w(b,I),B=T.get((0,p.Po)(a)?-2:a.left??-2),U=F.get((0,p.Po)(s)?-2:s.right??-2),H=O.get(b.blobLineNumber),V=H?.[0]?.rightLineNumber===s?.right?n:void 0,K=B?.[0]?.leftLineNumber===a?.left?n:void 0,q=U?.[0]?.rightLineNumber===s?.right?n:void 0,z=ti(a,s,"LEFT"),G=ti(a,s,"RIGHT"),W=L(N,_),Q=L(C,_),X={currentHunk:A,diffEntryId:l,fileAnchor:o,fileLineCount:d,filePath:c,isRowSelected:(R?.isRowSelected(a)||R?.isRowSelected(s))??!1,modifiedLineThreadsConnectionId:N?.__id,nextHunk:$,originalLineThreadsConnectionId:C?.__id,previousHunk:P,rowId:y,isSplit:!0,diffContext:t,setInGridMode:g},{expandEndOfHunk:Y,expandEndOfPreviousHunk:J,expandStartOfHunk:Z}=eU(D,$,A,P),ee=()=>{if(!(0,p.Po)(a)&&a?.type==="HUNK"){J();return}Y()};M.push((0,i.jsx)(r.Fragment,{children:(0,i.jsx)(er.tL,{as:"tr",className:"diff-line-row",commands:{"pull-requests-diff-view:expand-hunk-up":Z,"pull-requests-diff-view:expand-hunk-down":ee},children:x?(0,i.jsx)(k,{...X,diffLine:b,modifiedLineThreads:W,originalLineThreads:Q,children:(0,i.jsx)(tk,{nextLine:f,prevLine:h,focusedSearchResult:V,resultsForLine:H})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k,{...X,diffLine:a,isLeftSide:!0,modifiedLineThreads:W,originalLineThreads:Q,children:(0,i.jsx)(tj,{summary:z,copilotChatReference:v,fileAnchor:o,filePath:c,handleDiffRowClick:u,handleDiffSideCellSelectionBlocking:m,resultsForLine:B,focusedSearchResult:K,firstLineNumberSelection:j})}),(0,i.jsx)(k,{...X,diffLine:s,modifiedLineThreads:W,originalLineThreads:Q,children:(0,i.jsx)(tj,{summary:G,copilotChatReference:v,fileAnchor:o,filePath:c,handleDiffRowClick:u,handleDiffSideCellSelectionBlocking:m,resultsForLine:U,focusedSearchResult:q,firstLineNumberSelection:j})})]})})},y))}return(0,i.jsx)(i.Fragment,{children:M})});try{tL.displayName||(tL.displayName="SplitDiffLines")}catch{}let tA=(0,r.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:a,diffEntryId:l,diffLines:s,fileLineCount:o,fileAnchor:d,filePath:c,tableRef:u,selectedDiffRowRange:h,handleDiffRowClick:f,updateDiffLines:g,updateSelectedDiffRowRange:x,replaceSelectedDiffRowRangeFromGridCells:y,copilotChatReference:b,setInGridMode:v,inGridMode:C,firstLineNumberSelection:j}){$({clearSelectedDiffRowRange:a,containerRef:u,fileAnchor:d,isSplitDiff:!1,leftLines:s,replaceSelectedDiffRowRangeFromGridCells:y,selectedDiffRowRange:h,updateSelectedDiffRowRange:x,disabled:!C});let{addInjectedContextLines:S}=ef(),E=(0,r.useMemo)(()=>{if(h)return(0,A.A)({selectedDiffRowRange:h,leftLines:s,isNumberCell:!0})},[h,s]),L=(0,r.useMemo)(()=>N(s.map(e=>e)),[s]);(0,r.useEffect)(()=>{g(d,s)},[s,d,g]);let D=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&D.has(n.diffLineNumIndex)?D.get(n.diffLineNumIndex)?.push(n):e&&D.set(n.diffLineNumIndex,[n]))}let _=s.map((e,a)=>{let u=s[a+1],h=s[a-1],g="HUNK"===e.type,x=(0,m.IQ)(d,(0,m.XU)(e.type),e.blobLineNumber),{currentHunk:y,nextHunk:C,previousHunk:N}=w(e,L),A=D.get(a),_=a===A?.[0]?.diffLineNumIndex?n:void 0,R=ti(e,e,"RIGHT"),I=E?.isRowSelected(e)??!1,T=(0,p.qX)(d,e,e),F={diffEntryId:l,diffLine:e,currentHunk:y,fileAnchor:d,fileLineCount:o,filePath:c,isLeftSide:"DELETION"===e.type,isRowSelected:I,isSplit:!1,nextHunk:C,previousHunk:N,diffContext:t,rowId:T,setInGridMode:v},{expandEndOfHunk:O,expandEndOfPreviousHunk:M,expandStartOfHunk:$}=eU(S,C,y,N);return(0,i.jsx)(r.Fragment,{children:(0,i.jsxs)(er.tL,{as:"tr",className:"diff-line-row",commands:{"pull-requests-diff-view:expand-hunk-up":$,"pull-requests-diff-view:expand-hunk-down":()=>{if(!(0,p.Po)(e)&&e?.type==="HUNK"){M();return}O()}},children:[" ",(0,i.jsx)(k,{...F,children:g?(0,i.jsx)(tk,{nextLine:u,prevLine:h,focusedSearchResult:_,resultsForLine:A},a):(0,i.jsx)(tw,{filePath:c,copilotChatReference:b,handleDiffRowClick:f,firstLineNumberSelection:j,lineAnchor:x,resultsForLine:A,focusedSearchResult:_,summary:R},a)})]})},a)});return(0,i.jsx)(i.Fragment,{children:_})});try{tA.displayName||(tA.displayName="UnifiedDiffLines")}catch{}let tD={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ",compact:"DiffLines-module__compact--wEEom"};var t_=n(38568),tR=n(58748);let tI={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"};var tT=n(29063);function tF({tableRef:e}){let[t,n]=(0,r.useState)(null),{selectedDiffRowRange:a}=(0,f.o)(),l=(0,r.useCallback)(()=>{if(!e.current)return;let t=a?e.current.querySelectorAll('td[data-selected="true"]'):[],i=e.current.getAttribute("data-diff-anchor"),r=tr.fV.hash.substring(1),l=(0,tT.ZD)(r);if(0===t.length||i!==l?.diffAnchor){n(null);return}let s=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(e.current).getBoundingClientRect(),o=0,d=Number.MAX_SAFE_INTEGER,c=0,u=Number.MAX_SAFE_INTEGER;for(let e of t){let t=e.getBoundingClientRect();o=Math.max(o,t.bottom-s.top),d=Math.min(d,t.left-s.left),c=Math.max(c,t.right-s.left),u=Math.min(u,t.top-s.top)}n({left:d-1,height:o-u,top:u-1,width:c-d+2})},[a,e]);return((0,t_.N)(()=>{tr.cg?.requestAnimationFrame(()=>{l()})},[e,l]),(0,t_.N)(()=>{let e=()=>{tr.cg?.requestAnimationFrame(()=>{l()})};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[l,e]),(0,tR.w)(l,e),t)?(0,i.jsx)("div",{className:(0,g.$)("position-absolute","borderColor-accent-emphasis",tI.overlay),style:t,children:(0,i.jsx)("div",{className:(0,g.$)("width-full","height-full","bgColor-accent-emphasis",tI.overlayOpacity)})}):null}try{tF.displayName||(tF.displayName="SelectedDiffLinesOverlay")}catch{}function tO({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let tM=(0,r.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:a,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:s,copilotChatReference:o,...d}){let u=`diff-${a.pathDigest}`;if(a.isBinary)return(0,i.jsx)(tO,{diffAnchor:u,children:"Binary file not shown."});if((0,c.dK)(a))return(0,i.jsx)(tO,{diffAnchor:u,children:"File renamed without changes."});if((0,c.Jc)(a))return(0,i.jsx)(tO,{diffAnchor:u,children:"File copied without changes."});if((0,c.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode))return(0,i.jsx)(tO,{diffAnchor:u,children:"File mode changed."});if((0,c.HI)(a))return(0,i.jsx)(tO,{diffAnchor:u,children:(0,c.l_)(a.truncatedReason)});if((0,c.s8)(a))return(0,i.jsx)(tO,{diffAnchor:u,children:"Whitespace-only changes."});if(!r&&(0,c.lO)(a))return(0,i.jsx)(v,{diffAnchor:u,onLoadDiff:s,children:"This file was deleted."});if(!r&&(0,c.xW)(a))return(0,i.jsxs)(v,{diffAnchor:u,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:s,children:["Some generated files are not rendered by default. Learn more about"," "]});if(a.isTooBig){if("commit"===t&&0===a.diffLines.length)return r?(0,i.jsxs)(tO,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(h.A,{inline:!0,href:`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]}):(0,i.jsx)(v,{diffAnchor:u,onLoadDiff:s,children:"Large diffs are not rendered by default."});if("pr"===t)return a.diffLines.length>0?(0,i.jsx)(v,{diffAnchor:u,onLoadDiff:s,children:"Large diffs are not rendered by default."}):(0,i.jsxs)(tO,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(h.A,{inline:!0,href:`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]})}return a.diffLines?(0,i.jsx)(eh,{...d,children:(0,i.jsx)(f.Y,{children:(0,i.jsx)(t$,{diffAnchor:u,diffContext:t,diffEntryData:a,viewerData:d.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:o})})}):null});function t$({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:a,focusedSearchResult:l,copilotChatReference:s,diffContext:o}){let d=(0,r.useRef)(null),[c,h]=(0,r.useState)(!0),[x,y]=(0,r.useState)(null),b=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,v=(0,r.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<b?n.diffLines.concat({__id:C.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,b]),{diffViewPreference:j,lineSpacingPreference:w,tabSizePreference:N}=t,{selectedDiffRowRange:S,replaceSelectedDiffRowRange:k,replaceSelectedDiffRowRangeFromGridCells:E,clearSelectedDiffRowRange:L,updateDiffLines:A,updateSelectedDiffRowRange:D}=(0,f.o)(),_=(0,r.useCallback)(e=>{if(!d.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=d.current.contains(t);n&&!i&&(L(),M.current=null)},[L,d]);(0,r.useEffect)(()=>(tr.XC?.addEventListener("mousedown",_),()=>{tr.XC?.removeEventListener("mousedown",_)}),[_]);let R=e===S?.diffAnchor;(0,r.useEffect)(()=>{if(!R)return;let e=(0,p.On)(S,v);e&&e!==S&&k(e)},[v,S,R,k]);let I=tr.cg?.location.search,T=(0,r.useMemo)(()=>"split"===new URLSearchParams(I).get("diff")||"split"===j,[I,j]),F=(0,m.c7)(v),O=(0,r.useCallback)(e=>{y(e)},[y]),M=(0,r.useRef)(null),$=(0,r.useCallback)((t,n,i,a,r)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(t.target)&&!t.defaultPrevented&&r&&D(e,n,i,a,r)},[e,D]),P=(0,r.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${T?`, ${"left"===x?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;"\n"===t?n.push(""):n.push(t)}}else n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join("\n")),e.preventDefault()}},[x,T]),B={searchResults:a,diffContext:o,focusedSearchResult:l,clearSelectedDiffRowRange:L,diffEntryId:n.objectId,diffLines:v,fileAnchor:e,fileLineCount:b,filePath:n.path,handleDiffRowClick:$,handleDiffSideCellSelectionBlocking:O,replaceSelectedDiffRowRangeFromGridCells:E,selectedDiffRowRange:R?S:null,tableRef:d,updateDiffLines:A,updateSelectedDiffRowRange:D,copilotChatReference:s,setInGridMode:h,inGridMode:c,firstLineNumberSelection:M};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tF,{tableRef:d}),(0,i.jsx)(er.tL,{as:"table",triggerOnDefaultPrevented:!0,commands:{"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},ref:d,className:(0,g.$)("tab-size","width-full",tD.tableLayoutFixed,{[tD.compact]:"compact"===w}),"data-block-diff-cell-selection":x,"data-diff-anchor":e,"data-tab-size":N,"data-paste-markdown-skip":!0,onCopy:P,role:"grid",style:{"--line-number-cell-width":`${F}px`,"--line-number-cell-width-unified":`${2*parseFloat(F)}px`},children:T?(0,i.jsx)(u.wj,{lineWidth:F,children:(0,i.jsx)(tL,{...B})}):(0,i.jsx)(u.Qe,{lineWidth:F,children:(0,i.jsx)(tA,{...B})})})]})}try{tO.displayName||(tO.displayName="PlainTextStatus")}catch{}try{tM.displayName||(tM.displayName="DiffLines")}catch{}try{t$.displayName||(t$.displayName="CodeDiffLines")}catch{}let tP={diffHeaderWrapper:"Diff-module__diffHeaderWrapper--J03RC"};var tB=n(58599);function tU({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:a,newCommitOid:l,oldCommitOid:s,status:o,submoduleUrl:d}=e,c=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,u=(0,r.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(tK,{commitOid:l,contentsUrl:a,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(tK,{commitOid:s,contentsUrl:a,type:"deleted"});default:return(0,i.jsx)(tq,{newCommitOid:l,oldCommitOid:s,changedFiles:n,contentsUrl:a})}},[l,s,o,n,a]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${c?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(b.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(tH,{basePath:t,submoduleUrl:d}),u]}),c&&(0,i.jsx)(eu.l,{className:"pt-0",showDividers:!0,variant:"full",sx:{"> li":{borderRadius:0}},children:e.summary.map(e=>(0,i.jsx)(tz,{compareUrl:`${a}/compare/${s}...${l}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function tH({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(h.A,{inline:!0,href:t,children:e}):e," "]})}function tV(e){return e.slice(0,7)}function tK({commitOid:e="",contentsUrl:t,type:n}){let a="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[a," ",(0,i.jsx)(h.A,{inline:!0,href:`${t}/tree/${e}`,children:tV(e)})]}):(0,i.jsxs)(i.Fragment,{children:[a," ",tV(e)]})}function tq({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:a}){let r=n>0&&a?`${n} ${1===n?"file":"files"}`:`from ${tV(t)} to ${tV(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",a?(0,i.jsx)(h.A,{inline:!0,href:`${a}/compare/${t}...${e}`,children:r}):r]})}function tz({compareUrl:e,linesAdded:t,linesDeleted:n,path:r,pathDigest:l,status:s}){return(0,i.jsx)(eu.l.LinkItem,{href:`${e}#diff-${l}`,sx:{px:0,borderRadius:0,"&:hover .path, &:focus .path":{color:"accent.fg",textDecoration:"underline"}},children:(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row flex-items-center pl-3",style:{maxWidth:"500px"},children:[(0,i.jsx)(tB.E,{status:s}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:"path",children:r}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{style:{minWidth:"5ch",textAlign:"right"},children:t>0&&(0,i.jsxs)(a.C,{isAddition:!0,children:["+",tG(t)]})}),(0,i.jsx)("div",{style:{width:"5ch",textAlign:"left"},children:n>0&&(0,i.jsxs)(a.C,{isAddition:!1,children:["-",tG(n)]})})]})]})]})})}function tG(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{tU.displayName||(tU.displayName="SubmoduleDiff")}catch{}try{tH.displayName||(tH.displayName="SubmodulePath")}catch{}try{tK.displayName||(tK.displayName="SubmoduleCommitChange")}catch{}try{tq.displayName||(tq.displayName="SubmoduleModified")}catch{}try{tz.displayName||(tz.displayName="SubmoduleFileRow")}catch{}var tW=n(5796);let tQ=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:a,status:r})=>!!e&&!t&&!n&&!!i&&"DELETED"!==r&&"REMOVED"!==r&&!!a.id&&!!a.name&&!!a.ownerLogin,tX=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:a,pathDigest:r,repository:l})=>{let s=n&&e?(0,tW.IO9)({repo:l,commitish:n,action:"raw",path:a}):"";return{baseFile:tY({path:i?.path,oid:n,repository:l}),headFile:tY({path:t?.path,oid:e,repository:l}),id:`#diff-${r}`,type:"file-diff",url:s}},tY=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,tW.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,tJ=(0,r.memo)(tZ);function tZ({collapsed:e,commentingEnabled:t,commentingImplementation:n,currentUser:l,diffContext:s,diffLines:o,diffManuallyExpanded:c,diffMatches:u,diffSize:m,focusedSearchResult:h,helpUrl:f,isBinary:p,isSubmodule:g,isTooBig:x,leftSideContent:y,linesAdded:b,linesChanged:v,linesDeleted:C,markerNavigationImplementation:j,newTreeEntry:w,newCommitOid:N,objectId:S,oldTreeEntry:k,oldCommitOid:E,onOptionCollapseToggle:L,path:A,pathDigest:D,pullRequest:_,repository:R,richDiff:I,rightSideContent:T,hasExpandedAllRanges:F,expandAllContextLines:O,canExpandOrCollapseLines:M,status:$,submodule:P,truncatedReason:B,addInjectedContextLines:U}){let[H,V]=(0,r.useState)(I?.defaultToRichDiff),K=g&&!!P,[q,z]=(0,r.useState)(e),[G]=(0,r.useState)(c),W=function({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,newCommitOid:l,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,r.useMemo)(()=>{if(tQ({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,hasCopilotAccess:u}))return tX({newCommitOid:l,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:a})},[l,s,o,d,c,a,u,e,t,n,i])}({isBinary:p,isSubmodule:g,path:A,status:$,repository:R,newCommitOid:N,newTreeEntry:w,oldCommitOid:E,oldTreeEntry:k,pathDigest:D,hasCopilotAccess:l.hasCopilotAccess});(0,r.useEffect)(()=>{z(e)},[e]);let Q=async()=>{},X=(0,r.useMemo)(()=>({avatarUrl:l?.avatarURL??"",diffViewPreference:l?.splitPreference,isSiteAdmin:!1,login:l?.login??"",lineSpacingPreference:l?.lineSpacing,tabSizePreference:l?.tabSize??8,viewerCanComment:l?.canComment,viewerCanApplySuggestion:!1,commentsPreference:l?.commentsPreference}),[l]);return(0,i.jsxs)("div",{className:"position-relative",style:{contain:"layout"},children:[(0,i.jsx)("div",{className:tP.diffHeaderWrapper,children:(0,i.jsx)(a.B,{areLinesExpanded:F,canExpandOrCollapseLines:M,defaultToRichDiff:I?.defaultToRichDiff,fileLinkHref:`#diff-${D}`,isCollapsed:q,isBinary:p,size:m,canToggleRichDiff:I?.canToggleRichDiff,linesAdded:b,linesChanged:v,linesDeleted:C,newMode:w?.mode,newPath:w?.path,oldMode:k?.mode,oldPath:k?.path,patchStatus:$,path:A,onToggleExpandAllLines:O,onToggleFileCollapsed:t=>{t.altKey?L(!q):(e=!q,z(!q))},onToggleDiffDisplay:e=>V(e),additionalLeftSideContent:y,rightSideContent:T})}),q?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[K&&(0,i.jsx)(tU,{submodule:P}),H&&(0,i.jsx)(d,{loading:!1,proseDiffHtml:I?.proseDiffHtml,fileRendererInfo:I?.renderInfo,dependencyDiffPath:I?.dependencyDiffPath}),!K&&!H&&(0,i.jsx)(tM,{diffContext:s,copilotChatReference:W,searchResults:u,focusedSearchResult:h,diffEntryData:{diffLines:o,isBinary:p,isTooBig:x,linesChanged:v,newTreeEntry:w,newCommitOid:N,objectId:S,oldTreeEntry:k,oldCommitOid:E,path:A,pathDigest:D,status:$,truncatedReason:B},baseHelpUrl:f,commentBatchPending:!1,repositoryId:R.id.toString(),subject:_?.subject||{},subjectId:_?.globalRelayId||"",viewerData:X,newCommitOid:N,oldCommitOid:E,addInjectedContextLines:U,commentingEnabled:t||!1,commentingImplementation:n,markerNavigationImplementation:j,diffLinesManuallyUnhidden:G,onHandleLoadDiff:Q})]})]},`${D}_${o.length}`)}try{tJ.displayName||(tJ.displayName="Diff")}catch{}try{tZ.displayName||(tZ.displayName="DiffUnmemoized")}catch{}var t0=n(67138),t1=n(30729);let t2={defaultStyles:"DiffFind-module__defaultStyles--gxyWR"},t4=(0,r.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:a,focusedSearchResult:l,currentIndex:s,setCurrentIndex:o,setFocusedSearchResult:d,scrollDiffCellIntoView:c}){let u=(0,r.useRef)([]),m=(0,r.useRef)(0),h=()=>{a(""),d(void 0),e.current=0},f=(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,i.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===l?0:s+1,"/",m.current]}),!t&&(0,i.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:b.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,i.jsx)(W.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:b.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===l||""===l.pathDigest){e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});return}1===t?(o(s===m.current-1?0:s+1),l.indexWithinDigest===n.get(l.pathDigest).length-1?(e.current=e.current+1,e.current===u.current.length&&(e.current=0),l.pathDigest=u.current[e.current]??"",l.indexWithinDigest=0):l.indexWithinDigest=l.indexWithinDigest+1):(o(0===s?m.current-1:s-1),0===l.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=u.current.length-1),l.pathDigest=u.current[e.current]??"",l.indexWithinDigest=n.get(l.pathDigest).length-1):l.indexWithinDigest=l.indexWithinDigest-1),d(l)};return(0,r.useEffect)(()=>{u.current=Array.from(n.keys()),e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;m.current=t},[e,n,n.size,d]),(0,r.useEffect)(()=>{n.size>0&&void 0!==l&&c(l)},[n,l,s]),(0,i.jsxs)("div",{className:t2.defaultStyles,children:[(0,i.jsx)(er.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,i.jsx)(er.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,i.jsx)(t0.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:m.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,i.jsx)(t1.A,{icon:b.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:e=>{e.target.value?(a(e.target.value),o(0)):h()},block:!0,trailingAction:f})})]})});try{t4.displayName||(t4.displayName="DiffFind")}catch{}let t3=(0,r.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function t8({children:e,searchTerm:t,setSearchTerm:n}){let a=(0,r.useRef)(""),[l,s]=(0,r.useState)(!1),o=(0,r.useCallback)(e=>{e&&""===t&&""!==a.current?n(a.current):e||""===t||(a.current=t,n("")),s(e)},[t,n]),d=(0,r.useMemo)(()=>({diffFindOpen:l,setDiffFindOpen:o}),[l,o]);return(0,i.jsx)(t3.Provider,{value:d,children:e})}try{t3.displayName||(t3.displayName="DiffFindOpenContext")}catch{}try{t8.displayName||(t8.displayName="DiffFindOpenProvider")}catch{}var t6=n(73412),t5=n(93307);function t7({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,a={},r=e.reduce((n,i,r)=>{if(a[r])return n;a[r]=!0;let l=nt(t,[e[r]]),s=l.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[r]?.pathDigest??"",t),s=l.next()}return n},new Map);if(r.size<200&&i){let n=nt(t,e,r.size),i=n.next();for(;!i.done&&r.size<200;){let{resultsWithinDiff:t,diff:a}=i.value;r.set(e[a]?.pathDigest??"",t),i=n.next()}}return r}(n,ne(t),i):function(e,t){let n=new Map,i=nt(t,e),a=i.next();for(;!a.done&&n.size<200;){let{resultsWithinDiff:t,diff:r}=a.value;n.set(e[r]?.pathDigest??"",t),a=i.next()}return n}(n,ne(t)),query:t}}let t9={Text:"Text"};function ne(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{kind:t9.Text,regexp:RegExp(t,"gi")}}function*nt(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],a=[],r=0;for(let l=0;l<n.diffLines.length;l++){let s,o;s=t[i]?.diffLines[l]?.type==="HUNK"?n.diffLines[l]?.text:n.diffLines[l]?.text?.substring(1);let d=n.diffLines[l];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;a.push({pathDigest:n.pathDigest,indexWithinPathDigest:r,matchContent:e,column:t,diffLineNumIndex:l,isHunk:d?.type==="HUNK",hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:s}),r++}}0!==a.length&&(yield{diff:i,resultsWithinDiff:a})}}function nn(e,t,n,i){let[a,l]=(0,r.useState)(new Map),[s,o]=(0,r.useState)(void 0),[d,c]=(0,r.useState)(0),u=r.useRef();!u.current&&t&&(u.current=new t5.N(new t6.z(n,t7),200,e=>1!==e.query.length));let m=(0,r.useRef)(t);m.current=t;let h=(0,r.useRef)("");(0,r.useEffect)(()=>function(){u.current?.terminate()},[]);let f=(0,r.useRef)([]);return u.current&&e!==f.current&&(u.current.onResponse=e=>{e.query===m.current&&(l(e.matchingDiffs),h.current=m.current)},f.current=e),(0,r.useEffect)(()=>{if(!e||!u.current||!h.current||""===h.current){l(new Map),o(void 0);return}l(new Map),o(void 0),u.current.post({query:h.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,r.useEffect)(()=>{if(e&&u.current){if(""===t)l(new Map),o(void 0),c(0),h.current="";else{if(!(t.length>0&&t.length<=1e3))return;let n=h.current.length>0&&t.startsWith(h.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:n?a:void 0}),c(0)}}},[t,i]),{focusedSearchResult:s,setFocusedSearchResult:o,searchResults:a,currentIndex:d,setCurrentIndex:c}}},90189:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(67220),a=n(37109);function r({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:r}){let l=!!n,{startOrientation:s,endOrientation:o}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!r)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let d=h(s).findIndex(t=>(0,a.a2)(t,e.startLineNumber,e.startOrientation)),c=h(o).findIndex(t=>(0,a.a2)(t,e.endLineNumber,e.endOrientation)),u=d>=0&&c>=0;function m(e){if(!u||(0,a.Po)(e))return!1;let t=h((0,i.XU)(e.type)).indexOf(e);return t>=d&&t<=c}function h(e){return l&&"left"!==("string"==typeof e?e:(0,i.XU)(e.type))?n:t}let f=h("left").filter(e=>m(e)),p=h("right").filter(e=>m(e));return{isRowSelected:m,selectedRightLines:p,selectedLeftLines:f}}},29063:(e,t,n)=>{function i(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}function a(e,t){return`${"left"===t?"L":"R"}${e}`}function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function l(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function s(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function o(e){let t=i(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function d(e){!function(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}(c(e))}function c(e){let t=a(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=a(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}n.d(t,{Dd:()=>l,EW:()=>i,N0:()=>s,ZD:()=>o,i8:()=>d,j$:()=>c,pd:()=>r})},37109:(e,t,n)=>{n.d(t,{Ji:()=>h,Ls:()=>w,Mk:()=>p,On:()=>o,Po:()=>u,S4:()=>b,ZC:()=>g,_S:()=>f,a1:()=>j,a2:()=>s,j2:()=>x,oE:()=>v,pI:()=>y,qK:()=>m,qX:()=>d,u6:()=>c});var i=n(67220),a=n(96884),r=n(54332),l=n(29063);function s(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.XU)(e.type)===n&&e.right===t}function o(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,a=!1;for(let r of t)if(r&&(i||(i=s(r,e.startLineNumber,e.startOrientation)),a||(a=s(r,e.endLineNumber,e.endOrientation)),(n=a&&!i)||i&&a))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===r.V}function m(e){return!!e&&e!==r.V}function h(e){return"CONTEXT"===e.type}function f(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}function p(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.V);for(;n.length<t.length;)n.push(r.V)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function g(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:n}){let i;let{origin:a,pathname:r}=window.location;if(t?i=(0,l.j$)(t):e&&(i=function(e,t){let n=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),i=n?e.left:e.right,a=n?"left":"right";if(null!==i)return(0,l.j$)({diffAnchor:t,endLineNumber:i,endOrientation:a,startLineNumber:i,startOrientation:a,firstSelectedLineNumber:i,firstSelectedOrientation:a})}(e,n)),i)return`${a}${r}#${i}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,a.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,a.U0)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,a.U0)()?"\u21E7":"Shift + "}`),r+=i}function b({hasThreads:e}){return e?"80px":"24px"}function v({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,a.U0)()?"Command+":"Control+"),n&&(r+=(0,a.U0)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let C=["ADDITION","DELETION","CONTEXT"],j=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!u(e)&&C.includes(e.type)):!u(e)&&C.includes(e.type)},w=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=f(g(e.html),e.type);return t}).join("\n"):""},87592:(e,t,n)=>{n.d(t,{U:()=>l,l:()=>s});var i=n(96540),a=n(29063),r=n(47584);function l(){let[e,t]=(0,i.useState)(""),n=(0,i.useCallback)(()=>{t(((0,a.pd)(r.fV.hash??"")??"").replace("diff-",""))},[]);return(0,i.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}function s(){let[e,t]=(0,i.useState)(""),n=(0,i.useCallback)(()=>{let e=(0,a.EW)(r.fV.hash??"")??"";t((""===e?(0,a.pd)(r.fV.hash??"")??"":e?.[0]??"").replace("diff-",""))},[]);return(0,i.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}},45725:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(38568),a=n(96540);let r=e=>{let t=(0,a.useRef)(e);return(0,i.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,a.useCallback)((...e)=>t.current?.(...e),[])}},26335:(e,t,n)=>{n.d(t,{S:()=>c,n:()=>d});var i=n(96540),a=n(13253),r=n(37109),l=n(70404),s=n(45725),o=n(70283);function d(e){let t=(0,o.Lm)(e),n=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),i=n.every(e=>"DELETION"!==e.type),a=n?.map(e=>r._S(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:n.length>0&&!!i,showSuggestChangesButton:!1,sourceContentFromDiffLines:a,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,n){let{sendAnalyticsEvent:o}=(0,l.s)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,a.o)(),u=(0,s.K)(function(n,i){if(!e)return;let a=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:a,showSuggestChangesButton:a,sourceContentFromDiffLines:a?function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,r.Ls)(n);if(!t)return"";let[i]=(0,r._S)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{o("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:i}});return(0,i.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:n}),[c,u,n])}},54332:(e,t,n)=>{n.d(t,{V:()=>i});let i="empty-diff-line"},86617:(e,t,n)=>{n.d(t,{C0:()=>m,Pe:()=>c,Qn:()=>h,bJ:()=>u,in:()=>o,nZ:()=>d,sI:()=>s});var i=n(21728),a=n(41281),r=n(97286),l=n(46928);let s={Visible:"visible",Collapsed:"collapsed"},o={hideWhitespace:!1,splitPreference:"split",lineSpacing:"relaxed",commentsPreference:s.Visible};function d(){return[a.u.diffViewUserSettings]}function c(e){let t,n,a;let l=(0,i.c)(6);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=d(),l[0]=t):t=l[0];let s=t;return l[1]!==e?(n=async()=>e||o,l[1]=e,l[2]=n):n=l[2],l[3]!==e||l[4]!==n?(a={queryKey:s,queryFn:n,initialData:e,staleTime:1/0},l[3]=e,l[4]=n,l[5]=a):a=l[5],(0,r.I)(a)}function u(e,t){let n=new URL(window.location.href,window.location.origin);if(t){let i=encodeURIComponent(t);n.searchParams.set(e,i)}else n.searchParams.delete(e);window.history.replaceState({path:n.toString()},"",n.toString())}function m(e){let t;let n=(0,i.c)(2),a=e,[r]=(0,l.o)();n[0]!==r?(t=r.get("diff"),n[0]=r,n[1]=t):t=n[1];let s=t;return("split"===s||"unified"===s)&&(a=s),a}function h(e){let t=e,[n]=(0,l.o)(),i=n.get("w");return"1"===i?t=!0:"0"===i&&(t=!1),t}},79658:(e,t,n)=>{n.d(t,{s:()=>i});let i={Visible:"visible",Collapsed:"collapsed"}},87904:(e,t,n)=>{n.d(t,{Ee:()=>l,b4:()=>s,Ts:()=>r});let i=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"response",void 0),this.response=t,this.name="ResponseError"}};var a=n(84076);async function r(e,t,n){let r=new Request(t,n);r.headers.append("X-Requested-With","XMLHttpRequest");let l=await self.fetch(r);if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);return!function(e,t,n=!1){let a=t.headers.get("content-type")||"";if(!n&&!a.startsWith("text/html"))throw new i(`expected response with text/html, but was ${a}`,t);if(n&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new i(`expected response with text/html or application/json, but was ${a}`,t);let r=t.headers.get("x-html-safe");if(r){if(!e.includes(r))throw new i("response X-HTML-Safe nonce did not match",t)}else throw new i("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),l),(0,a.B)(e,await l.text())}function l(e,t,n=1e3,i=[200],a=[202]){return async function n(r){let l=new Request(e,t);l.headers.append("X-Requested-With","XMLHttpRequest");let s=await self.fetch(l);if(a.includes(s.status))return await new Promise(e=>setTimeout(e,r)),n(1.5*r);if(i.includes(s.status))return s;if(s.status<200||s.status>=300)throw Error(`HTTP ${s.status}${s.statusText||""}`);throw Error(`Unexpected ${s.status} response status from poll endpoint`)}(n)}async function s(e,t,n){let{wait:i=500,acceptedStatusCodes:a=[200],max:r=3,attempt:l=0}=n||{},o=async()=>new Promise((n,s)=>{setTimeout(async()=>{try{let i=new Request(e,t);i.headers.append("X-Requested-With","XMLHttpRequest");let s=await self.fetch(i);if(a.includes(s.status)||l+1===r)return n(s);n("retry")}catch(e){s(e)}},i*l)}),d=await o();return"retry"!==d?d:s(e,t,{wait:i,acceptedStatusCodes:a,max:r,attempt:l+1})}},91669:(e,t,n)=>{n.d(t,{k:()=>i});let i={confirmations:{deleteEditHistoryTitle:"Are you sure you want to delete this revision from the history?",deleteEditHistoryContent:"This edit\u2019s content will no longer be visible. This action can not be undone.",deleteEditHistoryConfirmButtonContent:"Remove"},editHistory:{viewingEditTitle:"Viewing edit",deleted:"Deleted",mostRecent:"Most recent",emptyEdit:"This revision does not contain any content.",deletedThisRevision:"deleted this revision",created:"created",edited:"edited",deleteRevisionAriaLabel:"Delete this edit revision",ariaLabel:"Open edits",openEditsButton:"Edits",editedBy:"edited by"}}},15819:(e,t,n)=>{n.d(t,{f:()=>r});let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MarkdownEditHistoryViewer_comment"},{args:null,kind:"FragmentSpread",name:"MarkdownLastEditedBy"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useMarkdownEditHistoryViewerQueryQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,i,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},i],storageKey:null},i],storageKey:null}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}]},params:{id:"d72649dd9392589f64dd4570b992b900",metadata:{},name:"useMarkdownEditHistoryViewerQueryQuery",operationKind:"query",text:null}}}();i.hash="2ce76c06d4f0c7fc93f5c5de49964950";var a=n(18312);function r({id:e}){let t=(0,a.useLazyLoadQuery)(i,{id:e});return t.node?t.node:null}},84076:(e,t,n)=>{n.d(t,{B:()=>i});function i(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},7922:(e,t,n)=>{n.d(t,{W:()=>r});let i=RegExp("^(?<startOid>[a-fA-F0-9]{7,40})\\.\\.(?<endOid>[a-fA-F0-9]{7,40})$"),a=/^[a-fA-F0-9]{7,40}$/;function r(e){let t=e.match(i),n=t?.groups?.startOid,r=t?.groups?.endOid;return t&&n&&r?{startOid:n,endOid:r}:a.test(e)?{singleCommitOid:e}:void 0}},46156:(e,t,n)=>{n.d(t,{$:()=>r});var i=n(70404),a=n(96540);function r(){let{sendAnalyticsEvent:e}=(0,i.s)();return{sendPullRequestAnalyticsEvent:(0,a.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}},65292:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(56366),a=n(69231);function r(e,t){let{basePageDataUrl:n}=(0,a.Yu)(),r=`${n}/page_data/${e}`;return t&&(r+=`?${t}`),(0,i.RD)(r)}},41281:(e,t,n)=>{n.d(t,{u:()=>i});let i={codeButton:"code_button",commits:"commits",diffstat:"diffstat",fileTree:"file_tree",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",markers:"markers",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_context_lines",abandonReview:"abandon_review",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",enableAutoMerge:"enable_auto_merge",dismissReview:"dismiss_review",markReadyForReview:"mark_ready_for_review",merge:"merge",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",runActionRequiredWorkflows:"run_action_required_workflows",submitReview:"submit_review",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference"}},16010:(e,t,n)=>{n.d(t,{G:()=>i});let i=n(82824).$h.create("pull-requests")},6331:(e,t,n)=>{var i=n(56413),a=n(88292),r=n(11394),l=n(21085),s=n(16010),o=n(74848),d=n(44639),c=n(47938),u=n(86365),m=n(70404),h=n(95017),f=n(12152),p=n(93653),g=n(65481),x=n(96540),y=n(56578),b=n(32845);let v="prx_commits.";function C(){return(0,o.jsx)(f.t,{critical:!0,fallback:(0,o.jsx)(l.M,{text:"Commits cannot be loaded"}),children:(0,o.jsx)(j,{})})}function j(e){let t=(0,u.B)();return(0,o.jsx)(w,{...t,...e})}function w({commitGroups:e,metadata:{deferredCommitsDataUrl:t},aliveChannel:n,pullRequest:i,repository:a,timeOutMessage:r,truncated:l,aliveChannelThrottleTimeout:s}){let{data:u,dataUpdatedAt:f}=(0,b.d)({commitGroups:e,repository:a,timeOutMessage:r,truncated:l});!function(e,t){let{refetch:n}=(0,b.d)();(0,y.og)(e,n,{git_updated:!0},t)}(n,s);let C=(0,h.d_)(t,0,i.commitsCount,f),{sendAnalyticsEvent:j}=(0,m.s)(),w={commitCount:i.commitsCount,prNumber:i.number};return(0,x.useEffect)(()=>{j(`${v}page_view`,"COMMITS_PAGE_VIEWED",w)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"sr-only",children:"Commits"}),(0,o.jsx)(p.O7.Content,{as:"div",width:"full",padding:"none",children:(0,o.jsxs)("div",{"data-testid":"commits-list","data-hpc":!0,children:[0===u.commitGroups.length&&(0,o.jsx)(c.M,{timeoutMessage:u.timeOutMessage}),u.commitGroups.length>0&&(0,o.jsxs)(o.Fragment,{children:[u.truncated&&(0,o.jsx)(g.A,{variant:"warning",className:"mb-3",children:"This pull request is big! We're only showing the most recent 250 commits"}),(0,o.jsx)(d.f,{commitGroups:u.commitGroups,deferredCommitData:C,repository:u.repository,loggingPrefix:v,loggingPayload:w})]})]})})]})}try{C.displayName||(C.displayName="CommitsEntrypoint")}catch{}try{j.displayName||(j.displayName="Commits")}catch{}try{w.displayName||(w.displayName="CommitsComponent")}catch{}var N=n(19327),S=n(90611);let k=s.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,S.Y)({queryDeps:({pathname:e})=>({pathname:e})})]});var E=n(49787),L=n(35337);function A(){let{data:{pullRequest:e,aliveChannel:t,repository:n}}=(0,E.xX)(L.j,"mainQuery"),{data:{metadata:i,commitGroups:a,timeOutMessage:r,truncated:l}}=(0,E.xX)(k,"mainQuery");return(0,o.jsx)(w,{aliveChannel:t,commitGroups:a,metadata:i,pullRequest:e,repository:n,timeOutMessage:r,truncated:l})}function D(){let{data:{metadata:e,pullRequest:t,bannersData:n,repository:i,urls:a,user:l,commitGroups:s,timeOutMessage:d,truncated:c,aliveChannel:u}}=(0,E.xX)(N.B,"mainQuery");return(0,o.jsx)(r.C,{aliveChannel:u,pullRequest:t,bannersData:n,repository:i,urls:a,user:l,children:(0,o.jsx)(w,{aliveChannel:u,commitGroups:s,metadata:e,pullRequest:t,repository:i,timeOutMessage:d,truncated:c})})}try{A.displayName||(A.displayName="CommitsEntrypointFuture")}catch{}try{D.displayName||(D.displayName="CommitsWithHeaderEntrypointFuture")}catch{}var _=n(17755),R=n(71727),I=n(47767);function T(){let{data:{pullRequest:e,bannersData:t,repository:n,urls:i,user:a,aliveChannel:l}}=(0,E.xX)(L.j,"mainQuery");return(0,o.jsx)(r.C,{aliveChannel:l,pullRequest:e,bannersData:t,repository:n,urls:i,user:a,children:(0,o.jsx)(I.sv,{})})}try{T.displayName||(T.displayName="LayoutEntrypoint")}catch{}(0,a.o)("pull-requests",()=>({App:r.q,routes:[(0,i.a)({path:R.b,Component:C}),(0,i.a)({path:R.y,Component:_.Wf})]}));let F=[N.B.toRoute({ErrorBoundary:l.M,Component:D})],O=[L.j.toRoute({ErrorBoundary:l.M,Component:T,children:[k.toRoute({Component:A})]})],M=s.G.createDataRouterAppFromRoutes(({isEnabled:e})=>e("react_data_router_pull_requests_layout")?O:F);(0,a.w)(M)},56578:(e,t,n)=>{n.d(t,{Zi:()=>o,og:()=>s});var i=n(99425),a=n(70170),r=n(45996),l=n(96540);function s(e,t,n,i){o(e,t,n,i)}function o(e,t,n,s){let o=(0,r.A)(),d=(0,l.useMemo)(()=>(0,a.n)(()=>{o()&&t()},s??2e3),[o,t,s]),c=(0,l.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(d,e.wait||0);else window.setTimeout(d,e.wait||0)},[d,n]);(0,i.x)(e,c)}},32845:(e,t,n)=>{n.d(t,{E:()=>d,d:()=>c});var i=n(65510),a=n(41281),r=n(65292),l=n(57572),s=n(69231),o=n(56366);function d(){let{basePageDataUrl:e}=(0,s.Yu)();return[a.u.commits,`basePageDataURL:${e}`]}function c(e){let t=(0,r.e)(a.u.commits),n=d();return(0,i.U)({queryKey:n,queryFn:async()=>{let e=await (0,l.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,o.Av)(n),n},initialData:e,staleTime:1/0})}},19327:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(16010),a=n(67615),r=n(90611),l=n(2963);let s=i.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,r.Y)({queryDeps:({pathname:e})=>({pathname:e})}),{queryName:"tabCounts",queryDeps:({params:e})=>({pathname:`/${e.owner}/${e.repo}/pull/${e.pr_number}/page_data/tab_counts`}),queryFn:async e=>(0,l.X)(e),type:a.g.Deferred}]})},35337:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(2963),a=n(16010),r=n(67615),l=n(90611);let s=a.G.createQueryRouteConfig("pullRequestsLayoutRoute",{path:"/:owner/:repo/pull/:pr_number",queries:[(0,l.Y)({queryDeps:({pathname:e})=>({pathname:e})}),{queryName:"tabCounts",queryDeps:({params:e})=>({pathname:`/${e.owner}/${e.repo}/pull/${e.pr_number}/page_data/tab_counts`}),queryFn:async e=>(0,i.X)(e),type:r.g.Deferred}]})},71727:(e,t,n)=>{n.d(t,{b:()=>i,y:()=>a});let i="/:owner/:repo/pull/:pr_number/commits",a="/:owner/:repo/pull/:pr_number/files"},86911:(e,t,n)=>{n.d(t,{Js:()=>a,fj:()=>r,qG:()=>i});let i={CONFUSED:"\u{1F615}",EYES:"\u{1F440}",HEART:"\u2764\uFE0F",HOORAY:"\u{1F389}",LAUGH:"\u{1F604}",THUMBS_DOWN:"\u{1F44E}",THUMBS_UP:"\u{1F44D}",ROCKET:"\u{1F680}"};function a(e,t){if(0===e.length||0===t)return"";let n=e.slice(0);if(1===n.length)return n[0];if(2===n.length)return n.join(" and ");t>e.length&&n.push(`${t-e.length} more`);let i=n.pop();return n.push(`${n.pop()} and ${i}`),n.join(", ")}function r(e,t,n,r){return 0===n.length||0===r?"":`${t?"React":"Unreact"} with ${i[e]} (${n.length} ${i[e]} reaction${1===n.length?"":"s"} so far, including ${a(n,r)})`}},99425:(e,t,n)=>{n.d(t,{x:()=>h});var i,a=n(96540),r=n(45996),l=n(15930),s=n(88853),o=n(74848),d=n(10204);let c=(0,a.createContext)(null),u=null;function m(e,t){let n=d.KK.parse(e);if(!n)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new d.m0),u.add({topic:n,subscriber:t}),{unsubscribe:()=>{u?.delete({topic:n,subscriber:t})}}}try{c.displayName||(c.displayName="AliveTestContext")}catch{}try{(i=function({children:e,initialMessages:t}){return(0,a.useEffect)(()=>{let e=[];if(t)for(let[n,i]of t){let t=window.setTimeout(()=>{(function(e,t){if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let n of Array.from(u.subscribers(e)))n(t)})(n,i)},0);e.push(t)}return()=>{for(let t of(u=null,e))window.clearTimeout(t)}}),(0,o.jsx)(c.Provider,{value:m,children:e})}).displayName||(i.displayName="AliveTestProvider")}catch{}function h(e,t){let n=(0,r.A)(),i=(0,a.useContext)(c);(0,a.useEffect)(()=>{let a=()=>{},r=!1;return async function(){if("function"==typeof i){let n=await i(e,t);n&&(a=n.unsubscribe);return}try{let i=await (0,l.H)();if(r)return;let o=(0,s.$)(i,e,t);o?.unsubscribe&&(n()?a=o.unsubscribe:o.unsubscribe())}catch(e){console.error(e)}}(),()=>{r=!0,a()}},[e,t,n,i])}},58206:(e,t,n)=>{n.d(t,{H:()=>a});var i=n(86365);function a(e,t){let{csrf_tokens:n}=(0,i.B)();return n?.[e]?.[t]}},28448:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(96540);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=i.useState(!1);return i.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},52916:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(96540);function a(e,t){for(let n in e)if(e[n]!==t[n])return!1;return!0}function r(e,t=a){let[n,l]=(0,i.useState)(!1),s=(0,i.useRef)(e),o=(0,i.useRef)(e),d=(0,i.useCallback)(()=>{let e=!t(s.current,o.current);e!==n&&l(e)},[t,n]);return[n,(0,i.useCallback)(e=>{o.current={...o.current,...e},d()},[d]),(0,i.useCallback)(e=>{s.current={...s.current,...e},d()},[d])]}},41720:(e,t,n)=>{n.d(t,{X:()=>a});var i=n(94232);function a(e){let t=e.join(","),[n]=(0,i.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},60658:(e,t,n)=>{n.d(t,{M:()=>o,s:()=>d});var i=n(80688),a=n(96540);let r=(0,i.A)("localStorage"),l="local-storage-update",s=class UseLocalStorageUpdateEvent extends Event{constructor(e,t){super(l),this.storageKey=e,this.storageValue=t}};function o(e,t){let n=(0,a.useRef)(t);(0,a.useEffect)(()=>{n.current=t});let[i,o]=(0,a.useState)(()=>{let t=r.getItem(e);return t?JSON.parse(t):n.current}),d=(0,a.useCallback)(t=>{o(t??n.current),void 0===t?r.removeItem(e):r.setItem(e,JSON.stringify(t)),document.dispatchEvent(new s(e,t))},[e]);return(0,a.useEffect)(()=>{function t(t){t.storageKey===e&&o(t.storageValue??n.current)}document.addEventListener(l,t);let i=r.getItem(e);return i?o(JSON.parse(i)):o(n.current),()=>{document.removeEventListener(l,t)}},[e]),[i,d]}function d(e){for(let t of e)r.removeItem(t),document.dispatchEvent(new s(t,void 0))}},88108:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(96540);function a(e){let[t,n]=(0,i.useState)(e),a=(0,i.useRef)(t);return a.current=t,[t,(0,i.useCallback)(e=>{e!==a.current&&n(e)},[])]}},73417:(e,t,n)=>{n.d(t,{B:()=>l});var i=n(73218),a=n(47584),r=n(96540);function l(e,t){if(!a.KJ)return[i.l,i.l,i.l];let n=(0,r.useMemo)(()=>new IntersectionObserver(e,t),[e,t]);return(0,r.useEffect)(()=>()=>n.disconnect(),[n]),[(0,r.useCallback)(e=>n.observe(e),[n]),(0,r.useCallback)(e=>n.unobserve(e),[n]),(0,r.useCallback)(()=>n.disconnect(),[n])]}},84492:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(96540);function a(){return(0,i.useSyncExternalStore)(s,r,l)}function r(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function l(){return!1}function s(){return()=>{}}},23536:(e,t,n)=>{n.d(t,{a:()=>l});var i=n(96540),a=n(73417);let r={position:"sticky",top:"-1px",zIndex:11,transition:"all 0.2s ease-in-out",backgroundColor:"canvas.default"};function l(e){let[t,n]=(0,i.useState)(!1),[l,s]=(0,i.useState)(!1),o={root:null,rootMargin:"0px",threshold:[0,1],...e},d=(0,i.useCallback)(e=>{let[t]=e;s(1>(t?.intersectionRatio||0)),n((t?.rootBounds?.height??0)>0)},[s]),[c,u]=(0,a.B)(d,o);return{isSticky:l,hasRoots:t,stickyStyles:r,observe:c,unobserve:u}}},42512:(e,t,n)=>{n.d(t,{n:()=>v});var i=n(74848),a=n(80688),r=n(55847),l=n(60499),s=n(96540),o=n(58749),d=n(95709),c=n(74182),u=n(56366),m=n(41281),h=n(65292),f=n(57572),p=n(65510),g=n(72618);let x={TabNav:"CodeDropdownButton-module__TabNav--qDYNs",NavItem:"CodeDropdownButton-module__NavItem--UJ0Gr"},y=(0,a.A)("localStorage"),b={Local:"local",Codespaces:"cloud",Copilot:"copilot"};function v(e){let{primary:t,size:n,showCodespacesTab:a,showCopilotTab:u,isEnterprise:m,localTab:h,codespacesTab:f,copilotTab:p,localTabProps:v,copilotTabProps:j,codespacesPath:w}=e,N="code-button-default-tab",[S,k]=(0,s.useState)(b.Local),E=(0,s.useCallback)(e=>{k(b.Codespaces),y.setItem(N,b.Codespaces),e?.preventDefault()},[]),L=(0,s.useCallback)(e=>{k(b.Local),y.setItem(N,b.Local),e?.preventDefault()},[]),A=(0,s.useCallback)(e=>{k(b.Copilot),y.setItem(N,b.Copilot),e?.preventDefault()},[]);(0,s.useEffect)(()=>{y.getItem(N)===b.Codespaces&&a&&E()},[]);let D=!m&&(a||u);return(0,i.jsxs)(g.T,{size:n,isPrimary:t,children:[D&&(0,i.jsxs)(l.A,{className:x.TabNav,children:[(0,i.jsx)(l.A.Link,{as:r.Q,selected:S===b.Local,onClick:L,className:x.NavItem,children:"Local"}),!m&&a&&(0,i.jsx)(l.A.Link,{as:r.Q,selected:S===b.Codespaces,onClick:E,className:x.NavItem,children:"Codespaces"}),u&&(0,i.jsx)(l.A.Link,{as:r.Q,selected:S===b.Copilot,onClick:A,className:x.NavItem,children:"Copilot"})]}),(0,i.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[S===b.Local&&(h||(v?(0,i.jsx)(c.F,{...v}):null)),S===b.Codespaces&&(f||(w?(0,i.jsx)(d.VO,{children:(0,i.jsx)(C,{codespacesPath:w})}):null)),S===b.Copilot&&(p||(j?(0,i.jsx)(o.K,{...j}):null))]})]})}function C(e){let t=function(e){let t=(0,h.e)(m.u.codeButton);return(0,p.U)({queryKey:[m.u.codeButton,t],queryFn:async()=>{let e=await (0,f.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,u.Av)(n),n},initialData:void 0,staleTime:1/0})}().data;return(0,i.jsx)(d.NF,{codespacesPath:e.codespacesPath,...t})}try{v.displayName||(v.displayName="CodeDropdownButton")}catch{}try{C.displayName||(C.displayName="SuspendedCodespacesTab")}catch{}},72618:(e,t,n)=>{n.d(t,{T:()=>c});var i=n(74848),a=n(46584),r=n(85349),l=n(55847),s=n(89323),o=n(96540),d=n(38621);let c=({isPrimary:e,children:t,size:n,onOpenChange:c})=>{let u=(0,a.u)("accessible_code_button"),[m,h]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{u&&c&&c(m)},[m,u]),u)?(0,i.jsx)(r.T,{align:"end",focusZoneSettings:{disabled:!0},open:m,onOpen:()=>h(!0),onClose:()=>h(!1),renderAnchor:t=>(0,i.jsx)(l.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(d.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,i.jsx)(d.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,i.jsxs)(s.W,{children:[(0,i.jsx)(s.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(d.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,i.jsx)(s.W.Overlay,{width:"auto",align:"end",children:t})]})};try{c.displayName||(c.displayName="CodeMenuButton")}catch{}},95709:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>f,wW:()=>x});var i=n(74848),a=n(44968),r=n(57572),l=n(34614),s=n(63867),o=n(96540),d=n(12152),c=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,i.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,i.jsx)(l.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function h({header:e,message:t}){return(0,i.jsxs)("div",{className:"blankslate",children:[(0,i.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,i.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function f({children:e}){return(0,i.jsx)("div",{className:"d-flex flex-justify-center",children:(0,i.jsx)(d.t,{fallback:(0,i.jsx)(h,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(s.A,{})}),children:e})})})}function p({codespacesPath:e}){let{data:t}=(0,c.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,r.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,i.jsx)(a.oG,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repositoryPolicyInfo:n,contactPath:a,currentUserIsEnterpriseManaged:r,enterpriseManagedBusinessName:s,newCodespacePath:o,codespacesPath:d,isLoggedIn:c}=e;if(!t){if(!c)return(0,i.jsx)(h,{header:"Sign in required",message:(0,i.jsxs)("span",{children:["Please"," ",(0,i.jsx)(l.A,{inline:!0,href:o,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)return n?.changesWouldBeSafe?(0,i.jsx)(h,{header:"Codespace access limited",message:m(a)}):(0,i.jsx)(h,{header:"Repository access limited",message:(0,i.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});{let e=null;return e=!n?.canBill&&r?(0,i.jsxs)("span",{children:[(0,i.jsx)(l.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${s||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,i.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,i.jsx)(l.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"}),"which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,i.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,i.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(a),(0,i.jsx)(h,{header:"Codespace access limited",message:e})}}return(0,i.jsx)(p,{codespacesPath:d})}function x(e){return(0,i.jsx)(f,{children:(0,i.jsx)(g,{...e})})}try{h.displayName||(h.displayName="ErrorMessage")}catch{}try{f.displayName||(f.displayName="CodespacesTabWrapper")}catch{}try{p.displayName||(p.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{x.displayName||(x.displayName="CodespacesTab")}catch{}},58749:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(80688),r=n(75177),l=n(51856),s=n(55847),o=n(96540);let d=(0,a.A)("localStorage");function c(e){let{repoOwner:t,repoName:n,refName:a,textPrompt:c}=e,u=`copilot-workspace-task:${t}/${n}`,m=(0,o.useCallback)(e=>{window.open(`https://copilot-workspace.githubnext.com/${t}/${n}?task=${encodeURIComponent(e)}&branch=${encodeURIComponent(a)}`,"_self")},[t,n,a]),[h,f]=(0,o.useState)(()=>d.getItem(u)||"");return(0,i.jsxs)(r.A,{as:"form",className:"p-3",sx:{display:"grid",gap:3},onSubmit:e=>{e.preventDefault(),d.removeItem(u),m(new FormData(e.currentTarget).get("task"))},children:[(0,i.jsx)(l.Ay,{name:"task","aria-label":"Task",placeholder:c||"Describe a task...",className:"width-full",resize:"vertical",value:h,onChange:e=>{f(e.target.value),d.setItem(u,e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),d.removeItem(u),m(e.currentTarget.value))}}),(0,i.jsx)(s.Q,{type:"submit",variant:"primary",className:"width-full",children:"Start task"})]})}try{c.displayName||(c.displayName="CopilotTab")}catch{}},74182:(e,t,n)=>{n.d(t,{F:()=>x,J:()=>b});var i=n(74848),a=n(96540),r=n(41720),l=n(46928),s=n(57572),o=n(34614),d=n(5420),c=n(65481),u=n(8338),m=n(75177),h=n(84217),f=n(42522),p=n(26514),g=n(38621);function x(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:h,sshUrl:p,sshCertificatesRequired:x,sshCertificatesAvailable:v,ghCliUrl:C,newSshKeyUrl:j,setProtocolPath:w}=e.protocolInfo,{defaultProtocol:N}=e.protocolInfo,[S,k]=(0,a.useState)(N),[E,L]=(0,a.useState)(""),{cloneUrl:A,visualStudioCloneUrl:D,showVisualStudioCloneButton:_,showXcodeCloneButton:R,xcodeCloneUrl:I,zipballUrl:T}=e.platformInfo,F=(0,r.X)(["windows","mac"]),O=(0,r.X)(["mac"]),M=(0,l.Z)(),$="mt-2 fgColor-muted text-normal",P=(0,a.useCallback)(e=>{if(S!==e){k(e);let t=new FormData;t.set("protocol_selector",e),(0,s.DI)(w,{method:"post",body:t})}},[S,k,w]),B=(0,a.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>P("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>P("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>P("gh_cli")}),e},[t,P,n]),U=(0,a.useMemo)(()=>{let e=[];return F&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:A,icon:g.DesktopDownloadIcon}),F&&_&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:D}),O&&R&&e.push({name:"xcode",text:"Open with Xcode",url:I}),e.push({name:"zip",text:"Download ZIP",url:T,icon:g.FileZipIcon}),e},[A,O,F,_,R,D,I,T]);return(0,i.jsx)("div",{children:"githubDesktop"===E?(0,i.jsx)(y,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===E?(0,i.jsx)(y,{platform:"Visual Studio"}):"xcode"===E?(0,i.jsx)(y,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(g.TerminalIcon,{className:"mr-2"}),(0,i.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,i.jsx)(f.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,i.jsx)(o.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,i.jsx)(g.QuestionIcon,{className:"mr-1"})})})]}),(0,i.jsx)(d.O,{sx:{border:"none",my:2,px:0,fontWeight:"bold"},"aria-label":"Remote URL selector",children:B.map(e=>(0,i.jsx)(d.O.Item,{"aria-current":S===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,i.jsx)("p",{className:$,children:"Clone using the web URL."})]}):"ssh"===S?(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsxs)(c.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,i.jsx)(o.A,{inline:!0,href:j,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,i.jsx)(b,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:p}),(0,i.jsx)("p",{className:$,children:x?"Use a password-protected SSH certificate.":v?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:C}),(0,i.jsxs)("p",{className:$,children:["Work fast with our official CLI."," ",(0,i.jsx)(o.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,i.jsx)(u.l,{variant:"inset",className:"border-top",children:U.map(e=>"zip"===e.name?(0,i.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name):(0,i.jsxs)(u.l.Item,{onSelect:t=>{L(e.name),t.preventDefault(),M(e.url)},children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function y({platform:e,href:t}){return(0,i.jsxs)(m.A,{className:"p-3",sx:{width:"400px"},children:[(0,i.jsx)(h.A,{as:"h4",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,i.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,i.jsx)(o.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function b({buttonAriaLabel:e="Copy url to clipboard",inputId:t,inputLabel:n,url:a}){return(0,i.jsxs)(m.A,{className:"d-flex mb-2",sx:{height:"32px"},children:[(0,i.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,i.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:a,readOnly:!0,style:{flexGrow:1}}),(0,i.jsx)(p.T,{className:"ml-1 mr-0",sx:{width:"32px"},textToCopy:a,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{x.displayName||(x.displayName="LocalTab")}catch{}try{y.displayName||(y.displayName="LaunchingPlatformContents")}catch{}try{b.displayName||(b.displayName="CloneUrl")}catch{}},38506:(e,t,n)=>{n.d(t,{P:()=>l});var i=n(74848),a=n(75177);let r={reason:"readonly-comment-box-module__reason--CzzUh"};function l({reason:e,icon:t,...n}){return(0,i.jsx)(a.A,{className:"blankslate",sx:{border:"1px solid",borderColor:"neutral.muted",borderRadius:2,backgroundColor:"canvas.default",boxShadow:"shadow.small"},...n,children:(0,i.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"fg.muted"},children:[t&&(0,i.jsx)(t,{size:24}),(0,i.jsx)("div",{className:r.reason,children:e})]})})}try{l.displayName||(l.displayName="ReadonlyCommentBox")}catch{}},81874:(e,t,n)=>{n.d(t,{v:()=>w});var i=n(74848),a=n(62456),r=n(5796),l=n(38621),s=n(52464),o=n(34614),d=n(89169),c=n(75177),u=n(96540),m=n(99582),h=n(14438),f=n(58924),p=n(8489),g=n(22896);let x={MEMBER:"Member",OWNER:"Owner",MANNEQUIN:"Mannequin",COLLABORATOR:"Collaborator",CONTRIBUTOR:"Contributor",FIRST_TIME_CONTRIBUTOR:"First-time contributor",FIRST_TIMER:"First-time GitHub contributor",NONE:""},y={MEMBER:({viewerDidAuthor:e,org:t})=>`${e?"You are":"This user is"} a member of the ${t} organization.`,OWNER:({viewerDidAuthor:e,repo:t})=>`${e?"You are":"This user is"} the owner of the ${t} repository.`,MANNEQUIN:()=>"This is a mannequin user.",COLLABORATOR:({viewerDidAuthor:e,repo:t})=>`${e?"You have":"This user has"} been invited to collaborate on the ${t} repository.`,CONTRIBUTOR:({viewerDidAuthor:e,repo:t})=>`${e?"You have":"This user has"} previously committed to the ${t} repository.`,FIRST_TIME_CONTRIBUTOR:({viewerDidAuthor:e,repo:t})=>`${e?"You are":"This user is"} a first-time contributor to the ${t} repository.`,FIRST_TIMER:({viewerDidAuthor:e})=>`${e?"This is your":"This user's"} first pull request on GitHub.`,NONE:()=>""},b=({association:e,org:t,repo:n,viewerDidAuthor:a})=>{let r=x[e]?e:"NONE";if("NONE"===r)return null;let l=y[r]({viewerDidAuthor:a??!1,org:t,repo:n});return(0,i.jsx)(g.C,{label:x[r],ariaLabel:l,testId:h.Y.commentAuthorAssociation,viewerDidAuthor:a})};try{b.displayName||(b.displayName="CommentAuthorAssociation")}catch{}let v=({viewerDidAuthor:e,subjectType:t})=>(0,i.jsx)(g.C,{viewerDidAuthor:e,ariaLabel:m.k.commentSubjectAuthor(e??!1,t??"comment"),label:m.k.commentAuthor,testId:h.Y.commentSubjectAuthor});try{v.displayName||(v.displayName="CommentSubjectAuthor")}catch{}var C=n(81223);let j=({createdAt:e,owner:t,viewerDidAuthor:n})=>{let a=new Date(e),r=a.toLocaleString("default",{month:"long"}),l=m.k.sponsor(t,`${r} ${a.getFullYear()}`);return(0,i.jsx)(g.C,{label:m.k.sponsorBadge,ariaLabel:l,testId:h.Y.sponsorLabel,viewerDidAuthor:n})};try{j.displayName||(j.displayName="SponsorsBadge")}catch{}function w({actions:e,comment:t,commentAuthorLogin:n,isMinimized:a=!1,avatarUrl:x,lastEditedByMessage:y,editHistoryComponent:w,additionalHeaderMessage:S,sx:k,viewerDidAuthor:E=!1,userAvatar:L=(0,i.jsx)(N,{avatarUrl:x,login:n,isHidden:!!t.pendingMinimizeReason||t.isHidden}),commentSubjectAuthorLogin:A,commentSubjectType:D,isReply:_=!1,headingProps:{as:R,...I}={as:"h3"},commentAuthorType:T,id:F,forceInlineAvatar:O,containerStyle:M,threadCommentCount:$,commentBody:P,isInDialogMode:B=!1}){let U=M||_?{}:{backgroundColor:E?"accent.subtle":"canvas.subtle",borderTopLeftRadius:"6px",borderTopRightRadius:"6px",borderBottom:"1px solid",borderColor:E?"accent.muted":"border.default",borderBottomWidth:a?0:1,py:O?[1,1,2,2]:1,pr:1,pl:3,...k},H=t.pendingMinimizeReason??t.minimizedReason,V=!!H||t.isHidden,K=new Date(t.createdAt),q=(0,i.jsxs)(i.Fragment,{children:[S&&(0,i.jsx)(s.A,{sx:{color:"fg.muted",overflow:"hidden",textOverflow:"ellipsis"},children:S}),(0,i.jsxs)(s.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",color:"fg.muted"},children:[(0,i.jsx)(o.A,{href:t.url,sx:{color:"inherit"},children:(0,i.jsxs)(d.A,{date:K,children:["on ",K.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})}),t.createdViaEmail&&(0,i.jsx)("span",{children:` ${m.k.sentViaEmail}`})]}),V&&(0,i.jsxs)(s.A,{sx:{color:"fg.muted"},children:[" ","\xb7"," ",H?(0,i.jsxs)("span",{children:[m.k.hiddenCommentWithReason," ",H.replace(/_/g,"-").toLowerCase()]}):(0,i.jsx)("span",{children:m.k.hiddenComment})]}),y&&!V&&(0,i.jsx)(u.Suspense,{children:y})]});return(0,i.jsx)(c.A,{id:F,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",...U},"data-testid":h.Y.commentHeader,children:(0,i.jsxs)(c.A,{className:f.A.activityHeader,sx:{width:"100%",minWidth:0,minHeight:"var(--control-small-size, 28px)",justifyContent:"space-between",alignItems:"stretch",paddingBottom:y||O?0:"var(--base-size-6, 6px)"},children:[(0,i.jsx)(R,{...I,className:"sr-only",children:B?(0,i.jsxs)(i.Fragment,{children:[n,". $",P,". Written at"," ",(0,i.jsxs)(d.A,{date:K,children:[K.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," "]}),". Has $",$," replies. To view replies use ",(0,i.jsx)("kbd",{children:"\u2192"}),"."]}):(0,i.jsxs)(i.Fragment,{children:[n," commented"," ",(0,i.jsxs)(d.A,{date:K,children:["on ",K.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," "]})]})}),(0,i.jsx)(c.A,{className:O?"":p.A.avatarInner,sx:{placeSelf:"center",gridArea:"avatar",display:O?"flex":["flex","flex","none","none"],marginRight:2},children:L}),(0,i.jsxs)(c.A,{className:f.A.narrowViewportWrapper,"data-testid":h.Y.commentHeaderLeftSideItems,sx:{minWidth:0,gridColumnStart:"title",gridColumnEnd:"badges",flexWrap:"wrap",alignItems:"center",flexShrink:1,flexBasis:"auto",columnGap:"0.45ch",paddingTop:1,paddingBottom:1},children:[(0,i.jsx)(c.A,{sx:{gridArea:"title",marginTop:0,alignItems:"center",display:"flex",flexShrink:1,flexBasis:"auto",overflow:"hidden"},children:(0,i.jsx)(o.A,{"data-testid":h.Y.avatarLink,href:`/${"Bot"===T?"apps/":""}${n}`,"data-hovercard-url":(0,r.dCN)({owner:n}),sx:{fontSize:1,color:V?"fg.muted":"fg.default",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",alignSelf:"flex-end"},children:n})}),(0,i.jsx)(c.A,{className:f.A.footer,sx:{gridArea:"footer",lineHeight:"1.4"},children:q})]}),(0,i.jsxs)(c.A,{"data-testid":h.Y.commentHeaderRightSideItems,className:f.A.narrowViewportWrapper,sx:{whiteSpace:"nowrap",gridArea:"actions",columnGap:"var(--base-size-4, 4px)",justifyContent:"flex-end",flexShrink:2,flexGrow:1,alignItems:"flex-start"},children:[w&&(0,i.jsx)(c.A,{sx:{gridArea:"edits",display:"flex",justifyContent:"flex-end",overflow:"hidden",flexGrow:1,alignItems:["flex-start","center","center","center"],ml:2},children:w}),(0,i.jsxs)(c.A,{sx:{gridColumnStart:"badges",gridColumnEnd:"actions",display:"flex",columnGap:"var(--base-size-4, 4px)",alignItems:"center",justifyContent:"flex-end",minHeight:"var(--base-size-28, 28px)"},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",columnGap:"var(--base-size-8, 8px)",ml:1},children:["PENDING"===t.state&&(0,i.jsx)(g.C,{leadingElement:(0,i.jsx)(l.DotFillIcon,{}),label:"Pending",ariaLabel:"This review comment is pending",testId:"pending-badge",variant:"attention",sx:{mr:1}}),!V&&!a&&t.authorToRepoOwnerSponsorship&&t.authorToRepoOwnerSponsorship.isActive&&(0,i.jsx)(j,{createdAt:t.authorToRepoOwnerSponsorship.createdAt,owner:t.repository.owner.login,viewerDidAuthor:E}),!V&&!a&&t.showSpammyBadge&&(0,i.jsx)(C.b,{}),!t.repository.isPrivate&&!V&&!a&&(0,i.jsx)(b,{association:t.authorAssociation,viewerDidAuthor:E,org:t.repository.owner.login,repo:t.repository.name}),n===A&&(0,i.jsx)(v,{viewerDidAuthor:E,subjectType:D})]}),(0,i.jsx)(c.A,{sx:{display:"flex",columnGap:"var(--base-size-4, 4px)"},children:e})]})]})]})})}function N({avatarUrl:e,login:t,isHidden:n}){return(0,i.jsx)(o.A,{href:`/${t}`,className:p.A.avatarLink,"data-hovercard-url":(0,r.dCN)({owner:t}),"aria-label":`@${t}'s profile`,children:(0,i.jsx)(a.r,{src:e,alt:`@${t}`,size:24,className:n?p.A.hiddenActivityAvatar:p.A.activityAvatar})})}try{w.displayName||(w.displayName="ActivityHeader")}catch{}try{N.displayName||(N.displayName="DefaultAvatar")}catch{}},77433:(e,t,n)=>{n.d(t,{p:()=>b});var i=n(74848),a=n(56176),r=n(3541),l=n(90628),s=n(47584),o=n(38621),d=n(87330),c=n(89323),u=n(8338),m=n(96540),h=n(14438),f=n(86856),p=n(20075),g=n(34517),x=n(32941),y=n(81962);function b({comment:e,commentAuthorLogin:t,editComment:n,onReplySelect:b,isMinimized:v=!1,navigate:C,onMinimize:j,hideComment:w,unhideComment:N,deleteComment:S,commentRef:k}){let[E,L]=(0,m.useState)(!1),[A,D]=(0,m.useState)(null),[_,R]=(0,m.useState)(!1),[I,T]=(0,m.useState)(!1),[F,O]=(0,m.useState)(!1),[M,$]=(0,m.useState)(!1),P=(0,m.useCallback)(n=>`${n.replace(/^(?!>)/gm,"> ")} 

 _Originally posted by @${t} in [${e.referenceText}](${e.url})_`,[e.referenceText,t,e.url]),B=()=>{navigator.clipboard.writeText(e.url)},U=!!e.pendingMinimizeReason||e.isHidden,H=(0,m.useMemo)(()=>U&&!v&&e.viewerCanSeeMinimizeButton?(0,i.jsx)(d.K,{sx:{color:"fg.muted"},"aria-label":"hide comment",variant:"invisible",onClick:()=>j?.(!0),icon:o.FoldIcon,size:"small"}):null,[U,v,j,e.viewerCanSeeMinimizeButton]),V=(0,m.useMemo)(()=>U&&v&&e.viewerCanSeeUnminimizeButton?(0,i.jsx)(d.K,{sx:{color:"fg.muted"},"aria-label":"show comment",variant:"invisible",onClick:()=>j?.(!1),icon:o.UnfoldIcon,size:"small"}):null,[U,v,j,e.viewerCanSeeUnminimizeButton]),K=(0,m.useMemo)(()=>{if(!e.author)return;let n=s.cg?.location.origin;if(!n)return;let i=`content_url=${encodeURIComponent(e.url)}&report=${t}+(user)`;return`${n}/contact/report-content?${i}`},[t,e.author,e.url]),q=(e.viewerCanReport||e.viewerCanReportToMaintainer)&&e.author,z=function(e){let t=e.length>120?`${e.slice(0,120)}... (truncated)`:e;return`Comment actions for comment: "${t}"`}(e.body),G=function(e){let{viewerCanBlockFromOrg:t,pendingBlock:n,hasAuthor:i,pendingUnblock:a}=e;return!!i&&!n&&(!!a||t)}({viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,pendingBlock:!!e.pendingBlock,pendingUnblock:!!e.pendingUnblock,hasAuthor:!!e.author}),W=function(e){let{viewerCanUnblockFromOrg:t,pendingBlock:n,hasAuthor:i,pendingUnblock:a}=e;return!!i&&!a&&(!!n||t)}({viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,pendingBlock:!!e.pendingBlock,pendingUnblock:!!e.pendingUnblock,hasAuthor:!!e.author}),Q={isCreateDialogOpen:_,setIsCreateDialogOpen:R,navigate:C,optionConfig:{storageKeyPrefix:e.id,defaultDisplayMode:l.q.IssueCreation,scopedOrganization:e.repository.owner.login,issueCreateArguments:{initialValues:{body:P(e.body)},repository:{name:e.repository.name,owner:e.repository.owner.login}}}};return(0,i.jsxs)(i.Fragment,{children:[_&&(0,i.jsx)(r.or,{...Q}),I&&(0,i.jsx)(x._,{owner:e.repository.owner.login,ownerUrl:e.repository.owner.url,reportUrl:K,contentId:e.id,onClose:()=>T(!1),contentType:"comment"}),F&&e.author&&(0,i.jsx)(p.r,{onClose:()=>O(!1),organization:e.repository.owner,contentId:e.id,contentAuthor:e.author,contentUrl:e.url}),M&&e.author&&(0,i.jsx)(y.o,{onClose:()=>$(!1),organization:e.repository.owner,contentAuthor:e.author,contentId:e.id}),H,V,(0,i.jsxs)(c.W,{open:E,onOpenChange:e=>{if(e){let e=window.getSelection();e&&e.anchorNode?D({anchorNode:e.anchorNode,range:e.getRangeAt(0)}):D(null)}L(e)},children:[(0,i.jsx)(c.W.Anchor,{"data-testid":h.Y.commentHeaderHamburger,children:(0,i.jsx)(d.K,{unsafeDisableTooltip:!0,size:"small",icon:o.KebabHorizontalIcon,variant:"invisible","aria-label":z,sx:{color:"fg.muted"}})}),(0,i.jsx)(c.W.Overlay,{children:(0,i.jsxs)(u.l,{"data-testid":h.Y.commentHeaderHamburgerOpen,children:[(0,i.jsxs)(u.l.Item,{onSelect:()=>B(),children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.LinkIcon,{})}),"Copy link"]}),(0,a.M3)()&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.l.Item,{onSelect:()=>{b((0,f.E)(k?.current,A,e.body))},children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.QuoteIcon,{})}),"Quote reply"]}),(0,i.jsx)(u.l.Divider,{}),(0,i.jsxs)(u.l.Item,{"data-testid":h.Y.commentMenuRefComment,sx:{width:"max-content"},onSelect:()=>R(!0),children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.IssueOpenedIcon,{})}),"Reference in a new issue"]})]}),(e.viewerCanUpdate||e.viewerCanMinimize||e.viewerCanDelete)&&(0,i.jsx)(u.l.Divider,{}),e.viewerCanUpdate&&(0,i.jsxs)(u.l.Item,{onSelect:()=>n(),children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.PencilIcon,{})}),"Edit"]}),e.viewerCanMinimize&&!U&&(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsxs)(u.l.Item,{children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.EyeClosedIcon,{})}),"Hide"]})}),(0,i.jsx)(c.W.Overlay,{children:(0,i.jsx)(u.l,{children:(0,i.jsx)(g.w,{onSelect:w,setMenuOpen:L})})})]}),e.viewerCanMinimize&&U&&(0,i.jsxs)(u.l.Item,{onSelect:N,children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.EyeIcon,{})})," ","Unhide"]}),e.viewerCanDelete&&(0,i.jsxs)(u.l.Item,{variant:"danger",onSelect:S,children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.TrashIcon,{})}),"Delete"]}),q&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.l.Divider,{}),e.viewerCanReportToMaintainer?(0,i.jsxs)(u.l.Item,{onSelect:()=>{T(!0)},children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.ReportIcon,{})}),"Report content"]}):(0,i.jsxs)(u.l.LinkItem,{href:K,target:"_blank",children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.ReportIcon,{})}),"Report content"]})]}),(G||W)&&!q&&(0,i.jsx)(u.l.Divider,{}),G&&(0,i.jsxs)(u.l.Item,{onSelect:()=>O(!0),children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.BlockedIcon,{})}),"Block user"]}),W&&(0,i.jsxs)(u.l.Item,{onSelect:()=>$(!0),children:[(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(o.BlockedIcon,{})}),"Unblock user"]})]})})]})]})}try{b.displayName||(b.displayName="CommentActions")}catch{}},22896:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(74848),a=n(2668),r=n(47139),l=n(96540);let s=({label:e,ariaLabel:t,testId:n,viewerDidAuthor:s,variant:o,leadingElement:d})=>{let c=l.useRef(null),[u,m]=(0,a.B)({contentRef:c,"aria-label":t});return(0,i.jsxs)(r.A,{variant:o||"secondary","data-testid":n,"aria-label":t,ref:c,sx:s?{borderColor:"accent.muted"}:{},...u,children:[d,e,m]})};try{s.displayName||(s.displayName="CommentHeaderBadge")}catch{}},88771:(e,t,n)=>{n.d(t,{z:()=>r});var i=n(74848),a=n(75177);let r=({onClick:e,id:t,children:n})=>(0,i.jsx)(a.A,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{r.displayName||(r.displayName="CompactCommentButton")}catch{}},81223:(e,t,n)=>{n.d(t,{b:()=>s});var i=n(74848),a=n(99582),r=n(14438),l=n(22896);let s=()=>(0,i.jsx)(l.C,{variant:"danger",ariaLabel:a.k.spammyBadgeTooltip,label:a.k.spammyBadge,testId:r.Y.spammyLabel});try{s.displayName||(s.displayName="SpammyBadge")}catch{}},20075:(e,t,n)=>{n.d(t,{r:()=>v});var i=n(74848),a=n(73218),r=n(16255),l=n(75177),s=n(89323),o=n(8338),d=n(73451),c=n(65607),u=n(52464),m=n(55847),h=n(91246),f=n(96540),p=n(18312),g=n(69487);let x=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"BlockUserFromOrganizationPayload",kind:"LinkedField",name:"blockUserFromOrganization",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"clientMutationId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"blockUserFromOrganizationMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"blockUserFromOrganizationMutation",selections:t},params:{id:"cc2dfdd4807633d71341d55e85bdcec5",metadata:{},name:"blockUserFromOrganizationMutation",operationKind:"mutation",text:null}}}();x.hash="1cc6b979024f82ac249a77676892c1f0";var y=n(34517);let b={ONE_DAY:"For 1 day",THREE_DAYS:"For 3 days",SEVEN_DAYS:"For 7 days",THIRTY_DAYS:"For 30 days",INDEFINITE:"Until I unblock them"},v=({onClose:e,...t})=>{let[n,a]=(0,f.useState)("INDEFINITE"),[m,p]=(0,f.useState)(!0),[g,x]=(0,f.useState)(!1),[v,N]=(0,f.useState)(void 0),S=t.contentAuthor.login;return(0,i.jsx)(r.Z,{children:(0,i.jsx)(h.l,{renderHeader:()=>(0,i.jsx)(j,{onClose:e,...t}),renderFooter:()=>(0,i.jsx)(w,{onClose:e,...t,notifyBlockedUser:m,hideComment:g,duration:n,hiddenReason:v}),sx:{width:"100%",margin:4,maxWidth:"640px",maxHeight:"clamp(315px, 80vh, 800px)"},width:"xlarge",height:"auto",onClose:e,children:(0,i.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:2},children:[(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:"row"},children:(0,i.jsx)("div",{children:(0,i.jsxs)("span",{children:["Blocking a user prevents them from interacting with repositories of this organization, such as opening or commenting on pull requests or issues. Learn more about"," ",(0,i.jsx)("a",{href:"https://docs.github.com/communities/maintaining-your-safety-on-github/blocking-a-user-from-your-organization",children:"blocking a user."})]})})}),(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:"row"},children:(0,i.jsxs)(s.W,{children:[(0,i.jsxs)(s.W.Button,{children:["Block a user: ",b[n]]}),(0,i.jsx)(s.W.Overlay,{children:(0,i.jsx)(o.l,{selectionVariant:"single",children:(0,i.jsxs)(o.l.Group,{children:[(0,i.jsx)(o.l.GroupHeading,{children:"Block options"}),Object.keys(b).map(e=>(0,i.jsx)(o.l.Item,{onSelect:()=>{a(e)},selected:e===n,children:b[e]},e))]})})})]})}),(0,i.jsx)(C,{}),(0,i.jsx)("h4",{children:"More options"}),(0,i.jsxs)(d.A,{sx:{mt:1},children:[(0,i.jsx)(c.A,{checked:m,onChange:()=>p(!m),"aria-checked":m}),(0,i.jsx)(d.A.Label,{children:"Send user a notification and show activity in timeline"}),(0,i.jsx)(d.A.Caption,{children:(0,i.jsxs)(u.A,{sx:{color:"fg.subtle",fontSize:12},children:["You can notify ",(0,i.jsx)("b",{children:S})," as to why they're being blocked. A public timeline entry will show that this user was blocked. They will receive an email notification and a notice when they try to comment with the following message:",(0,i.jsx)(l.A,{sx:{mt:1,ml:2},children:(0,i.jsxs)("blockquote",{children:["A maintainer of the @",t.organization.login," organization has blocked you because of"," ",(0,i.jsx)("a",{href:t.contentUrl,children:"this content"}),". For more information please see"," ",(0,i.jsx)("a",{href:"https://docs.github.com/site-policy/github-terms/github-community-guidelines",children:"the community guidelines"}),"."]})})]})})]}),(0,i.jsxs)(d.A,{children:[(0,i.jsx)(c.A,{checked:g,onChange:()=>x(!g),"aria-checked":g}),(0,i.jsx)(d.A.Label,{children:"Hide this user's comments"}),(0,i.jsx)(d.A.Caption,{children:(0,i.jsxs)(u.A,{sx:{color:"fg.subtle",fontSize:12},children:["All of their comments in this organization"," ",(0,i.jsx)("a",{href:"https://docs.github.com/communities/moderating-comments-and-conversations/managing-disruptive-comments#hiding-a-comment",children:"will be hidden"})," ","to all users and will display a reason."]})})]}),(0,i.jsx)(l.A,{sx:{ml:4},children:(0,i.jsxs)(s.W,{children:[(0,i.jsx)(s.W.Button,{children:(v&&y.n[v])??"Choose a reason"}),(0,i.jsx)(s.W.Overlay,{children:(0,i.jsx)(o.l,{selectionVariant:"single",children:(0,i.jsx)(y.w,{onSelect:N})})})]})})]})})})},C=()=>(0,i.jsx)(l.A,{sx:{height:"1px",backgroundColor:"fg.subtle",margin:"8px 0"}}),j=({contentAuthor:e,organization:t,onClose:n})=>(0,i.jsx)(h.l.Header,{children:(0,i.jsxs)(l.A,{sx:{display:"flex"},children:[(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,px:2,py:"6px"},children:(0,i.jsxs)(h.l.Title,{children:["Block ",e.login," from ",t.login]})}),(0,i.jsx)(h.l.CloseButton,{onClose:n})]})}),w=({organization:e,contentAuthor:t,contentId:n,notifyBlockedUser:r,hideComment:l,duration:s,hiddenReason:o,onClose:d})=>{let c=(0,p.useRelayEnvironment)(),u=(0,f.useCallback)(()=>{!function({environment:e,input:{organizationId:t,blockedUserId:n,duration:i,notifyBlockedUser:a,hiddenReason:r,contentId:l},onError:s,onCompleted:o}){let d={organizationId:t,blockedUserId:n,duration:i,notifyBlockedUser:a,contentId:l};r&&(d={...d,hiddenReason:r}),(0,p.commitMutation)(e,{mutation:x,variables:{input:d},onError:e=>s&&s(e),onCompleted:()=>{o?.()}})}({environment:c,input:{organizationId:e.id,contentId:n,blockedUserId:t.id,duration:s,hiddenReason:l&&o?o:void 0,notifyBlockedUser:r},onError:a.l,onCompleted:()=>(0,g.commitLocalUpdate)(c,e=>{let t=e.get(n);t?.setValue(!1,"pendingUnblock"),t?.setValue(!0,"pendingBlock"),o&&t?.setValue(o,"pendingMinimizeReason")})}),d()},[c,e.id,n,t.id,s,l,o,r,d]);return(0,i.jsx)(h.l.Footer,{children:(0,i.jsx)(m.Q,{sx:{width:"100%"},variant:"danger",disabled:l&&!o,onClick:u,children:"Block user from organization"})})};try{v.displayName||(v.displayName="BlockUserFromOrgDialog")}catch{}try{C.displayName||(C.displayName="DialogDivider")}catch{}try{j.displayName||(j.displayName="BlockUserFromOrgDialogHeader")}catch{}try{w.displayName||(w.displayName="BlockUserFromOrgDialogFooter")}catch{}},34517:(e,t,n)=>{n.d(t,{n:()=>r,w:()=>l});var i=n(74848),a=n(8338);let r={SPAM:"Spam",ABUSE:"Abuse",OFF_TOPIC:"Off-topic",OUTDATED:"Outdated",DUPLICATE:"Duplicate",RESOLVED:"Resolved"},l=({setMenuOpen:e,onSelect:t})=>(0,i.jsx)(i.Fragment,{children:Object.keys(r).map(n=>(0,i.jsx)(a.l.Item,{"aria-label":`Hide comment as ${r[n]}`,onSelect:()=>{t(n),e?.(!1)},children:r[n]},n))});try{l.displayName||(l.displayName="HideCommentActionItems")}catch{}},32941:(e,t,n)=>{n.d(t,{_:()=>b});var i=n(74848),a=n(67136),r=n(75177),l=n(34614),s=n(89323),o=n(8338),d=n(55847),c=n(16255),u=n(89015),m=n(73451),h=n(15198),f=n(91246),p=n(96540),g=n(18312);let x=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"SubmitAbuseReportPayload",kind:"LinkedField",name:"submitAbuseReport",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"clientMutationId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"submitAbuseReportMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"submitAbuseReportMutation",selections:t},params:{id:"0603fe0f6dabc68adea31e484c57deb7",metadata:{},name:"submitAbuseReportMutation",operationKind:"mutation",text:null}}}();x.hash="8b252221b8eab001809aa2a2d583cb84";let y={RadioGroup_Label:"ReportContentDialog-module__RadioGroup_Label--IfGFf"},b=({owner:e,ownerUrl:t,reportUrl:n,contentId:b,onClose:v,contentType:C="content"})=>{let j=(0,g.useRelayEnvironment)(),{addToast:w}=(0,a.Y6)(),[N,S]=(0,p.useState)("Choose a reason"),[k,E]=(0,p.useState)(!1),[L,A]=(0,p.useState)("admins"),D=(0,p.useCallback)(()=>{E(!0),function({environment:e,input:{reportedContentId:t,reason:n},onError:i,onCompleted:a}){(0,g.commitMutation)(e,{mutation:x,variables:{input:{reportedContent:t,reason:n}},onError:e=>i&&i(e),onCompleted:()=>a&&a()})}({environment:j,input:{reportedContentId:b,reason:"Choose a reason"===N?"UNSPECIFIED":N},onError(e){w({type:"error",message:`Unable to submit report: ${e}`}),E(!1)},onCompleted(){w({type:"success",message:"Report submitted"}),E(!1),v()}})},[w,b,j,v,N]),_=(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:[(0,i.jsxs)("span",{children:["This ",C," violates "]}),(0,i.jsx)(l.A,{href:t,children:`@${e}'s `}),(0,i.jsx)("span",{children:"Code of Conduct and should be submitted to the maintainers of this repository for review."})]}),(0,i.jsx)("p",{children:"This report, as well as your username as the reporter, will be viewable by all admins of this repository."}),(0,i.jsxs)("p",{children:["Choose a reason for reporting this ",C]})]}),(0,i.jsx)(r.A,{sx:{marginTop:"8px",marginBottom:"16px"},children:(0,i.jsxs)(s.W,{children:[(0,i.jsx)(s.W.Button,{children:N}),(0,i.jsx)(s.W.Overlay,{children:(0,i.jsxs)(o.l,{children:[(0,i.jsx)(o.l.Item,{onSelect:()=>S("ABUSE"),children:"Abuse"}),(0,i.jsx)(o.l.Item,{onSelect:()=>S("SPAM"),children:"Spam"}),(0,i.jsx)(o.l.Item,{onSelect:()=>S("OFF_TOPIC"),children:"Off Topic"})]})})]})}),(0,i.jsxs)(r.A,{sx:{marginTop:"8px"},children:[(0,i.jsxs)(r.A,{sx:{fontSize:"12px",color:"fg.muted"},children:[(0,i.jsx)("span",{children:"Learn more about "}),(0,i.jsx)(l.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"requesting that maintainers moderate content."})]}),(0,i.jsx)(d.Q,{sx:{marginTop:"30px",width:"100%"},variant:"danger",onClick:()=>D(),disabled:k,children:"Report to repository admins"})]})]}),R=(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("span",{children:"Contact GitHub Support about this user's spammy or abusive behavior."}),(0,i.jsxs)(r.A,{sx:{marginTop:"12px"},children:[(0,i.jsxs)(r.A,{sx:{marginTop:"auto",fontSize:"12px",color:"fg.muted"},children:[(0,i.jsx)("span",{children:"Learn more about "}),(0,i.jsx)(l.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"reporting abuse to GitHub support"})]}),(0,i.jsx)(d.Q,{sx:{width:"100%",marginTop:"30px"},variant:"danger",as:"a",href:n,disabled:k,children:"Report abuse to GitHub support"})]})]});return(0,i.jsx)(c.Z,{children:(0,i.jsx)(f.l,{renderHeader:()=>(0,i.jsx)(f.l.Header,{children:(0,i.jsxs)(r.A,{sx:{display:"flex"},children:[(0,i.jsx)(r.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,px:2,py:"6px"},children:(0,i.jsxs)(f.l.Title,{children:["Report ",C]})}),(0,i.jsx)(f.l.CloseButton,{onClose:v})]})}),sx:{width:"100%",margin:4,maxWidth:"640px",maxHeight:"clamp(315px, 80vh, 800px)"},width:"xlarge",height:"auto",onClose:v,children:(0,i.jsxs)(r.A,{sx:{gap:3,display:"grid"},children:[(0,i.jsxs)(u.A,{name:"choiceGroup",onChange:e=>{A(e)},children:[(0,i.jsxs)(u.A.Label,{className:y.RadioGroup_Label,children:["Where would you like to report this ",C," to?"]}),(0,i.jsxs)(m.A,{children:[(0,i.jsx)(h.A,{value:"admins",defaultChecked:!0}),(0,i.jsx)(m.A.Label,{children:"To repository admins"})]}),(0,i.jsxs)(m.A,{children:[(0,i.jsx)(h.A,{value:"support"}),(0,i.jsx)(m.A.Label,{children:"To GitHub support"})]})]}),"admins"===L&&_,"support"===L&&R]})})})};try{b.displayName||(b.displayName="ReportContentDialog")}catch{}},81962:(e,t,n)=>{n.d(t,{o:()=>d});var i=n(74848),a=n(53526),r=n(96540),l=n(18312),s=n(69487);let o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UnblockUserFromOrganizationPayload",kind:"LinkedField",name:"unblockUserFromOrganization",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"clientMutationId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"unblockUserFromOrganizationMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"unblockUserFromOrganizationMutation",selections:t},params:{id:"3bb2b18124f6d9e474f1e4d67f4d648c",metadata:{},name:"unblockUserFromOrganizationMutation",operationKind:"mutation",text:null}}}();o.hash="05b84828fae0f7858c1ccd7347bfbb3e";let d=({contentAuthor:e,organization:t,onClose:n,contentId:d})=>{let c=(0,l.useRelayEnvironment)(),u=(0,r.useCallback)(i=>{"confirm"===i&&function({environment:e,input:{organizationId:t,unblockedUserId:n},onError:i,onCompleted:a}){(0,l.commitMutation)(e,{mutation:o,variables:{input:{organizationId:t,unblockedUserId:n}},onError:e=>i&&i(e),onCompleted:()=>{a?.()}})}({environment:c,input:{unblockedUserId:e.id,organizationId:t.id},onCompleted:()=>(0,s.commitLocalUpdate)(c,e=>{let t=e.get(d);t?.setValue(!0,"pendingUnblock"),t?.setValue(!1,"pendingBlock")})}),n()},[n,c,e.id,t.id,d]);return(0,i.jsxs)(a.K,{title:`Unblock ${e.login} from ${t.login}`,confirmButtonContent:"Unblock user",confirmButtonType:"danger",onClose:u,children:["Are you sure you want to unblock ",(0,i.jsx)("strong",{children:e.login})," from ",(0,i.jsx)("strong",{children:t.login}),"?"]})};try{d.displayName||(d.displayName="UnblockUserFromOrgDialog")}catch{}},71238:(e,t,n)=>{n.d(t,{d:()=>r});var i=n(74848),a=n(76373);function r({status:e,oid:t,repo:n,badgeProps:r={},descriptionString:l=""}){let[s,o]=(0,a.ym)(t,n);return e?(0,i.jsx)(a.B6,{disablePopover:!1,size:"small",statusRollup:e,buttonSx:{height:"18px",color:"fg.muted",p:"2px"},combinedStatus:s,descriptionText:l,onWillOpenPopup:o,...r}):null}try{r.displayName||(r.displayName="AsyncChecksStatusBadge")}catch{}},41658:(e,t,n)=>{n.d(t,{N:()=>ei,$:()=>ea});var i=n(74848),a=n(96540),r=n(76235),l=n(17908),s=n(46636),o=n(47584),d=n(38621),c=n(65481),u=n(55847),m=n(12528),h=n(20053),f=n(5189),p=n(74779);let g={"commit-discussion-comments":"Comment-module__commit-discussion-comments--WaMOe","discussion-comments-rose":"Comment-module__discussion-comments-rose--v1SXb"};var x=n(16497),y=n(34407);let b=()=>(0,i.jsx)("div",{className:"d-flex gap-2",children:(0,i.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(y.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,i.jsx)(x.e,{})]})})});try{b.displayName||(b.displayName="CommentLoading")}catch{}var v=n(81874),C=n(77433),j=n(43943),w=n(31786),N=n(15819),S=n(83476),k=n(82599),E=n(79740),L=n(74493),A=n(55833),D=n(17080),_=n(31402),R=n(82431),I=n(38568);let T=(0,a.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:n,referenceId:r,buttonText:l,commentContent:s},o)=>{let[d,c]=(0,a.useState)(!1),u=(0,a.useRef)(null),m=(0,a.useRef)(void 0),h=(0,a.useCallback)(()=>{},[]),{markdownBody:f,resetMarkdownBody:p,markdownValidationResult:g,handleMarkdownBodyChanged:x}=(0,_.x)({commentBoxRef:u,markdownComposerRef:o,onChange:h,onCancel:()=>{},referenceId:r});(0,a.useEffect)(()=>{e&&!f&&x(e)},[e]),(0,a.useEffect)(()=>{if(s&&m.current!==s){x(s),m.current=s;let e=window.setTimeout(()=>{u.current&&(u.current?.scrollIntoView(),u.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[s]),(0,I.N)(()=>{if(u&&u.current){let e=window.setTimeout(()=>{u.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[u]);let y=async()=>{c(!0),await n(f,p),c(!1)},b=(0,R.nN)()||void 0;return(0,i.jsx)(D.h,{ref:u,validationResult:g,disabled:d,onChange:e=>{x(e)},onCancel:()=>{x(""),t?.()},onSave:y,saveButtonText:l,saveButtonTrailingIcon:!1,value:f,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,userSettings:(0,E.X)().commentBoxConfig,subject:b})});function F({comment:e,commitOid:t,onCancel:n,onUpdate:r}){let{editComment:l}=(0,E.X)(),s=(0,a.useRef)(null),o=async t=>{let n=await l(t,e);n.updatedFields&&r({...e,...n.updatedFields})};return(0,i.jsx)(T,{commitOid:t,initialMarkdown:e.body,ref:s,onSave:o,onCancel:n,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}T.displayName="CommitCommentEditor";try{F.displayName||(F.displayName="UpdateCommitComment")}catch{}function O({comments:e,commit:t,locked:n,deleteComment:a,updateComment:r,setNewCommentContent:l}){return 0===e.length?null:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,i.jsx)(M,{comment:e,commit:t,locked:n,deleteComment:a,updateComment:r,setNewCommentContent:l},e.id))})}function M({comment:e,commit:t,locked:n,deleteComment:r,updateComment:s,setNewCommentContent:o}){let d=(0,l.t)(),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(e.isHidden),f=(0,a.useRef)(null),{deleteComment:p,hideComment:g,unhideComment:y}=(0,E.X)(),b=async()=>{let t=await p(e.id.toString());"canceled"!==t&&"error"!==t&&"success"===t&&r(e.id)},v=async t=>{let n=await g(e.id.toString(),t);"error"!==n&&"success"===n&&(s({...e,isHidden:!0,minimizedReason:t}),h(!0))},C=async()=>{let t=await y(e.id.toString());"error"!==t&&"success"===t&&(s({...e,isHidden:!1,minimizedReason:null}),h(!1))},j=t.authors.length>0?t.authors[0]?.login:"",w={...(0,L.p)(e,t,d),referenceText:(0,A.F)(t.oid)};return(0,i.jsxs)("div",{className:"border rounded-2",ref:f,id:e.urlFragment,tabIndex:-1,children:[(0,i.jsx)($,{comment:w,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:j,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:m,editComment:()=>{u(!0)},onReplySelect:o,onMinimize:h,navigate:()=>{},hideComment:v,unhideComment:C,deleteComment:b,commentRef:f,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),m?null:c?(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(F,{comment:e,commitOid:t.oid,onUpdate:e=>{s(e),u(!1)},onCancel:()=>u(!1)})}):(0,i.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,i.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,i.jsx)(S.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)(x.e,{}),children:(0,i.jsx)(k.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:n})})]})]})}function $({hideActions:e,...t}){let n,r;let l=t.commitComment;return t.showEditHistory&&(n=(0,i.jsx)(a.Suspense,{fallback:null,children:(0,i.jsx)(P,{id:l.relayId})}),r=(0,i.jsx)(B,{id:t.comment.id})),(0,i.jsx)(v.v,{lastEditedByMessage:r,editHistoryComponent:n,forceInlineAvatar:!0,...t,actions:e?void 0:(0,i.jsx)(C.p,{...t})})}function P({id:e}){let t=(0,N.f)({id:e});return t?(0,i.jsx)(j.W,{editHistory:t}):null}function B({id:e}){let t=(0,N.f)({id:e});return t?(0,i.jsx)(w._,{editInformation:t}):null}try{O.displayName||(O.displayName="ExistingCommitComments")}catch{}try{M.displayName||(M.displayName="ExistingCommitComment")}catch{}try{$.displayName||($.displayName="CommitCommentHeader")}catch{}try{P.displayName||(P.displayName="CommitCommentHeaderEditHistory")}catch{}try{B.displayName||(B.displayName="CommitCommentHeaderLastEditedBy")}catch{}var U=n(5796),H=n(38359),V=n(57572),K=n(91246);function q({commitOid:e,locked:t,onClose:n}){let r=(0,l.t)(),{helpUrl:s}=(0,H.X)(),[o,d]=(0,a.useState)(!1),u=t?"Unlock":"Lock",m=async()=>{(await (0,V.DI)(`${(0,U.$Qz)({owner:r.ownerLogin,repo:r.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!0):d(!0)},h=async()=>{(await (0,V.lS)(`${(0,U.$Qz)({owner:r.ownerLogin,repo:r.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!1):d(!0)};return(0,i.jsxs)(K.l,{onClose:()=>n(),width:"large",title:`${u} conversation on this commit`,footerButtons:[{content:`${u} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?h:m}],children:[o&&(0,i.jsxs)(c.A,{className:"mb-2",variant:"danger",children:["There was an error ",u.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,i.jsxs)("p",{children:[u,"ing the conversation means:"]}),(0,i.jsx)("ul",{className:"ml-4",children:t?(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Other users ",(0,i.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),r.isOrgOwned?(0,i.jsxs)("li",{children:["You and other members of teams with\xa0",(0,i.jsx)("a",{href:`${s}/articles/what-are-the-different-access-permissions`,children:"write access"}),"\xa0 to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,i.jsxs)("li",{children:["You and other collaborators\xa0",(0,i.jsx)("a",{href:"<%= GitHub.help_url %>/articles/what-are-the-different-access-permissions",children:"with access"}),"\xa0to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,i.jsxs)("p",{className:"mb-0 mt-2",children:["You can always ",t?"lock":"unlock"," this commit again in the future."]})]})}try{q.displayName||(q.displayName="LockConversationDialog")}catch{}var z=n(56176),G=n(38506),W=n(68310),Q=n(88771),X=n(52655),Y=n(62456);function J({commitOid:e,onAddComment:t,onExpandCommentEditor:n,newCommentContent:r,canComment:l,locked:s,repoArchived:c,avatarURL:u}){let m=(0,z.M3)(),{addComment:h}=(0,E.X)(),f=(0,a.useRef)(null),p=async(e,n)=>{let i=await h(e);i.comment&&(t(i.comment),n())},g=(0,W.i)(c,s,m?void 0:(0,i.jsx)(ee,{redirectUrl:o.fV?.href}),"commit");return(0,i.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:l?(0,i.jsx)(Z,{commitOid:e,commentEditor:f,onExpandEditor:n,onSave:p,newCommentContent:r,avatarURL:u||X.t.ghostUser.avatarUrl}):(0,i.jsx)(G.P,{icon:d.LockIcon,reason:g})})}function Z(e){let[t,n]=(0,a.useState)(()=>void 0!==e.newCommentContent),[l,s]=(0,a.useState)(e.newCommentContent);t||void 0===e.newCommentContent||l===e.newCommentContent||(n(!0),s(e.newCommentContent));let o="Comment";return t?(0,i.jsx)("div",{id:r.Bq.issueCommentComposer,children:(0,i.jsx)(T,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,initialMarkdown:e.newCommentContent,buttonText:o,onCancel:()=>{n(!1)}})}):(0,i.jsxs)("div",{id:r.Bq.issueCommentComposer,className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,i.jsx)(Y.r,{src:e.avatarURL,size:20}),(0,i.jsx)(Q.z,{onClick:()=>{n(!0),e.onExpandEditor?.()},children:o})]})}function ee({redirectUrl:e}){return(0,i.jsxs)("span",{children:["Please ",(0,i.jsx)("a",{href:e?`/login?return_to=${e}`:"/login",children:"sign in"})," to comment."]})}try{J.displayName||(J.displayName="NewCommitComment")}catch{}try{Z.displayName||(Z.displayName="CompactEditor")}catch{}try{ee.displayName||(ee.displayName="LoggedOutMessage")}catch{}var et=n(58206);let en=(0,a.forwardRef)(({commitOid:e,subscribed:t},n)=>{let r;let[s,o]=(0,a.useState)(t),[c,m]=(0,a.useState)(!1),h=(0,l.t)(),f=(0,et.H)("/notifications/thread","post");r=c?`You're now ${s?"subscribed":"unsubscribed"} to this thread.`:s?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let p=async()=>{let t=new FormData;t.append("repository_id",h.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",s?"unsubscribe":"subscribe"),t.append("authenticity_token",f??""),(await (0,V.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(o(!s),m(!0))};return(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:n,children:[(0,i.jsx)(u.Q,{onClick:p,size:"small",leadingVisual:s?d.BellSlashIcon:d.BellIcon,children:s?"Unsubscribe":"Subscribe"}),(0,i.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:r})]})});en.displayName="NotificationsFooter";let ei="comments";function ea(e){return(0,i.jsx)("div",{className:(0,h.$)("d-flex flex-column gap-2 pt-3",r.mU.commentsContainer,g["commit-discussion-comments"]),id:ei,children:(0,a.createElement)(er,{...e,key:e.commit.oid})})}function er({commit:e,commentInfo:t}){let n=(0,l.t)(),r=(0,s.i)(),{retry:d,loadMore:m,canLoadMore:h,addComment:x,deleteComment:y,updateComment:v,count:C,comments:j,subscribed:w,providerState:N}=(0,f.y)(),[S,k]=(0,a.useState)(void 0),[E,L]=(0,a.useState)(t.locked),A=(0,a.useMemo)(()=>(0,p.N)(e.oid,n.id),[e.oid,n.id]),D=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(o.cg?.location.hash){let e=o.cg.location.hash.slice(1);if(j.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[j]);let _=(0,a.useCallback)(()=>{setTimeout(()=>D.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(el,{commitOid:e.oid,commentCount:C,canLock:t.canLock,locked:E,setLocked:L}),"loading"===N&&(0,i.jsx)(b,{}),"error"===N&&(0,i.jsxs)(c.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,i.jsx)("span",{children:"Failed to load comments."}),(0,i.jsx)(u.Q,{onClick:()=>d(),children:"Retry"})]}),"loaded"===N&&h&&(0,i.jsx)(u.Q,{className:"width-full",onClick:()=>m(),children:"Load more comments"}),(0,i.jsx)(O,{comments:j,commit:e,locked:E,deleteComment:y,updateComment:v,setNewCommentContent:k}),A?(0,i.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,i.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:g["discussion-comments-rose"]},`rose-${t}`))}):null,"loaded"===N||0!==j.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{commitOid:e.oid,onAddComment:x,onExpandCommentEditor:_,newCommentContent:S,canComment:t.canComment,locked:E,repoArchived:t.repoArchived,avatarURL:r?.avatarURL}),r?(0,i.jsx)(en,{ref:D,commitOid:e.oid,subscribed:w??!1}):null]}):null]})}function el({commitOid:e,commentCount:t,locked:n,setLocked:r,canLock:l}){let[s,o]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,i.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,i.jsx)(m.A,{children:t})]}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Q,{leadingVisual:n?d.KeyIcon:d.LockIcon,variant:"invisible",onClick:()=>o(!0),children:[n?"Unlock":"Lock"," conversation"]}),s&&(0,i.jsx)(q,{commitOid:e,locked:n,onClose:e=>{o(!1),void 0!==e&&r(e)}})]})]})}try{ea.displayName||(ea.displayName="DiscussionComments")}catch{}try{er.displayName||(er.displayName="DiscussionCommentsInternal")}catch{}try{el.displayName||(el.displayName="DiscussionCommentsHeader")}catch{}},67984:(e,t,n)=>{n.d(t,{j:()=>d});var i=n(74848),a=n(58423),r=n(34407),l=n(94232),s=n(89169),o=n(82169);function d({commit:e,repo:t,children:n,settings:d,textVariant:c}){let u=(0,o.NO)(e.oid),[m]=(0,l.I)(()=>!1,!0,[]);return(0,i.jsxs)(a.j,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:u?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...d},textVariant:c,children:[!m&&(0,i.jsx)(s.A,{className:"pl-1",datetime:e.committedDate}),m&&(0,i.jsx)(r.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})}try{d.displayName||(d.displayName="CommitAttribution")}catch{}},34214:(e,t,n)=>{n.d(t,{s:()=>m});var i=n(74848),a=n(38621),r=n(93597),l=n(84217),s=n(30729);let o={none:{},bottom:{pb:0},top:{pt:0}},d=()=>(0,i.jsx)(s.A,{icon:a.GitCommitIcon});function c({children:e,leadingVisual:t,clipTimeline:n="none",sx:a}){let l=o[n];return(0,i.jsxs)(r.A.Item,{sx:{py:1,...l,...a},children:[(0,i.jsx)(r.A.Badge,{sx:{backgroundColor:"canvas.default"},children:t??(0,i.jsx)(d,{})}),(0,i.jsx)(r.A.Body,{className:"mt-0",children:e})]})}function u({title:e,as:t,...n}){return(0,i.jsx)(l.A,{as:t,className:"text-normal f5 py-1",...n,children:e})}let m=Object.assign(c,{Heading:u});try{d.displayName||(d.displayName="DefaultLeadingVisual")}catch{}try{c.displayName||(c.displayName="TimelineRowComponent")}catch{}try{u.displayName||(u.displayName="TimelineRowHeading")}catch{}try{m.displayName||(m.displayName="TimelineRow")}catch{}},11977:(e,t,n)=>{n.d(t,{w:()=>o});var i=n(74848),a=n(26514),r=n(70404),l=n(13348),s=n(55833);function o({sha:e,direction:t="s"}){let{sendAnalyticsEvent:n}=(0,r.s)(),{loggingPrefix:o,loggingPayload:d}=(0,l.xe)(),c=(0,l.eX)();return(0,i.jsx)("div",{onClick:()=>{c&&n(`${o}click`,"COPY_SHA_CLICKED",d)},children:(0,i.jsx)(a.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,s.F)(e)}`,tooltipProps:{direction:t},size:"small"})})}try{o.displayName||(o.displayName="CopySHA")}catch{}},37356:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(74848),a=n(20053);function r({children:e,className:t=""}){return(0,i.jsx)("div",{className:(0,a.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{r.displayName||(r.displayName="Panel")}catch{}},13348:(e,t,n)=>{n.d(t,{eX:()=>s,xe:()=>o,zq:()=>l});var i=n(74848),a=n(96540);let r=(0,a.createContext)({loggingPayload:void 0,loggingPrefix:void 0});function l({children:e,loggingInfo:t}){return(0,i.jsx)(r.Provider,{value:t,children:e})}function s(){let e=(0,a.useContext)(r);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}function o(){return(0,a.useContext)(r)}try{r.displayName||(r.displayName="CommitsLoggingContext")}catch{}try{l.displayName||(l.displayName="CommitsLoggingInfoProvider")}catch{}},82169:(e,t,n)=>{n.d(t,{M2:()=>o,NO:()=>d,UI:()=>r,Xx:()=>l,ej:()=>u,xs:()=>c});var i=n(74848),a=n(96540);let r={deferredCommits:[],renameHistory:null,loading:!0},l={deferredCommits:[],renameHistory:null,loading:!1},s=(0,a.createContext)(r);function o({children:e,deferredData:t}){return(0,i.jsx)(s.Provider,{value:t,children:e})}function d(e){let t=(0,a.useContext)(s),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i}function c(){return(0,a.useContext)(s).loading}function u(){return(0,a.useContext)(s).renameHistory}try{s.displayName||(s.displayName="DeferredCommitDataContext")}catch{}try{o.displayName||(o.displayName="DeferredCommitDataProvider")}catch{}},5189:(e,t,n)=>{n.d(t,{c:()=>c,y:()=>u});var i,a=n(74848),r=n(73218),l=n(5796),s=n(57572),o=n(96540);let d=(0,o.createContext)({comments:[],addComment:r.l,deleteComment:r.l,updateComment:r.l,loadMore:r.l,retry:r.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function c({children:e,comments:t=[],commentCount:n=0,canLoadMore:i=!1,subscribed:r=!1,providerState:c="initial",repo:u,commitOid:m}){let[h,f]=(0,o.useState)(t),[p,g]=(0,o.useState)(n),[x,y]=(0,o.useState)(i),[b,v]=(0,o.useState)(c),[C,j]=(0,o.useState)(r);(0,o.useEffect)(()=>{g(n),f(t),y(i),j(r),v(c)},[c]);let w=(0,o.useCallback)(async e=>{v("loading");let t=await (0,s.Sr)((0,l.Mo3)({owner:u.ownerLogin,repo:u.name,commitOid:m,beforeCommentId:e}));if(t.ok){let n=await t.json();e?f(e=>[...n.comments,...e]):f(n.comments),v("loaded"),g(n.count),j(n.subscribed),y(n.canLoadMore)}else v("error")},[u.ownerLogin,u.name,m]),N=(0,o.useCallback)(()=>{let e=h[0];e&&x&&w(e.id.toString())},[x,h,w]),S=(0,o.useCallback)(e=>{f([...h,e]),g((p??0)+1)},[h,p]),k=(0,o.useCallback)(e=>{f(h.filter(t=>t.id!==e)),g((p??0)-1)},[h,p]),E=(0,o.useCallback)(e=>{f(h.map(t=>t.id===e.id?e:t))},[h]),L=(0,o.useMemo)(()=>({addComment:S,canLoadMore:x,comments:h,count:p,deleteComment:k,loadMore:N,retry:w,subscribed:C,providerState:b,updateComment:E}),[S,x,h,p,k,w,N,b,C,E]);return(0,a.jsx)(d.Provider,{value:L,children:e})}function u(){let e=(0,o.useContext)(d);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{d.displayName||(d.displayName="DiscussionCommentsContext")}catch{}try{c.displayName||(c.displayName="DiscussionCommentsProvider")}catch{}try{(i=DiscussionComments).displayName||(i.displayName="DiscussionComments")}catch{}},43732:(e,t,n)=>{n.d(t,{B:()=>c,r:()=>d});var i=n(74848),a=n(73218),r=n(96540);let l=(0,r.createContext)({comments:[],addComments:a.l,findInlineComment:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0,updateInlineCommentMapWithNewComment:()=>void 0,getInlineCommentInfoByPathAndPosition:()=>void 0});function s(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function o(e){let t=new Map;for(let n in e)if(e.hasOwnProperty(n)){let i=new Map;for(let t in e[n])e[n].hasOwnProperty(t)&&i.set(Number(t),e[n][Number(t)]);t.set(n,i)}return t}function d({children:e,initialFiles:t,initialExpandedThreadId:n,initialInlineComments:a}){let[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)(t??[]),[h,f]=(0,r.useState)(()=>t?s(t):new Map),[p,g]=(0,r.useState)(()=>a?o(a):new Map),x=(0,r.useCallback)((e,t,n,i)=>{if(i){let i=p.get(e)?.get(t)??[];i=i.concat(n);let a=p.get(e)?.set(t,i);g(p.set(e,a??new Map)??p)}else{let i=p.get(e)?.set(t,n);g(p.set(e,i??new Map)??p)}},[p]);(0,r.useEffect)(()=>{m(t??[]),f(t?s(t):new Map),g(a?o(a):new Map)},[t,a]);let y=(0,r.useCallback)((e,t,n)=>{let i=e.map(e=>e.id),a=d.filter(e=>!i.includes(e.id)),r=u.filter(e=>e.path!==t||e.position!==parseInt(n)),l={path:t,position:parseInt(n),count:e.length,threads:[{id:`${t}::${n}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};c([...a,...e]),m([...r,l]),f(s([...r,l])),x(t,parseInt(n),e,!1)},[u,d,x]),b=(0,r.useCallback)(e=>d.find(t=>t.relayId===e),[d]),v=(0,r.useCallback)(e=>{let t=0;for(let n of u)n.path===e&&(t+=n.count);return t},[u]),C=(0,r.useCallback)((e,t)=>h.get(`${e}::${t}`),[h]),j=(0,r.useCallback)((e,t)=>p.get(e)?.get(t),[p]),w=(0,r.useMemo)(()=>({comments:d,addComments:y,findInlineComment:b,getCommentCountByPath:v,getThreadDataByPathAndPosition:C,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:x,initialExpandedThreadId:n}),[y,d,b,v,C,j,x,n]);return(0,i.jsx)(l.Provider,{value:w,children:e})}function c(){let e=(0,r.useContext)(l);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{l.displayName||(l.displayName="InlineCommentsContext")}catch{}try{d.displayName||(d.displayName="InlineCommentsProvider")}catch{}},44639:(e,t,n)=>{n.d(t,{f:()=>Z});var i=n(74848),a=n(91752),r=n(47584),l=n(11499),s=n(46928),o=n(93597),d=n(96540),c=n(4602),u=n(37356);let m={panel:"CommitGroup-module__panel--tvFMx"};var h=n(13080),f=n(76373),p=n(56775),g=n(82091),x=n(30448),y=n(79910),b=n(4535),v=n(44968),C=n(70404),j=n(13348),w=n(82169),N=n(67984),S=n(5796),k=n(17774),E=n(38621),L=n(55847),A=n(87330),D=n(94977),_=n(42522),R=n(55833),I=n(41658);let T=d.memo(F);function F({repo:e,oid:t}){let n=`browse-repo-${(0,R.F)(t)}`,{sendAnalyticsEvent:a}=(0,C.s)(),{loggingPrefix:r,loggingPayload:l}=(0,j.xe)(),s=(0,j.eX)();return(0,i.jsx)(D.A,{"aria-label":"Browse repository at this point",id:n,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":n,href:(0,S.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{s&&a(`${r}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",l)},children:(0,i.jsx)(E.CodeIcon,{})})})}let O=d.memo(M);function M({repo:e,oid:t,path:n}){if(!n)return null;let a=`view-code-${(0,R.F)(t)}`;return(0,i.jsx)(D.A,{"aria-label":"View code at this point",id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:(0,S.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:n}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,i.jsx)(E.FileCodeIcon,{})})})}function $({commitUrl:e,oid:t,softNavToCommit:n}){let a={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,i.jsx)(D.A,{"aria-label":"View commit details",direction:"s",children:n?(0,i.jsx)(L.Q,{as:k.N,to:e,...a,children:(0,R.F)(t)}):(0,i.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...a,children:(0,i.jsx)("span",{className:"Button-content",children:(0,i.jsx)("span",{className:"Button-label color-fg-muted",children:(0,R.F)(t)})})})})}function P({showDescription:e,setShowDescription:t,oid:n}){let a=(0,R.F)(n),r=`show-description-${a}`,l=`${e?"Hide":"Show"} description for ${a}`;return(0,i.jsx)(_.m,{id:r,text:l,"aria-label":l,children:(0,i.jsx)(A.K,{icon:E.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":r,"aria-pressed":e,"aria-expanded":e,onClick:n=>{n.preventDefault(),t(!e)}})})}function B({count:e,repo:t,oid:n}){if(!e)return null;let a=`comment-count-${(0,R.F)(n)}`;return(0,i.jsx)(D.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:`${(0,S.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:n})}#${I.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,i.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,i.jsx)(E.CommentIcon,{}),(0,i.jsx)("span",{className:"Button-label",children:e})]})})})}try{T.displayName||(T.displayName="BrowseRepositoryAtThisPoint")}catch{}try{F.displayName||(F.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{O.displayName||(O.displayName="ViewCodeAtThisPoint")}catch{}try{M.displayName||(M.displayName="WrappedViewCodeAtThisPoint")}catch{}try{$.displayName||($.displayName="ViewCommitDetails")}catch{}try{P.displayName||(P.displayName="ToggleCommitDescription")}catch{}try{B.displayName||(B.displayName="CommitCommentCount")}catch{}var U=n(32813),H=n(34407),V=n(9916),K=n(71238);function q({deferredData:e}){let{helpUrl:t}=(0,V.D)(),n=(0,w.xs)();return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&void 0===e&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&e&&(0,i.jsx)(U.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function z({deferredData:e,oid:t,repository:n}){let a=(0,w.xs)(),r="";try{r=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&void 0===e&&(0,i.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&e?.statusCheckStatus&&(0,i.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,i.jsx)("div",{className:"d-none d-sm-flex",children:(0,i.jsx)(K.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:r,repo:n})})]})}try{q.displayName||(q.displayName="SignedCommitBadge")}catch{}try{z.displayName||(z.displayName="CommitChecksStatusBadge")}catch{}var G=n(11977);let W={ListItemTitle_0:"CommitRow-module__ListItemTitle_0--g9uVv",ListItem_0:"CommitRow-module__ListItem_0--PkFAi",ListItemMetadata_0:"CommitRow-module__ListItemMetadata_0--MUr_4"},Q=(0,d.lazy)(()=>n.e("ui_packages_commits_components_Commits_CommitActionBar_tsx").then(n.bind(n,62919)).then(e=>({default:e.CommitActionBar})));function X({commit:e,repo:t,path:n,softNavToCommit:a}){let[r,l]=(0,d.useState)(!1),s=(0,d.useRef)(null),[o,c]=(0,f.ym)(e.oid,t),[u,m]=(0,d.useState)(!1),S=(0,w.NO)(e.oid),{sendAnalyticsEvent:k}=(0,C.s)(),{loggingPrefix:E,loggingPayload:L}=(0,j.xe)(),A=(0,j.eX)();return(0,d.useEffect)(()=>{r&&s.current&&s.current.textContent&&(0,h.i)(s.current.textContent)},[s,r]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.c,{"data-testid":"commit-row-item","data-commit-link":e.url,title:(0,i.jsx)(b.a,{value:e.shortMessage,markdownValue:e.shortMessageMarkdownLink,href:e.url,onClick:()=>{A&&k(`${E}click`,"COMMITS_TITLE_CLICKED",L)},containerClassName:W.ListItemTitle_0,headingClassName:W.ListItemTitle_0,children:e.bodyMessageHtml&&(0,i.jsx)(P,{showDescription:r,setShowDescription:l,oid:e.oid})}),metadata:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.V,{children:(0,i.jsx)(B,{oid:e.oid,repo:t,count:S?.commentCount??0})}),(0,i.jsx)(y.V,{className:W.ListItemMetadata_0,children:(0,i.jsx)(q,{deferredData:S})}),(0,i.jsxs)(y.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)($,{oid:e.oid,commitUrl:e.url,softNavToCommit:a}),(0,i.jsx)(G.w,{sha:e.oid})]}),(0,i.jsx)(O,{repo:t,oid:e.oid,path:n}),(0,i.jsx)(T,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,i.jsx)(d.Suspense,{children:(0,i.jsx)(Q,{commit:e,repo:t,path:n,setDialogOpen:m,fetchCheckDetails:c,deferredData:S})}),className:W.ListItem_0,children:[(0,i.jsx)("div",{className:"px-1"}),(0,i.jsxs)(x.Q,{children:[r&&e.bodyMessageHtml&&(0,i.jsx)(g.U,{children:(0,i.jsx)(v.yx,{ref:s,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,i.jsx)(g.U,{children:(0,i.jsx)(N.j,{commit:e,repo:t,children:(0,i.jsx)(z,{repository:t,deferredData:S,oid:e.oid})})})]})]}),S?.statusCheckStatus&&u&&(0,i.jsx)(f.xC,{combinedStatus:o,isOpen:u,onDismiss:()=>{m(!1)}})]})}try{Q.displayName||(Q.displayName="CommitActionBar")}catch{}try{X.displayName||(X.displayName="CommitRow")}catch{}var Y=n(34214);function J({commits:e,title:t,shouldClipTimeline:n,repo:a,currentBlobPath:r="",softNavToCommit:l}){let s=(0,d.useId)();return(0,i.jsxs)(Y.s,{clipTimeline:n?"top":"none",children:[(0,i.jsx)(Y.s.Heading,{as:"h3",id:s,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,i.jsx)(u.Z,{className:m.panel,children:(0,i.jsx)(c.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:s,children:e.map(e=>(0,i.jsx)(X,{commit:e,repo:a,path:r,softNavToCommit:l},e.oid))},t)})]})}try{J.displayName||(J.displayName="CommitGroup")}catch{}function Z({leadingContent:e,commitGroups:t,trailingContent:n,deferredCommitData:c=w.Xx,repository:u,currentBlobPath:m,loggingPayload:h,loggingPrefix:f,shouldClipTimeline:p=!0,softNavToCommit:g=!1}){let x=(0,d.useRef)(0),y=(0,d.useRef)(null),b=(0,d.useRef)(null),v=(0,d.useRef)(!1),C=(0,d.useRef)([]),N=(0,s.Z)(),S=e=>{"commit-diff-view:tab-forward"===e.commandId&&(y.current=b.current,b.current=r.XC?.activeElement??null,v.current=!1),"commit-diff-view:tab-backward"===e.commandId&&r.XC?.activeElement?.hasAttribute("data-commit-link")&&!v.current&&y.current&&(y.current.focus(),b.current=y.current),"commit-diff-view:tab-backward"===e.commandId&&(v.current=!0)},k=e=>{if(!(0,a.zw)()&&("commit-diff-view:go-down-commit"===e.commandId||"commit-diff-view:go-up-commit"===e.commandId))return;let t=1;for(let e=0;e<C.current.length;e++)C.current[e]?.contains(r.XC?.activeElement)&&(t=e+1);let n=!1;if(("commit-diff-view:go-up-commit"===e.commandId||"commit-diff-view:go-up-commit-arrow"===e.commandId)&&(n=!0),x.current!==t)x.current=t;else{let e=C.current[n?t-2:t];e?.focus(),e?.focus(),x.current=n?t-1:t+1}};return(0,d.useEffect)(()=>{let e=setTimeout(()=>{let e=document.querySelectorAll('[id*="-list-view-node-"]');C.current=Array.from(e)},0);return()=>clearTimeout(e)},[t]),(0,i.jsx)(w.M2,{deferredData:c,children:(0,i.jsx)(j.zq,{loggingInfo:{loggingPayload:h,loggingPrefix:f},children:(0,i.jsxs)(o.A,{clipSidebar:!0,onKeyDown:e=>{if("Enter"===e.key){let t=r.XC?.activeElement?.hasAttribute("data-commit-link")?r.XC?.activeElement?.getAttribute("data-commit-link"):void 0;t&&(e.ctrlKey||e.metaKey?r.cg?.open(t,"_blank"):N(t))}},children:[e,(0,i.jsx)(l.tL,{commands:{"commit-diff-view:go-down-commit-arrow":k,"commit-diff-view:go-down-commit":k,"commit-diff-view:go-up-commit-arrow":k,"commit-diff-view:go-up-commit":k,"commit-diff-view:tab-forward":S,"commit-diff-view:tab-backward":S},triggerOnDefaultPrevented:!0,children:t.map((e,t)=>(0,i.jsx)(J,{title:e.title,commits:e.commits,shouldClipTimeline:p&&0===t,currentBlobPath:m,repo:u,softNavToCommit:g},e.title))}),n]})})})}try{Z.displayName||(Z.displayName="Commits")}catch{}},47938:(e,t,n)=>{n.d(t,{M:()=>u});var i=n(74848),a=n(76797),r=n(73218),l=n(38621),s=n(67138),o=n(24664),d=n(37356);let c={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,i.jsx)(l.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,i.jsx)(l.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function u({timeoutMessage:e,unavailableMessage:t}){let n=c[""!==e?"timeout":"unavailable"],u=t??n.description;return(0,i.jsx)(d.Z,{children:(0,i.jsx)("div",{"data-hpc":!0,children:(0,i.jsxs)(o.A,{border:!1,spacious:!0,children:[(0,i.jsx)(o.A.Visual,{children:n.icon}),(0,i.jsx)(o.A.Heading,{children:n.heading}),(0,i.jsx)(o.A.Description,{children:u}),n.showTextInput&&(0,i.jsx)(s.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:r.l,readOnly:!0,size:"large",trailingAction:(0,i.jsx)(s.A.Action,{onClick:()=>(0,a.D)(e),icon:l.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{u.displayName||(u.displayName="CommitsBlankState")}catch{}},62964:(e,t,n)=>{n.d(t,{q:()=>m});var i=n(74848),a=n(46636),r=n(78026),l=n(41980),s=n(94232),o=n(96540),d=n(5796),c=n(57572);async function u(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,c.DI)((0,d.h6D)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}function m(e,t){let[n]=(0,s.I)(()=>!1,!0,[]),d=(0,a.i)(),c=(0,o.useRef)(null),m=(0,o.useRef)(null),[h,f]=(0,o.useState)(t),[p,g]=(0,o.useState)(!1),x=(0,o.useCallback)(()=>{(0,l.nn)(window.innerWidth)<=l.Gy.medium?(g(!0),requestAnimationFrame(()=>m.current?.focus())):(f(!0),u(!0,d),requestAnimationFrame(()=>c.current?.focus()))},[d]),y=(0,o.useCallback)(()=>{(0,l.nn)(window.innerWidth)<=l.Gy.medium?(g(!1),requestAnimationFrame(()=>m.current?.focus())):(f(!1),u(!1,d),requestAnimationFrame(()=>c.current?.focus()))},[d]),b=(0,o.useMemo)(()=>(0,i.jsx)(r.L,{expanded:h,alignment:"left",ariaLabel:h?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:c,onToggleExpanded:()=>{h?y():x()},className:"d-none d-md-flex position-relative"}),[h,e,y,x]),v=(0,o.useMemo)(()=>(0,i.jsx)(r.L,{expanded:p,alignment:"left",ariaLabel:p?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:m,onToggleExpanded:()=>{p?y():x()},className:"d-md-none position-relative"}),[p,e,y,x]),C=(0,o.useMemo)(()=>(0,i.jsxs)(i.Fragment,{children:[v,b]}),[v,b]);return{splitPagePaneHiddenSx:n&&!t?{display:"none",contain:"content"}:{contain:"content",flexDirection:["column","column","inherit"],"@media screen and (max-width: 768px)":p?{mt:-3}:{display:"none"},"@media screen and (min-width: 769px)":h?{height:"100vh",maxHeight:"100vh !important"}:{display:"none"}},splitPageContentHidden:{narrow:p,regular:!1},isMobileTreeExpanded:p,expandTree:x,collapseTree:y,treeToggleElement:C,treeToggleRef:c}}},22025:(e,t,n)=>{n.d(t,{U:()=>u});var i=n(74848),a=n(50064),r=n(47584),l=n(75177),s=n(96540),o=n(61445),d=n(14614),c=n(97745);function u({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:u,fileLevelComment:m,filePath:h,focusOnMount:f,isReplying:p,lineNumber:g,onAddComment:x,onCancelComment:y,onPersistedCommentExists:b,quotedText:v="",side:C,subjectId:j,threadId:w,suggestedChangesConfig:N}){let[S,k]=(0,s.useState)(v),[E,L]=(0,s.useState)(!1),[A,D]=(0,s.useState)(),_=(0,s.useRef)(null),R=(0,s.useRef)(null),{persistCommentToStorage:I,removePersistedCommentFromStorage:T}=(0,o.L)({diffSide:C,filePath:h,line:g,subjectId:j,threadId:w,handlePersistedCommentExists:({text:e})=>{e&&(k(e),b?.())},fileLevelComment:!!m});(0,s.useEffect)(()=>{if(f){let e=setTimeout(()=>{if(R.current&&(r.XC||r.cg)){let e=R.current,t=e.getBoundingClientRect(),n=r.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(r.cg?.innerHeight||n))){let i=t.top,a=r.XC?.documentElement.getBoundingClientRect().top||0,l=e.clientHeight*(2/3);r.cg?.scrollTo({top:i-a-2/3*n+l,behavior:"smooth"})}}_.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[f]);let F=({submitBatch:e})=>{L(!0),D(void 0);let t=(0,d.u)(S,N?.sourceContentFromDiffLines??"");if(!t.isValid){D(t.errorMessage),L(!1);return}x?.({commentText:S,onCompleted(){L(!1),$()},onError(e){L(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),D(t)},submitBatch:e})},O=()=>F({submitBatch:!1}),M=()=>F({submitBatch:!0}),$=()=>{T(),k(""),y?.()},P={footer:{justifyContent:p?"end":"space-between","> div:first-child":{display:u||p?"none":"flex"},...u&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(c.S,{ref:_,label:"Add diff comment",sx:P,value:S,onChange:e=>{D(void 0),I({text:e}),k(e)},onPrimaryAction:t?O:M,userSettings:n,suggestedChangesConfig:N,markdownErrorMessage:A,children:[y&&(0,i.jsx)(a.x,{disabled:E,sx:{py:1,px:2},variant:"default",onClick:$,children:"Cancel"}),!e&&(0,i.jsx)(a.x,{disabled:E||!S.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:M,ref:R,children:p?"Reply":"Comment"}),t&&(0,i.jsx)(a.x,{disabled:E||!S.length,sx:{py:1,px:2},variant:"primary",onClick:O,children:e?"Add review comment":"Start a review"})]})})}try{u.displayName||(u.displayName="AddCommentEditor")}catch{}},81229:(e,t,n)=>{n.d(t,{Y:()=>f});var i=n(74848),a=n(62456),r=n(38621),l=n(75177),s=n(52464),o=n(30631),d=n(55847),c=n(30729),u=n(42389),m=n(82126);let h={[u.U.Failure]:(0,i.jsx)(c.A,{icon:r.StopIcon,sx:{fill:"danger.fg"}}),[u.U.Warning]:(0,i.jsx)(c.A,{icon:r.AlertIcon,sx:{fill:"attention.fg"}}),[u.U.Notice]:(0,i.jsx)(c.A,{icon:r.InfoIcon,sx:{fill:"fg.muted"}})};function f({annotation:e}){return(0,i.jsxs)(l.A,{sx:{borderLeft:"4px solid",borderColor:m.GF[e.annotationLevel].primaryColor,p:3},children:[(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[h[e.annotationLevel],(0,i.jsx)(s.A,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:m.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(l.A,{sx:{ml:4},children:e.title&&(0,i.jsx)(s.A,{sx:{color:m.GF[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title})}),(0,i.jsx)(l.A,{sx:{mb:3,mt:1,ml:4},children:e.message&&(0,i.jsx)(s.A,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",ml:4},children:[(0,i.jsxs)(l.A,{sx:{flexGrow:2},children:[(0,i.jsx)(a.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,i.jsxs)(o.A,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,i.jsx)(s.A,{sx:{fontWeight:600,fontSize:0},children:e.checkSuiteName})," /"," ",(0,i.jsx)(s.A,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(d.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{f.displayName||(f.displayName="Annotation")}catch{}},82126:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>o,Xh:()=>l});var i=n(74848),a=n(38267),r=n(42389);function l({annotationLevel:e,...t}){let{icon:n,...a}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:r}){return(0,i.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let s=(0,a.i7)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,a.Ay)(l).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],s),d={[r.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[r.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[r.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{l.displayName||(l.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},80765:(e,t,n)=>{n.d(t,{$:()=>y});var i=n(74848),a=n(70404),r=n(45996),l=n(69676),s=n(82678),o=n(75177),d=n(63867),c=n(73451),u=n(67138),m=n(51856),h=n(91246),f=n(96540);function p({children:e,footerButtons:t}){let{containerRef:n}=(0,s.G)({bindKeys:l.z0.ArrowHorizontal|l.z0.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(h.l.Footer,{ref:n,children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(o.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(h.l.Buttons,{buttons:t})}),e]})}):null}let g={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case g.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case g.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function y({authorLogins:e,batchSize:t,onClose:n,onCommit:l}){let s=(0,r.A)(),{sendAnalyticsEvent:y}=(0,a.s)(),[b,v]=(0,f.useState)(!1),[C,j]=(0,f.useState)(),[w,N]=(0,f.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),S=(0,f.useCallback)((e,t,n)=>{if(!s())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",v(!1),j(i)},[s]),k=(0,f.useCallback)(()=>{s()&&(v(!1),C&&j(void 0))},[C,s]),E=(0,f.useCallback)(()=>{b||(v(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),l(`${w.commitMessage}

${w.extendedDescription}`,S,k))},[t,w.commitMessage,w.extendedDescription,k,S,b,l,y]);return(0,i.jsxs)(h.l,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(p,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(o.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",b&&(0,i.jsx)(d.A,{size:"small",sx:{ml:1}})]}),onClick:E,buttonType:"primary"}],children:C&&(0,i.jsx)(c.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:C})}),onClose:n,children:[(0,i.jsxs)(c.A,{sx:{mb:2},children:[(0,i.jsx)(c.A.Label,{children:"Commit message"}),(0,i.jsx)(u.A,{block:!0,name:"commit_message",onChange:e=>N({type:g.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:w.commitMessage})]}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(c.A.Label,{children:"Extended description (optional)"}),(0,i.jsx)(m.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>N({type:g.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:w.extendedDescription})]})]})}try{p.displayName||(p.displayName="DialogFooter")}catch{}try{y.displayName||(y.displayName="ApplySuggestionDialog")}catch{}},97745:(e,t,n)=>{n.d(t,{S:()=>s});var i=n(74848),a=n(17080),r=n(96540),l=n(38061);let s=(0,r.forwardRef)(({children:e,...t},n)=>{let r=(0,l.n)();return(0,i.jsx)(a.h,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:r??void 0,showLabel:!1})});s.displayName="ConversationCommentBox"},94493:(e,t,n)=>{n.d(t,{H:()=>h});var i=n(74848),a=n(88771),r=n(70404),l=n(75177),s=n(96540),o=n(93345),d=n(70283),c=n(22025),u=n(8187),m=n(78869);function h({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:h,commentsConnectionId:f,filePath:p,hideDiffPreview:g,onRefreshThread:x,enterDialogMode:y,repositoryId:b,subject:v,subjectId:C,tabSize:j,thread:w,threadsConnectionId:N,shouldLimitHeight:S=!0,suggestedChangesConfig:k,viewerData:E,ghostUser:L}){let[A,D]=(0,s.useState)(!1),[_,R]=(0,s.useState)(void 0),{sendAnalyticsEvent:I}=(0,r.s)(),{addThreadReply:T}=h,F=e=>{R(e),D(!0)};if(null===w.commentsData.comments||w.commentsData.comments.length<1)return null;let O=(0,d.Lm)(w),M="LINE"===w.subjectType?{lineRange:O}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)(l.A,{sx:S?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!g&&w.isOutdated&&(0,i.jsx)(m.i,{subject:w.subject,tabSize:j??4}),w.commentsData.comments.map((e,t)=>(0,i.jsx)(u.U,{enterDialogMode:y,isAnchorable:!0,index:t,isLastChild:t===w.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:w.commentsData.__id,commentingImplementation:h,filePath:p,isOutdated:w.isOutdated,repositoryId:b,subject:v,subjectId:C,threadId:w.id,onRefreshThread:x,onQuoteReply:F,threadCommentCount:w.commentsData.comments.length,threadsConnectionId:N,isThreadResolved:!!w.isResolved,suggestedChangesConfig:k,applySuggestedChangesValidationData:M,viewerData:E,ghostUser:L},e.id)),w.viewerCanReply&&(0,i.jsxs)(l.A,{sx:{borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[A&&(0,i.jsx)(c.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:h.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:p,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{D(!1),I("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:b,quotedText:_,subjectId:C,threadId:w.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=[];w.commentsData.__id&&a.push(w.commentsData.__id),f&&a.push(f),T({commentsConnectionIds:a,filePath:p,thread:w,text:e,submitBatch:i,onCompleted:e=>{e&&(0,o.p)(e.toString()),t?.(),x?.(w.id)},onError:n,threadsConnectionId:N}),I("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:k}),!A&&(0,i.jsx)(a.z,{onClick:()=>{I("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),D(!0)},children:"Write a reply"})]})]})})}try{h.displayName||(h.displayName="ReviewThread")}catch{}},8187:(e,t,n)=>{n.d(t,{U:()=>H});var i=n(74848),a=n(17080),r=n(81874),l=n(77433),s=n(52655),o=n(73218),d=n(16497),c=n(82599),u=n(44968),m=n(47584),h=n(67136),f=n(75177),p=n(96540),g=n(42242),x=n(93345),y=n(61445),b=n(14614),v=n(97745),C=n(38568),j=n(40961),w=n(70283),N=n(56126),S=n(70404),k=n(55847);function E({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,S.s)();return(0,i.jsx)(f.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(k.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{E.displayName||(E.displayName="AddToExistingBatch")}catch{}var L=n(38621),A=n(91321),D=n(87330),_=n(89323),R=n(8338);let I={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function T({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:a}=(0,S.s)(),[r,l]=(0,p.useState)(I.addSuggestionToBatch),[s,o]=(0,p.useState)(!1),d=(0,p.useRef)(null),c=(0,p.useRef)(null),u=()=>o(!s),{addSuggestedChangeToPendingBatch:m}=e,h=(0,p.useCallback)(()=>{r===I.addSuggestionToBatch&&(m(n),a("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===I.applySuggestion&&t(c)},[m,t,r,a,n]);return(0,i.jsx)(f.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(A.A,{children:[(0,i.jsx)(k.Q,{variant:"primary",onClick:h,ref:c,children:r.text}),(0,i.jsx)(D.K,{unsafeDisableTooltip:!0,ref:d,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:L.TriangleDownIcon,size:"medium",variant:"primary",onClick:u}),(0,i.jsx)(_.W,{anchorRef:d,open:s,onOpenChange:u,children:(0,i.jsx)(_.W.Overlay,{width:"medium",children:(0,i.jsx)(R.l,{selectionVariant:"single",children:Object.keys(I).map(e=>{let t=I[e];return(0,i.jsx)(R.l.Item,{selected:r===t,onSelect:()=>l(t),children:t.text},e)})})})})]})})}try{T.displayName||(T.displayName="ApplyOrAddToBatch")}catch{}var F=n(80765),O=n(52464);function M({reason:e,sx:t}){return(0,i.jsx)(f.A,{sx:{m:2,...t},children:(0,i.jsx)(O.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{M.displayName||(M.displayName="CodeSuggestionUnavailable")}catch{}var $=n(47139);function P({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let a=(0,p.useRef)(null),r=(0,p.useCallback)(()=>{t(a)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:s}=(0,S.s)();return(0,i.jsxs)(f.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)($.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(f.A,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(k.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),s("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(k.Q,{ref:a,size:"medium",count:l,variant:"primary",onClick:r,children:`Apply suggestion${l>1?"s":""}`})]})]})}try{P.displayName||(P.displayName="CommitOrRemoveFromBatch")}catch{}function B({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,N.W)(),[a,r]=(0,p.useState)(!1),l=(0,p.useRef)(void 0),{pendingSuggestedChangesBatch:s,submitSuggestedChanges:o}=e,d=(0,w.c0)(t,s),c=0===s.length,{isValid:u,reason:m}=(0,w.EJ)(t,s),h=(0,p.useMemo)(()=>d?s:[t],[d,s,t]),g=(0,p.useCallback)(e=>{r(e),n?.(e)},[n]),x=(0,p.useCallback)(()=>{if(g(!1),l.current){let e=l.current.current;setTimeout(()=>e?.focus())}},[g]),y=(0,p.useCallback)(e=>{g(!0),l.current=e},[g,l]),b=(0,p.useCallback)((e,t,n)=>{o({suggestedChanges:h,commitMessage:e,onCompleted:()=>{x(),n()},onError:t})},[x,o,h]);return(0,i.jsxs)(f.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[d&&(0,i.jsx)(P,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!d&&!u&&m&&(0,i.jsx)(M,{reason:m,sx:{m:0}}),!d&&c&&(0,i.jsx)(T,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!d&&u&&!c&&(0,i.jsx)(E,{commentingImplementation:e,suggestedChange:t}),a&&(0,i.jsx)(F.$,{authorLogins:h.map(e=>e.authorLogin),batchSize:h.length,onClose:x,onCommit:b})]})}try{B.displayName||(B.displayName="CodeSuggestionActions")}catch{}function U({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:a,filePath:r,isOutdated:l,isThreadResolved:s,subject:o,suggestedChangesConfig:d,threadId:c,viewerData:u}){let m=function(e,t,n,i,a){let[r,l]=(0,p.useState)();return(0,C.N)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l of r){let r=l?.closest("div.js-suggested-changes-blob");if(!r)continue;let s=[...r.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(e=>e.textContent),lineRange:a.lineRange,threadId:i})}l(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),r}(n,t,r,c,e);return(0,i.jsx)(i.Fragment,{children:m?.length?m.map(n=>{let{isValid:r,reason:c}=(0,w.o_)({suggestedChange:n,isOutdated:l,isPending:"PENDING"===t.state,isResolved:s,pullRequestIsClosed:o?.state!=="OPEN",pullRequestIsInMergeQueue:!!o?.isInMergeQueue,userCanApplySuggestion:!!u?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:d});return!r&&c?(0,j.createPortal)((0,i.jsx)(M,{reason:c}),n.ref):(0,j.createPortal)((0,i.jsx)(B,{commentingImplementation:a,suggestedChange:n}),n.ref)}):null})}try{U.displayName||(U.displayName="SuggestedChangeView")}catch{}function H({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:C,isThreadResolved:j,anchorPrefix:w="r",comment:N,commentingImplementation:S,filePath:k,hideActions:E,enterDialogMode:L=o.l,onRefreshThread:A,onQuoteReply:D=o.l,subjectId:_,subject:R,threadCommentCount:I,threadId:T,threadsConnectionId:F,suggestedChangesConfig:O,applySuggestedChangesValidationData:M,viewerData:$,ghostUser:P=s.t.ghostUser,skipReactions:B=!1}){let{addToast:H}=(0,h.Y6)(),[V,K]=(0,p.useState)(!1),[q,z]=(0,p.useState)(N.isHidden),[G,W]=(0,p.useState)(N.body),[Q,X]=(0,p.useState)(!1),[Y,J]=(0,p.useState)(),{persistCommentToStorage:Z,removePersistedCommentFromStorage:ee}=(0,y.L)({subjectId:_,filePath:k,fileLevelComment:"FILE"===N.subjectType,threadId:N.id,handlePersistedCommentExists:({text:e})=>{e&&W(e)}}),{editComment:et,deleteComment:en,hideComment:ei,unhideComment:ea,lazyFetchReactionGroups:er}=S,el=(0,p.useRef)(null),es=(0,p.useRef)(null),{isInDialogMode:eo}=(0,g.q)(),ed=()=>{el.current?.focus()};(0,p.useEffect)(()=>{if(V){let e=window.setTimeout(ed);return()=>{window.clearTimeout(e)}}},[V]);let ec=(0,p.useCallback)(()=>{X(!0);let e=(0,b.u)(G,O?.sourceContentFromDiffLines??"");if(!e.isValid){J(e.errorMessage),X(!1);return}et({text:G,comment:N,onCompleted:()=>{K(!1),X(!1),ee(),A?.(T)},onError:()=>{X(!1),H({type:"error",message:"Failed to update comment"})}})},[H,G,N,et,A,ee,O,T]),eu=N.currentDiffResourcePath?.split("#r").pop(),em=eu?`${w}${eu}`:void 0,eh=em&&m.fV?new URL(`${m.fV.pathname}#${em}`,m.fV.origin).toString():void 0,ef=(0,p.useRef)(null);(0,p.useEffect)(()=>{e&&eu&&em&&window.location.hash.split("#").pop()===em&&((0,x.p)(eu,w),L?.(!1),ef.current?.focus())},[w,em,eu,L,e]);let ep={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eg=t>0,ex=t>1,ey=S.suggestedChangesEnabled,eb=V?"editing":q?"hidden":"visible",ev={headingProps:{as:"h3"},avatarUrl:N.author?.avatarUrl??P.avatarUrl,comment:{...N,url:eh??"",referenceText:N.reference.text??`#${N.reference.number}`},commentRef:ef,deleteComment:()=>{en({commentId:N.id,onCompleted:()=>{A?.(T)},onError:()=>{X(!1),H({type:"error",message:"Failed to delete comment"})},threadCommentCount:I,threadId:T,threadsConnectionId:F,filePath:k})},editComment:()=>{K(!0)},editHistoryComponent:void 0,hideComment:e=>{ei({commentId:N.id,reason:e,onCompleted:()=>{A?.(T)},onError:()=>{X(!1),H({type:"error",message:"Failed to hide comment"})}})},onMinimize:z,isMinimized:q,commentAuthorLogin:N.author?.login??P.login,navigate:o.l,commentSubjectAuthorLogin:N.reference?.author?.login??"",commentSubjectType:S.commentSubjectType,onReplySelect:D,unhideComment:()=>{ea({commentId:N.id,onCompleted:()=>{A?.(T)},onError:()=>{X(!1),H({type:"error",message:"Failed to unhide comment"})}})},hideActions:E,isReply:eg,forceInlineAvatar:!0,containerStyle:{}};return(0,i.jsxs)(f.A,{ref:ef,id:e?em:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ep,":focus":ep,pb:eg?0:2},children:[ex&&(0,i.jsx)(f.A,{sx:{display:"flex",pl:eg?1:0},children:(0,i.jsx)(f.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(f.A,{sx:{px:3,pt:ex?0:2,pb:0},children:(0,i.jsx)(r.v,{...ev,commentBody:N.body,threadCommentCount:I,isInDialogMode:eo,actions:E?void 0:(0,i.jsx)(l.p,{...ev})})}),(0,i.jsxs)(f.A,{sx:{display:"flex",pl:eg?1:0},children:[eg&&(0,i.jsx)(f.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eb&&(0,i.jsx)(f.A,{sx:{pr:2,pl:eg?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(v.S,{ref:el,label:"Update comment",value:G,onChange:e=>{Z({text:e}),W(e),J(void 0)},onPrimaryAction:ec,userSettings:S.commentBoxConfig,suggestedChangesConfig:O,markdownErrorMessage:Y,children:[(0,i.jsx)(a.x,{variant:"default",onClick:()=>{K(!1),ee(),W(N.body)},children:"Cancel"}),(0,i.jsx)(a.x,{disabled:Q||!G.length,variant:"primary",onClick:ec,children:"Update"})]})}),"visible"===eb&&(0,i.jsx)(f.A,{sx:eg?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:N.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.oG,{ref:es,className:"markdown-body","comment-testid":`Comment body html for comment ${N.id}`,html:N.bodyHTML,sx:{mt:1,fontSize:1}}),!B&&(0,i.jsx)(f.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:er?(0,i.jsx)(p.Suspense,{fallback:(0,i.jsx)(d.e,{}),children:(0,i.jsx)(c.ReactionViewerRelayQueryComponent,{id:N.id})}):(0,i.jsx)(c.ReactionViewerRelay,{reactionGroups:N,subjectId:N.id})}),ey&&M&&(0,i.jsx)(U,{comment:N,commentBodyRef:es,commentingImplementation:S,filePath:k,isOutdated:C,isThreadResolved:j,threadId:T,suggestedChangesConfig:O,applySuggestedChangesValidationData:M,subject:R,viewerData:$})]})})]})]})}try{H.displayName||(H.displayName="ReviewThreadComment")}catch{}},78869:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(74848),a=n(67220),r=n(73974),l=n(75177),s=n(52464);function o({subject:e,sx:t,tabSize:n,hideHeaderDetails:o,diffTableSx:d}){if(!e?.diffLines||e?.diffLines.length<1)return null;let c=(0,a.c7)(e.diffLines);return(0,i.jsxs)(l.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...t},children:[!o&&(0,i.jsx)(l.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(s.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,r.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,i.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(r.l4,{lineWidth:c,lines:e.diffLines,tabSize:n,sx:d})]})}try{o.displayName||(o.displayName="StaticUnifiedDiffPreview")}catch{}},38061:(e,t,n)=>{n.d(t,{n:()=>r,u:()=>l});var i=n(96540);let a=(0,i.createContext)(null),r=()=>(0,i.useContext)(a),l=a.Provider;try{a.displayName||(a.displayName="ConversationMarkdownSubjectContext")}catch{}},56126:(e,t,n)=>{n.d(t,{W:()=>s,j:()=>l});var i=n(74848),a=n(96540);let r=(0,a.createContext)({});function l({children:e}){let[t,n]=(0,a.useState)(!1),l=(0,a.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(r.Provider,{value:l,children:e})}let s=()=>(0,a.useContext)(r);try{r.displayName||(r.displayName="DialogStateContext")}catch{}try{l.displayName||(l.displayName="DialogStateProvider")}catch{}},42242:(e,t,n)=>{n.d(t,{k:()=>l,q:()=>s});var i=n(74848),a=n(96540);let r=(0,a.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function l({children:e}){let[t,n]=(0,a.useState)(!1),l=(0,a.useCallback)(()=>n(!0),[]),s=(0,a.useCallback)(()=>n(!1),[]),o=(0,a.useMemo)(()=>({isInDialogMode:t,enableInlineCommentDialogMode:l,disableInlineCommentDialogMode:s}),[t,l,s]);return(0,i.jsx)(r.Provider,{value:o,children:e})}let s=()=>(0,a.useContext)(r);try{r.displayName||(r.displayName="InlineCommentDialogModeContext")}catch{}try{l.displayName||(l.displayName="InlineCommmentDialogModeProvider")}catch{}},18447:(e,t,n)=>{n.d(t,{c:()=>d});var i=n(74848),a=n(38621),r=n(87330),l=n(20053),s=n(96540);let o={square:"AskCopilotButton-module__square--o8kDO",muted:"AskCopilotButton-module__muted--QatcG"};function d({children:e,referenceType:t,...n}){let d=(0,s.useRef)(null);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.K,{className:(0,l.$)(o.square,!!e&&o.muted),ref:d,icon:a.CopilotIcon,size:"small","aria-label":`Ask Copilot about this ${t}`,"data-testid":"copilot-ask-menu",...n})})}try{d.displayName||(d.displayName="AskCopilotButton")}catch{}},78135:(e,t,n)=>{n.d(t,{M:()=>CopilotDiffEntryElement});var i=n(39595);function a(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function r(e,t){var n=a(e,t,"get");return n.get?n.get.call(e):n.value}function l(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function s(e,t,n){var i=a(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,i){var a,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(l=(r<3?a(l):r>3?a(t,n,l):a(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l}var c=new WeakMap,u=new WeakMap,m=new WeakMap;let h=class CopilotDiffEntryStore extends EventTarget{get entries(){return r(this,c)}clear(){s(this,c,new Set)}connect(e){r(this,m).observe(e)}disconnect(e){r(this,m).unobserve(e)}constructor(...e){super(...e),l(this,m,{get:f,set:void 0}),l(this,c,{writable:!0,value:new Set}),l(this,u,{writable:!0,value:void 0})}};function f(){return s(this,u,r(this,u)??new IntersectionObserver(e=>{let t=new Set(r(this,c)),n=!1;for(let i of e){let e=i.target;i.isIntersecting&&!t.has(e)?(t.add(e),n=!0):!i.isIntersecting&&t.has(e)&&(t.delete(e),n=!0)}if(n){for(let e of t)document.contains(e)||t.delete(e);s(this,c,t),this.dispatchEvent(new Event("update"))}},{rootMargin:"50%"}))}let CopilotDiffEntryElement=class CopilotDiffEntryElement extends HTMLElement{connectedCallback(){this.menuItemsSlot?.replaceChildren(),CopilotDiffEntryElement.store.connect(this)}disconnectedCallback(){CopilotDiffEntryElement.store.disconnect(this)}constructor(...e){super(...e),o(this,"filePath",""),o(this,"disabled",!1)}};o(CopilotDiffEntryElement,"store",new h),d([i.CF],CopilotDiffEntryElement.prototype,"filePath",void 0),d([i.CF],CopilotDiffEntryElement.prototype,"disabled",void 0),d([i.aC],CopilotDiffEntryElement.prototype,"menuItemsSlot",void 0),CopilotDiffEntryElement=d([i.p_],CopilotDiffEntryElement)},96590:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(74848),a=n(38621),r=n(8338),l=n(39298);let s=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.l.Divider,{}),(0,i.jsx)(l.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(a.CopilotIcon,{}),fileDiffReference:e.copilotChatReference})]});try{s.displayName||(s.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}},7201:(e,t,n)=>{n.d(t,{K:()=>v});var i=n(74848),a=n(91618),r=n(77342),l=n(46988),s=n(38621),o=n(55847),d=n(96540),c=n(20317),u=n(32138),m=n(61597),h=n(8338);let f=({entry:e,selected:t,onSelect:n,onDeselect:a})=>e.reference?(0,i.jsx)(h.l.Item,{disabled:!e.reference,selected:t,onSelect:()=>t?a():n(e.reference),children:e.path}):(0,i.jsx)(h.l.Item,{disabled:!e.reference,inactiveText:"Copilot is not available for this file",children:e.path}),p=({diffEntries:e,emptyState:t,filter:n,onSelectedReferencesChange:a,selectedReferences:r})=>{let l=(0,d.useMemo)(()=>{let t=n.toLowerCase(),i=[];for(let n of e??[])n.path.toLowerCase().includes(t)&&i.push(n);return i},[e,n]),s=(e,t)=>a(function(e,[t,n]){let i=new Map(e);return i.set(t,n),i}(r,[e,t])),o=e=>a(function(e,t){let n=new Map(e);return n.delete(t),n}(r,e));return 0===l.length?t:(0,i.jsx)(h.l,{children:l.map(e=>(0,i.jsx)(f,{entry:e,selected:r.has(e.path),onSelect:t=>s(e.path,t),onDeselect:()=>o(e.path)},e.path))})};try{f.displayName||(f.displayName="EntryItem")}catch{}try{p.displayName||(p.displayName="DiffEntriesList")}catch{}let g=(0,d.memo)(function({anchorProps:e,diffEntries:t,onSubmit:n}){let[a,r]=(0,d.useState)(""),[l,s]=(0,d.useState)(()=>new Map),o=(0,d.useRef)(null),c=(0,d.useRef)(null);return(0,d.useEffect)(function(){let e=o.current,t=c.current?.getBoundingClientRect(),n=e?.querySelector("dialog");t&&n&&(n.style.left="auto",n.style.right=`${document.body.clientWidth-t.right}px`)}),(0,d.useEffect)(function(){let e=o.current?.querySelector('dialog button[type="submit"]');e&&(e.textContent="Start chat")}),(0,i.jsx)("div",{ref:o,children:(0,i.jsxs)(m.X,{title:"Select files to discuss",onSubmit:()=>n(Array.from(l.values())),anchorRef:c,children:[(0,i.jsx)(m.X.Button,{...e}),(0,i.jsx)(m.X.Header,{children:(0,i.jsx)(m.X.SearchInput,{onChange:e=>r(e.target.value)})}),(0,i.jsx)(p,{diffEntries:t,filter:a,selectedReferences:l,onSelectedReferencesChange:s,emptyState:(0,i.jsx)(m.X.Message,{variant:"empty",title:"No files found",children:"Try a different search term"})}),(0,i.jsx)(m.X.Footer,{})]})})});try{g.displayName||(g.displayName="AskCopilotDiffEntriesSelectPanel")}catch{}var x=n(96558);let y={id:x.wX,size:"small",leadingVisual:s.CopilotIcon,children:"Ask Copilot",trailingVisual:s.TriangleDownIcon,className:u.A.askCopilotButton,"aria-controls":x.wJ,"aria-expanded":!1},b=e=>{(0,a.qR)({id:x.wX,intent:r.wh.conversation,references:e}),(0,l.BI)("copilot.file-diff-header.discuss")},v=(0,d.memo)(function({entriesData:e}){return 0===e.length?(0,i.jsx)(c.Uw,{}):1===e.length?(0,i.jsx)(C,{diffEntry:e[0],onSubmit:b}):(0,i.jsx)(g,{diffEntries:e,anchorProps:y,onSubmit:b})}),C=({diffEntry:e,onSubmit:t})=>e?.reference===void 0?(0,i.jsx)(c.Uw,{}):(0,i.jsx)(o.Q,{...y,onClick:()=>t([e.reference]),trailingVisual:null});try{v.displayName||(v.displayName="DiffHeaderAskCopilotButton")}catch{}try{C.displayName||(C.displayName="SingleFileAskCopilotButton")}catch{}},15673:(e,t,n)=>{n.d(t,{A:()=>P});var i=n(74848),a=n(96540),r=n(40961),l=n(78135),s=n(38621),o=n(91321),d=n(89323),c=n(87330),u=n(8338),m=n(20053),h=n(91618),f=n(77342),p=n(46988),g=n(18447);let x="diff-lines-copilot-button",y=({fileDiffReference:e,afterSelect:t})=>(0,i.jsx)(g.c,{referenceType:e.type,onClick:()=>{(0,h.qR)({intent:f.wh.conversation,references:[e],id:x}),(0,p.BI)("copilot.file-diff.discuss"),t?.()},id:x});try{y.displayName||(y.displayName="DiffLinesAskCopilotButton")}catch{}let b={square:"DiffLinesMenu-module__square--wor4Z","diff-button":"DiffLinesMenu-module__diff-button--QKR13","diff-button-container":"DiffLinesMenu-module__diff-button-container--UrMbh"};var v=n(5993),C=n(35149);let j=({fileDiffReference:e,onOpenChange:t})=>{let[n,r]=(0,a.useState)(!1),l=e=>{r(e),t?.(e)},h=(0,a.useRef)(null),f=()=>l(!1);return(0,i.jsxs)(o.A,{className:b["diff-button-container"],children:[(0,i.jsx)(y,{fileDiffReference:e,afterSelect:f}),(0,i.jsxs)(d.W,{open:n,onOpenChange:l,anchorRef:h,children:[(0,i.jsx)(d.W.Anchor,{children:(0,i.jsx)(c.K,{icon:s.TriangleDownIcon,"aria-label":"Copilot menu",ref:h,onSelect:()=>l(!0),size:"small",className:(0,m.$)(b.square,b["diff-button"]),"data-testid":"more-copilot-button"})}),(0,i.jsx)(d.W.Overlay,{align:"end",children:(0,i.jsxs)(u.l,{children:[(0,i.jsx)(v.e,{fileDiffReference:e,afterSelect:f}),(0,i.jsx)(u.l.Divider,{}),(0,i.jsx)(C.i,{fileDiffReference:e,afterSelect:f})]})})]})]})};try{j.displayName||(j.displayName="DiffLinesMenu")}catch{}var w=n(29063);function N(e,t=Element){let n=(0,a.useRef)(void 0);return(0,a.useSyncExternalStore)(e=>{let t=new MutationObserver(()=>e());return t.observe(document.body,{subtree:!0,childList:!0}),()=>t.disconnect()},()=>{var i;let a=Array.from(document.querySelectorAll(e)).filter(e=>e instanceof t);return n.current&&(i=n.current).length===a.length&&i.every((e,t)=>e===a[t])?n.current:n.current=a})}var S=n(61720);let k=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),E=e=>(0,a.useSyncExternalStore)(k,()=>e?.contains(document.activeElement)),L=()=>{let e=(0,a.useSyncExternalStore)(e=>(window.addEventListener(S.o.NAME,e),()=>window.removeEventListener(S.o.NAME,e)),()=>window.location.hash),t=(0,w.ZD)(e);if(!t)return null;let n=document.querySelector(".selected-line.selected-line-top.blob-code:not(.js-skip-tagsearch)"),i=document.querySelector(".selected-line.selected-line-top.blob-code.js-skip-tagsearch"),r=n??i;return r?{...t,topRightElement:r}:null},A=()=>{let[e,t]=(0,a.useState)(),n=N("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement);if((0,a.useEffect)(()=>{function e(){t(this)}function i(){t(void 0)}for(let t of n)t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",i);return()=>{for(let t of n)t.removeEventListener("mouseenter",e),t.removeEventListener("mouseleave",i)}},[n]),!e)return null;let[i,r]=e?.parentElement?.querySelectorAll("td.blob-num")??[],l=i?.id||r?.id||void 0,s=l?(0,w.ZD)(l):void 0;return s?{...s,topRightElement:e}:null},D=()=>{let e=N("td.blob-code:not(.blob-code-empty)",HTMLTableCellElement),[t,n]=(0,a.useState)();(0,a.useEffect)(()=>{function t(){n(this)}for(let n of e)n.addEventListener("focusin",t);return()=>{for(let n of e)n.removeEventListener("focusin",t)}},[e]);let i=E(t);if((0,a.useEffect)(()=>{i||n(void 0)},[i]),!t)return null;let[r,l]=t?.parentElement?.querySelectorAll("td.blob-num")??[],s=r?.id||l?.id||void 0,o=s?(0,w.ZD)(s):void 0;return o?{...o,topRightElement:t}:null},_=()=>{let e=new Map,t=A();t&&e.set(t.diffAnchor,t);let n=L();n&&e.set(n.diffAnchor,n);let i=D();return i&&e.set(i.diffAnchor,i),e};var R=n(67136);let I=({fileDiffReference:e})=>{let{addToast:t}=(0,R.Y6)();return void 0===e?(0,i.jsx)(T,{inactiveText:"Copilot is not available for this file type"}):(0,i.jsx)(T,{handleAttach:()=>{(0,h.Oc)(e),t({message:"Reference added to thread",type:"success"}),(0,p.BI)("copilot.file-diff.menu.add")},handleDiscuss:()=>{(0,h.qR)({intent:f.wh.conversation,references:[e]}),(0,p.BI)("copilot.file-diff.menu.discuss")}})},T=({handleDiscuss:e,handleAttach:t,inactiveText:n})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F,{text:"Ask Copilot about this diff",onClick:e,inactiveText:n}),(0,i.jsx)(F,{text:"Attach to current thread",onClick:t,inactiveText:n})]});function F({onClick:e,inactiveText:t,text:n}){return t?(0,i.jsx)("button",{type:"button",disabled:!0,role:"menuitem",className:"px-5 dropdown-item btn-link","aria-label":t,children:n}):(0,i.jsx)("button",{type:"button",role:"menuitem",className:"px-5 dropdown-item btn-link",onClick:e,children:n})}try{I.displayName||(I.displayName="DiffEntryMenuItems")}catch{}try{T.displayName||(T.displayName="BuildMenu")}catch{}try{F.displayName||(F.displayName="BuildItemForRailsMenu")}catch{}let O=()=>(0,a.useSyncExternalStore)(e=>(l.M.store.addEventListener("update",e),()=>l.M.store.removeEventListener("update",e)),()=>l.M.store.entries),M=({fileDiffReference:e,activeLines:t})=>{let[n,l]=(0,a.useState)(!1),s=(0,a.useRef)(t),o=n?s.current:t;if(s.current=o,!o)return null;let d={...e,selectedRange:{start:`${o.startOrientation[0]?.toUpperCase()??""}${o.startLineNumber}`,end:`${o.endOrientation[0]?.toUpperCase()??""}${o.endLineNumber}`}};return(0,r.createPortal)((0,i.jsx)(j,{fileDiffReference:d,onOpenChange:l}),o.topRightElement)},$=({entryElement:{menuItemsSlot:e},fileDiffReference:t,activeLines:n})=>(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(M,{fileDiffReference:t,activeLines:n}),e&&(0,r.createPortal)((0,i.jsx)(I,{fileDiffReference:t}),e)]}),P=({entriesData:e})=>{let t=O(),n=_();return(0,a.useMemo)(()=>{let a=[],r=e.reduce((e,t)=>(t.reference&&e.set(t.path,t.reference),e),new Map);return Array.from(t).map(e=>{let t=r.get(e.filePath);t&&a.push((0,i.jsx)($,{entryElement:e,fileDiffReference:t,activeLines:n.get(t.id)},e.filePath))}),a},[n,e,t])};try{M.displayName||(M.displayName="InjectedDiffButton")}catch{}try{$.displayName||($.displayName="InjectedDiffEntry")}catch{}try{P.displayName||(P.displayName="InjectedDiffEntries")}catch{}},20317:(e,t,n)=>{n.d(t,{Uw:()=>u,Y7:()=>h,yJ:()=>m});var i=n(74848),a=n(38621),r=n(55847),l=n(94977),s=n(96540),o=n(32138),d=n(96558);let c={id:d.wX,size:"small",leadingVisual:a.CopilotIcon,className:o.A.askCopilotButton,children:"Ask Copilot",trailingVisual:a.TriangleDownIcon,"aria-controls":d.wJ,"aria-expanded":!1};function u(){return(0,i.jsx)(l.A,{"aria-label":"Copilot is not available for this pull request",children:(0,i.jsx)(r.Q,{...c,disabled:!0})})}let m=(0,s.memo)(function(){return(0,i.jsx)(l.A,{"aria-label":"Copilot failed to load",children:(0,i.jsx)(r.Q,{...c,disabled:!0})})}),h=(0,s.memo)(function(){return(0,i.jsx)(l.A,{"aria-label":"Loading Copilot features\u2026",children:(0,i.jsx)(r.Q,{...c,disabled:!0})})});try{u.displayName||(u.displayName="UnavailableAskCopilotButton")}catch{}try{m.displayName||(m.displayName="ErrorAskCopilotButton")}catch{}try{h.displayName||(h.displayName="LoadingAskCopilotButton")}catch{}},35149:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(74848),a=n(91618),r=n(46988),l=n(67136),s=n(8338);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:o}=(0,l.Y6)();return(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,a.Oc)(e),o({message:"Reference added to thread",type:"success"}),(0,r.BI)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},39298:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(74848),a=n(91618),r=n(77342),l=n(46988),s=n(8338);let o=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:o})=>(0,i.jsxs)(s.l.Item,{onSelect:()=>{(0,a.qR)({intent:r.wh.conversation,references:[e]}),(0,l.BI)("copilot.file-diff.discuss",n),o?.()},children:[t&&(0,i.jsx)(s.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{o.displayName||(o.displayName="DiffLinesDiscussMenuItem")}catch{}},5993:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(74848),a=n(91618),r=n(77342),l=n(46988),s=n(8338);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,a.qR)({content:"Explain",intent:r.wh.explainFileDiff,references:[e]}),(0,l.BI)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{o.displayName||(o.displayName="DiffLinesExplainMenuItem")}catch{}},10712:(e,t,n)=>{n.d(t,{eL:()=>g,oj:()=>j});var i=n(74848),a=n(21728),r=n(38621),l=n(96540),s=n(12719),o=n(34614),d=n(7284),c=n(26920),u=n(58599),m=n(28448),h=n(29063),f=n(47584);let p={"file-tree-row":"DiffFileTree-module__file-tree-row--yr73E"},g="diff_file_tree",x=(0,l.memo)(function(e){let t;let n=(0,a.c)(2),{changeType:r}=e;return n[0]!==r?(t=(0,i.jsx)(u.E,{status:r}),n[0]=r,n[1]=t):t=n[1],t});x.displayName="FileStatusIconItem";let y=(0,l.memo)(function(e){let t,n,c,u,h,y,b,v,C,j;let w=(0,a.c)(44),{file:N,depth:S,hash:k,onSelect:E}=e,L=(0,l.useRef)(null),A=(0,l.useRef)(null),D=`#diff-${N.diff.pathDigest}`;w[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:L,mouseRowRef:L},w[0]=t):t=w[0];let _=(0,m.Z)(t),R=N.diff.totalCommentsCount??0,I=N.diff.highestAnnotationLevel,T=null,F=null;switch(I){case"WARNING":{let e,t;let n=R>0?"and ":"";w[1]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has warning annotations"]}),w[1]=n,w[2]=e):e=w[2],F=e,w[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,i.jsx)(r.AlertIcon,{})}),w[3]=t):t=w[3],T=t;break}case"NOTICE":{let e,t;let n=R>0?"and ":"";w[4]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has notice annotations"]}),w[4]=n,w[5]=e):e=w[5],F=e,w[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-default",children:(0,i.jsx)(r.InfoIcon,{})}),w[6]=t):t=w[6],T=t;break}case"FAILURE":{let e,t;let n=R>0?"and ":"";w[7]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has failure annotations"]}),w[7]=n,w[8]=e):e=w[8],F=e,w[9]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,i.jsx)(r.XCircleFillIcon,{})}),w[9]=t):t=w[9],T=t}}w[10]!==N.diff.pathDigest||w[11]!==k?(n=()=>{if(L.current&&N.diff.pathDigest===k){let e=window.setTimeout(()=>{let e=f.XC?.getElementById(g)?.parentElement,t=L.current.offsetTop,n=f.cg?.innerHeight??0;e&&(e.scrollTop=t-n/2)},0);return()=>{window.clearTimeout(e)}}},c=[N.diff.pathDigest,k],w[10]=N.diff.pathDigest,w[11]=k,w[12]=n,w[13]=c):(n=w[12],c=w[13]),(0,l.useEffect)(n,c),w[14]!==D||w[15]!==N.diff||w[16]!==E?(u=e=>{if(e.nativeEvent instanceof KeyboardEvent){if(L?.current!==document.activeElement){e.preventDefault();return}if("Enter"===e.key||" "===e.key){e.preventDefault(),E?.(N.diff),A?.current?.click();return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(D,"_blank");return}E?.(N.diff),A?.current?.click()}},w[14]=D,w[15]=N.diff,w[16]=E,w[17]=u):u=w[17];let O=u,M=N.diff.pathDigest===k;return w[18]!==N.diff.changeType?(h=(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(x,{changeType:N.diff.changeType})}),w[18]=N.diff.changeType,w[19]=h):h=w[19],w[20]!==D||w[21]!==N.fileName?(y=(0,i.jsx)(o.A,{href:D,muted:!0,ref:A,role:"presentation",className:"fgColor-default",tabIndex:-1,children:N.fileName}),w[20]=D,w[21]=N.fileName,w[22]=y):y=w[22],w[23]!==N.fileName||w[24]!==_?(b=_&&(0,i.jsx)(d.m,{"data-testid":`${N.fileName}-item-tooltip`,id:`${N.fileName}-item-tooltip`,contentRef:L,"aria-label":N.fileName,open:!0,direction:"ne"}),w[23]=N.fileName,w[24]=_,w[25]=b):b=w[25],w[26]!==R?(v=!!R&&(0,i.jsxs)("span",{className:"sr-only",children:["has ",R<10?R:"9+"," ",R>1?"comments":"comment"]}),w[26]=R,w[27]=v):v=w[27],w[28]!==T||w[29]!==I||w[30]!==R?(C=(!!R||I)&&(0,i.jsx)(s.G.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:R<10?R:"9+"})]}),T]})}),w[28]=T,w[29]=I,w[30]=R,w[31]=C):C=w[31],w[32]!==F||w[33]!==S||w[34]!==N.diff.path||w[35]!==N.diff.pathDigest||w[36]!==O||w[37]!==C||w[38]!==M||w[39]!==h||w[40]!==y||w[41]!==b||w[42]!==v?(j=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{defaultExpanded:!0,"aria-level":S,current:M,id:N.diff.path,onSelect:O,ref:L,className:p["file-tree-row"],children:[h,y,b,v,F,C]},N.diff.pathDigest)}),w[32]=F,w[33]=S,w[34]=N.diff.path,w[35]=N.diff.pathDigest,w[36]=O,w[37]=C,w[38]=M,w[39]=h,w[40]=y,w[41]=b,w[42]=v,w[43]=j):j=w[43],j});function b(e){let t,n,r,o,c,u,h,f,p,g,x,y;let j=(0,a.c)(43);j[0]!==e?({directory:t,renderPattern:r,depth:o,leadingPath:c,...n}=e,j[0]=e,j[1]=t,j[2]=n,j[3]=r,j[4]=o,j[5]=c):(t=j[1],n=j[2],r=j[3],o=j[4],c=j[5]);let w=void 0===o?0:o,N=void 0===c?"":c,S=N?`${N}/`:"",k=l.useRef(null),E=l.useRef(null);j[6]===Symbol.for("react.memo_cache_sentinel")?(u={focusRowRef:E,mouseRowRef:k},j[6]=u):u=j[6];let L=(0,m.Z)(u);if(!t.files.length&&1===t.directories.length){let e,a;if(j[7]!==w||j[8]!==t.directories||j[9]!==t.name||j[10]!==n||j[11]!==S||j[12]!==r){let a;j[14]!==w||j[15]!==t.name||j[16]!==n||j[17]!==S||j[18]!==r?(a=e=>(0,i.jsx)(b,{depth:0===w?1:w,directory:e,leadingPath:`${S}${t.name}`,renderPattern:r,...n},e.path),j[14]=w,j[15]=t.name,j[16]=n,j[17]=S,j[18]=r,j[19]=a):a=j[19],e=t.directories.map(a),j[7]=w,j[8]=t.directories,j[9]=t.name,j[10]=n,j[11]=S,j[12]=r,j[13]=e}else e=j[13];return j[20]!==e?(a=(0,i.jsx)(i.Fragment,{children:e}),j[20]=e,j[21]=a):a=j[21],a}j[22]!==w||j[23]!==t||j[24]!==n||j[25]!==r?(h=function(){return"traditional"===r?(0,i.jsx)(v,{directory:t,depth:w,renderPattern:r,...n}):(0,i.jsx)(C,{directory:t,depth:w,renderPattern:r,...n})},j[22]=w,j[23]=t,j[24]=n,j[25]=r,j[26]=h):h=j[26];let A=h;if(0===w){let e;return j[27]!==A?(e=A(),j[27]=A,j[28]=e):e=j[28],e}j[29]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(s.G.DirectoryIcon,{})}),j[29]=f):f=j[29];let D=`${S}${t.name}`;return j[30]!==D?(p=(0,i.jsx)("span",{ref:k,children:D}),j[30]=D,j[31]=p):p=j[31],j[32]!==t.name||j[33]!==S||j[34]!==L?(g=L&&(0,i.jsx)(d.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:E,"aria-label":`${S}${t.name}`,open:!0,direction:"ne"}),j[32]=t.name,j[33]=S,j[34]=L,j[35]=g):g=j[35],j[36]!==A?(x=(0,i.jsx)(s.G.SubTree,{children:A()}),j[36]=A,j[37]=x):x=j[37],j[38]!==t.path||j[39]!==p||j[40]!==g||j[41]!==x?(y=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{ref:E,defaultExpanded:!0,id:t.path,children:[f,p,g,x]},t.path)}),j[38]=t.path,j[39]=p,j[40]=g,j[41]=x,j[42]=y):y=j[42],y}let v=(0,l.memo)(function(e){let t,n,r,l,s,o;let d=(0,a.c)(17);d[0]!==e?({directory:t,renderPattern:r,depth:l,...n}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r,d[4]=l):(t=d[1],n=d[2],r=d[3],l=d[4]);let c=void 0===l?0:l;if(d[5]!==c||d[6]!==t.directories||d[7]!==t.files||d[8]!==n||d[9]!==r){let e;let a=t.files.map(w).concat(t.directories.map(N));a.sort(S),d[11]!==c||d[12]!==n||d[13]!==r?(e=e=>"file"===e.pathType?(0,i.jsx)(y,{depth:c+1,file:e.node,...n},e.path):(0,i.jsx)(b,{depth:c+1,directory:e.node,renderPattern:r,...n},e.path),d[11]=c,d[12]=n,d[13]=r,d[14]=e):e=d[14],s=a.map(e),d[5]=c,d[6]=t.directories,d[7]=t.files,d[8]=n,d[9]=r,d[10]=s}else s=d[10];return d[15]!==s?(o=(0,i.jsx)(i.Fragment,{children:s}),d[15]=s,d[16]=o):o=d[16],o});function C(e){let t,n,r,l,s,o;let d=(0,a.c)(21);d[0]!==e?({directory:t,depth:r,...n}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r):(t=d[1],n=d[2],r=d[3]);let c=void 0===r?0:r;if(d[4]!==c||d[5]!==t.files||d[6]!==n){let e;d[8]!==c||d[9]!==n?(e=e=>(0,i.jsx)(y,{depth:c+1,file:e,...n},e.filePath),d[8]=c,d[9]=n,d[10]=e):e=d[10],l=t.files.map(e),d[4]=c,d[5]=t.files,d[6]=n,d[7]=l}else l=d[7];if(d[11]!==c||d[12]!==t.directories||d[13]!==n){let e;d[15]!==c||d[16]!==n?(e=e=>(0,i.jsx)(b,{depth:c+1,directory:e,...n},e.path),d[15]=c,d[16]=n,d[17]=e):e=d[17],s=t.directories.map(e),d[11]=c,d[12]=t.directories,d[13]=n,d[14]=s}else s=d[14];return d[18]!==l||d[19]!==s?(o=(0,i.jsxs)(i.Fragment,{children:[l,s]}),d[18]=l,d[19]=s,d[20]=o):o=d[20],o}let j=(0,l.memo)(function(e){let t,n,r,o,d,u,m,p;let g=(0,a.c)(14);g[0]!==e?({diffs:t,renderPattern:r,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r):(t=g[1],n=g[2],r=g[3]),g[4]!==t?(o=(0,c.xY)(t),g[4]=t,g[5]=o):o=g[5];let x=o,[y,v]=l.useState("");g[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{v(((0,h.pd)(f.fV.hash??"")??"").replace("diff-",""))},g[6]=d):d=g[6];let C=d;return g[7]===Symbol.for("react.memo_cache_sentinel")?(u=()=>(window.addEventListener("hashchange",C),C(),()=>{window.removeEventListener("hashchange",C)}),m=[C],g[7]=u,g[8]=m):(u=g[7],m=g[8]),(0,l.useEffect)(u,m),g[9]!==n||g[10]!==x||g[11]!==y||g[12]!==r?(p=(0,i.jsx)(s.G,{"aria-label":"File Tree",children:(0,i.jsx)(b,{directory:x,renderPattern:r,...n,hash:y})}),g[9]=n,g[10]=x,g[11]=y,g[12]=r,g[13]=p):p=g[13],p});try{y.displayName||(y.displayName="File")}catch{}try{b.displayName||(b.displayName="Directory")}catch{}try{v.displayName||(v.displayName="TraditionalDirectoryRendering")}catch{}try{C.displayName||(C.displayName="GroupedDirectoryRendering")}catch{}try{j.displayName||(j.displayName="DiffFileTree")}catch{}function w(e){return{path:e.filePath,pathType:"file",node:e}}function N(e){return{path:e.path,pathType:"directory",node:e}}function S(e,t){return(0,c.wH)(e.path,t.path)}},3240:(e,t,n)=>{n.d(t,{kF:()=>g,F7:()=>p});var i,a=n(74848),r=n(21728),l=n(38621),s=n(67138),o=n(89323),d=n(87330),c=n(63867),u=n(8338),m=n(96540),h=n(20053);let f={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},p="No extension";function g({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFilterChange:r,additionalFilterGroups:c}){n=n??{},i=i??new Set;let[h,f]=(0,m.useState)(e),g=(e,t)=>{r?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Object.keys(n).filter(e=>e!==p).sort(),y=e=>!i.has(e),b=!!n[p];return(0,a.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,a.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:l.SearchIcon,placeholder:"Filter files\u2026",value:h,onChange:e=>{f(e.target.value),t?.(e.target.value)}}),(0,a.jsxs)(o.W,{children:[(0,a.jsx)(o.W.Anchor,{children:(0,a.jsx)(d.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:l.SlidersIcon,className:"flex-shrink-0"})}),(0,a.jsx)(o.W.Overlay,{children:(0,a.jsxs)(u.l,{children:[(0,a.jsxs)(u.l.Group,{selectionVariant:"multiple",children:[(0,a.jsx)(u.l.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,a.jsx)(u.l.Item,{selected:t,onSelect:()=>g(!t,e),children:`${e} (${n[e]})`},e)}),b&&(0,a.jsx)(u.l.Item,{selected:y(p),onSelect:()=>g(!y(p),p),children:`${p} (${n[p]})`},p)]}),c]})})]})]})}try{(i=function(e){let t,n,i,u,m;let p=(0,r.c)(9),{filterText:g,onFilterTextChange:x}=e;return p[0]!==x?(t=e=>x?.(e.target.value),p[0]=x,p[1]=t):t=p[1],p[2]!==g||p[3]!==t?(n=(0,a.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:l.SearchIcon,placeholder:"Filter files\u2026",value:g,onChange:t}),p[2]=g,p[3]=t,p[4]=n):n=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(o.W.Anchor,{children:(0,a.jsx)(d.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:l.SlidersIcon,className:"flex-shrink-0"})}),p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsxs)(o.W,{children:[i,(0,a.jsx)(o.W.Overlay,{className:(0,h.$)(f.filterLoadingHeight),children:(0,a.jsx)("div",{className:(0,h.$)("d-flex","flex-column","flex-justify-center","flex-items-center",f.filterLoadingHeight),children:(0,a.jsx)(c.A,{size:"medium"})})})]}),p[6]=u):u=p[6],p[7]!==n?(m=(0,a.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[n,u]}),p[7]=n,p[8]=m):m=p[8],m}).displayName||(i.displayName="FileFilterLoading")}catch{}try{g.displayName||(g.displayName="FileFilterShared")}catch{}},58599:(e,t,n)=>{n.d(t,{E:()=>l});var i=n(74848),a=n(21728),r=n(38621);function l(e){let t=(0,a.c)(4),{status:n}=e;switch(n){case"ADDED":case"COPIED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.FileAddedIcon,{size:16,className:"fgColor-success"}),t[0]=e):e=t[0],e}case"DELETED":case"REMOVED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.FileRemovedIcon,{size:16,className:"fgColor-danger"}),t[1]=e):e=t[1],e}case"RENAMED":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.FileMovedIcon,{size:16,className:"fgColor-attention"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.FileDiffIcon,{size:16,className:"fgColor-muted"}),t[3]=e):e=t[3],e}}}try{l.displayName||(l.displayName="FileStatusIcon")}catch{}},13253:(e,t,n)=>{n.d(t,{Y:()=>p,o:()=>h});var i=n(74848),a=n(13080),r=n(47584),l=n(96540),s=n(46996),o=n(90189),d=n(29063),c=n(45725),u=n(37109);let m=(0,l.createContext)(null);function h(){let e=(0,l.useContext)(m);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function f(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,a.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,a.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function p({children:e}){let t=(0,l.useRef)(new Map),n=(0,c.K)((e,n)=>{if(!e)return;let i=e.diffAnchor,a=t.current.get(i);if(!a)return;let{leftLines:r,rightLines:l}=(0,u.Mk)(a);return(0,o.A)({selectedDiffRowRange:e,leftLines:r,rightLines:l,isNumberCell:n})}),[h,p]=(0,l.useState)(()=>(0,d.ZD)(r.fV.hash)),[g,x]=(0,l.useState)(()=>{if(h){let e=n(h);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),y=(0,c.K)((e,t)=>{let i=n(e,t),a=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,s.A)(g,a)||x(a)}),b=(0,c.K)((e,t,n,i,a)=>{if(!t||!n)return;let r=i&&h&&h.diffAnchor===e?t<=h.firstSelectedLineNumber?{...h,startLineNumber:t,startOrientation:n,endLineNumber:h.firstSelectedLineNumber,endOrientation:h.firstSelectedOrientation}:{...h,startLineNumber:h.firstSelectedLineNumber,startOrientation:h.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};f(r),(a||i)&&p(r),y(r,a),(0,d.i8)(r)}),v=(0,c.K)(e=>{f(e),p(e),y(e),(0,d.i8)(e)}),C=(0,c.K)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{v({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),j=(0,c.K)(()=>{h&&(p(void 0),y(void 0),(0,a.i)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),w=(0,c.K)((e,n)=>{t.current.set(e,n),h?.diffAnchor===e&&y(h)}),N=(0,c.K)(e=>t.current.get(e)),S=(0,l.useMemo)(()=>({selectedDiffRowRange:h,updateSelectedDiffRowRange:b,clearSelectedDiffRowRange:j,replaceSelectedDiffRowRange:v,replaceSelectedDiffRowRangeFromGridCells:C,updateDiffLines:w,selectedDiffLines:g,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:N}),[h,b,j,v,C,g,w,n,N]);return(0,i.jsx)(m.Provider,{value:S,children:e})}try{m.displayName||(m.displayName="SelectedDiffRowRange")}catch{}try{p.displayName||(p.displayName="SelectedDiffRowRangeContextProvider")}catch{}},47326:(e,t,n)=>{n.d(t,{G:()=>$});var i=n(74848),a=n(21728),r=n(38621),l=n(89323),s=n(8338),o=n(20053),d=n(84217),c=n(55847),u=n(98939),m=n(96540),h=n(56176),f=n(5796),p=n(86365),g=n(57572);function x(e){return!e.dismissed}function y(e){return 0===(function(){let e,t;let n=(0,a.c)(5),i=(0,p.B)();if(!i){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0],e}n[1]!==i.userNotices?(e=i.userNotices??[],n[1]=i.userNotices,n[2]=e):e=n[2];let r=e;return n[3]!==r?(t=r.filter(x),n[3]=r,n[4]=t):t=n[4],t})().filter(t=>t.name===e).length}var b=n(97665),v=n(94747),C=n(86617);function j(e){let t,n,i,r,l;let s=(0,a.c)(11),{onSuccess:o,onError:d}=e,c=(0,b.jE)();return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=async e=>{let{commentsPreference:t,lineSpacing:n,splitPreference:i}=e;if(!(0,h.M3)())return;let a={};t&&(a={...a,commentsPreference:t}),n&&(a={...a,lineSpacing:n}),i&&(a={...a,diff:i});let r=await (0,g.Sr)("/users/diffview",{method:"POST",headers:{Accept:"application/json"},body:a}),l=await r.json();if(r.ok)return l;throw Error(l.error||"Unknown error occurred",{cause:r.status})},s[0]=t):t=s[0],s[1]!==c?(n=async e=>{c.setQueryData((0,C.nZ)(),t=>({...t,...e}))},s[1]=c,s[2]=n):n=s[2],s[3]!==o?(i=()=>{o()},s[3]=o,s[4]=i):i=s[4],s[5]!==d?(r=e=>{d(e)},s[5]=d,s[6]=r):r=s[6],s[7]!==n||s[8]!==i||s[9]!==r?(l={mutationFn:t,onMutate:n,onSuccess:i,onError:r},s[7]=n,s[8]=i,s[9]=r,s[10]=l):l=s[10],(0,v.n)(l)}let w="compact_diff_lines";function N(){let e,t,n,r,l,s,o,p,x,b,v,C,N;let E=(0,a.c)(22),L=y(w),{dismissNotice:A}=function(e){let t,n;let i=(0,a.c)(5),r=y(e);i[0]!==r||i[1]!==e?(t=()=>{(0,h.M3)()&&!r&&(0,g.DI)((0,f.VB1)({noticeName:e}),{method:"POST"})},i[0]=r,i[1]=e,i[2]=t):t=i[2];let l=t;return i[3]!==l?(n={dismissNotice:l},i[3]=l,i[4]=n):n=i[4],n}(w);E[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:k,onError:S},E[0]=e):e=E[0];let{mutate:D}=j(e),[_,R]=(0,m.useState)(!0);E[1]!==A||E[2]!==D?(t=()=>{D({lineSpacing:"compact"}),R(!1),A()},E[1]=A,E[2]=D,E[3]=t):t=E[3];let I=t;E[4]!==A?(n=()=>{R(!1),A()},E[4]=A,E[5]=n):n=E[5];let T=n;return L?null:(E[6]===Symbol.for("react.memo_cache_sentinel")?(r={top:"60px",right:"-4px"},E[6]=r):r=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(l={minWidth:"260px",width:"40%"},E[7]=l):l=E[7],E[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(d.A,{sx:{fontSize:2},as:"h2",children:"Customizable line height"}),o=(0,i.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),E[8]=s,E[9]=o):(s=E[8],o=E[9]),E[10]===Symbol.for("react.memo_cache_sentinel")?(p={flexShrink:0,flexGrow:1},E[10]=p):p=E[10],E[11]!==I?(x=(0,i.jsx)(c.Q,{onClick:I,sx:p,children:"Enable compact line height"}),E[11]=I,E[12]=x):x=E[12],E[13]===Symbol.for("react.memo_cache_sentinel")?(b={color:"accent.fg",flexGrow:1},E[13]=b):b=E[13],E[14]!==T?(v=(0,i.jsx)(c.Q,{onClick:T,variant:"invisible",sx:b,alignContent:"center",children:"Dismiss"}),E[14]=T,E[15]=v):v=E[15],E[16]!==v||E[17]!==x?(C=(0,i.jsxs)(u.A.Content,{className:"d-flex flex-column gap-2",sx:l,children:[s,o,(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[x,v]})]}),E[16]=v,E[17]=x,E[18]=C):C=E[18],E[19]!==_||E[20]!==C?(N=(0,i.jsx)(u.A,{open:_,caret:"top-right",sx:r,children:C}),E[19]=_,E[20]=C,E[21]=N):N=E[21],N)}function S(){}function k(){}try{N.displayName||(N.displayName="DiffCompactLinesPopover")}catch{}function E(e){let t,n,r,l,o;let d=(0,a.c)(15),{lineSpacingPreferenceAvailable:c,reloadOnChange:u}=e,m=void 0===c||c,h=void 0!==u&&u,{data:f}=(0,C.Pe)();d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:A,onError:L},d[0]=t):t=d[0];let{mutate:p}=j(t),g=(0,b.jE)();d[1]!==f||d[2]!==g||d[3]!==h?(n=()=>{f&&(g.setQueryData((0,C.nZ)(),e=>({...e,hideWhitespace:!f.hideWhitespace})),(0,C.bJ)("w",f.hideWhitespace?"0":"1"),h&&window.location.reload())},d[1]=f,d[2]=g,d[3]=h,d[4]=n):n=d[4];let x=n;return f?(d[5]!==f.hideWhitespace||d[6]!==x?(r=(0,i.jsx)(s.l.Item,{selected:f.hideWhitespace,onSelect:x,children:"Hide whitespace"}),d[5]=f.hideWhitespace,d[6]=x,d[7]=r):r=d[7],d[8]!==f.lineSpacing||d[9]!==m||d[10]!==p?(l=m&&(0,i.jsx)(s.l.Item,{selected:"compact"===f.lineSpacing,onSelect:()=>p({lineSpacing:"compact"===f.lineSpacing?"relaxed":"compact"}),children:"Compact line height"}),d[8]=f.lineSpacing,d[9]=m,d[10]=p,d[11]=l):l=d[11],d[12]!==r||d[13]!==l?(o=(0,i.jsxs)(s.l.Group,{selectionVariant:"multiple",variant:"subtle",children:[r,l]}),d[12]=r,d[13]=l,d[14]=o):o=d[14],o):null}function L(){}function A(){}try{E.displayName||(E.displayName="DiffLinePresentationToggles")}catch{}function D(e){let t,n,r,l,o,d,c;let u=(0,a.c)(17),{reloadOnChange:m}=e,h=void 0!==m&&m,{data:f}=(0,C.Pe)(),p=f?.splitPreference;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:R,onError:_},u[0]=t):t=u[0];let{mutate:g}=j(t);u[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(s.l.GroupHeading,{children:"Layout"}),u[1]=n):n=u[1];let x="unified"===p;u[2]!==h||u[3]!==g?(r=()=>{g({splitPreference:"unified"}),(0,C.bJ)("diff","unified"),h&&window.location.reload()},u[2]=h,u[3]=g,u[4]=r):r=u[4],u[5]!==x||u[6]!==r?(l=(0,i.jsx)(s.l.Item,{selected:x,onSelect:r,children:"Unified"}),u[5]=x,u[6]=r,u[7]=l):l=u[7];let y="split"===p;return u[8]!==h||u[9]!==g?(o=()=>{g({splitPreference:"split"}),(0,C.bJ)("diff","split"),h&&window.location.reload()},u[8]=h,u[9]=g,u[10]=o):o=u[10],u[11]!==y||u[12]!==o?(d=(0,i.jsx)(s.l.Item,{selected:y,onSelect:o,children:"Split"}),u[11]=y,u[12]=o,u[13]=d):d=u[13],u[14]!==l||u[15]!==d?(c=(0,i.jsxs)(s.l.Group,{selectionVariant:"single",children:[n,l,d]}),u[14]=l,u[15]=d,u[16]=c):c=u[16],c}function _(){}function R(){}try{D.displayName||(D.displayName="DiffViewPreferenceToggle")}catch{}var I=n(46584),T=n(79658);function F(){let e,t,n,r,l,o,d;let c=(0,a.c)(15),{diff_inline_comments:u}=(0,I.h)(),{data:m}=(0,C.Pe)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:M,onError:O},c[0]=e):e=c[0];let{mutate:h}=j(e);if(!m||!u)return null;c[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.l.GroupHeading,{children:"Comments"}),c[1]=t):t=c[1];let f=m.commentsPreference===T.s.Collapsed;c[2]!==h?(n=()=>h({commentsPreference:T.s.Collapsed}),c[2]=h,c[3]=n):n=c[3],c[4]!==f||c[5]!==n?(r=(0,i.jsx)(s.l.Item,{selected:f,onSelect:n,children:"Collapsed"}),c[4]=f,c[5]=n,c[6]=r):r=c[6];let p=m.commentsPreference===T.s.Visible;return c[7]!==h?(l=()=>h({commentsPreference:T.s.Visible}),c[7]=h,c[8]=l):l=c[8],c[9]!==p||c[10]!==l?(o=(0,i.jsx)(s.l.Item,{selected:p,onSelect:l,children:"Expanded"}),c[9]=p,c[10]=l,c[11]=o):o=c[11],c[12]!==r||c[13]!==o?(d=(0,i.jsxs)(s.l.Group,{selectionVariant:"single",children:[t,r,o]}),c[12]=r,c[13]=o,c[14]=d):d=c[14],d}function O(){}function M(){}try{F.displayName||(F.displayName="DiffCommentsPreferenceToggle")}catch{}function $(e){let t,n,d,c,u,m,h,f,p,g,x;let y=(0,a.c)(22),{invisible:b,lineSpacingPreferenceAvailable:v,reloadOnSplitPreferenceChange:C,reloadOnWhitespaceChange:j,small:w}=e,S=void 0===v||v,k=void 0!==C&&C,L=void 0!==j&&j,A=void 0===b||b?"Button--invisible":"Button--secondary",_=w&&"Button--small";return y[0]!==A||y[1]!==_?(t=(0,o.$)("Button Button--iconOnly",A,_),y[0]=A,y[1]=_,y[2]=t):t=y[2],y[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(r.GearIcon,{}),y[3]=n):n=y[3],y[4]!==t?(d=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsx)("button",{className:t,"aria-label":"Open diff view settings",children:n})}),y[4]=t,y[5]=d):d=y[5],y[6]!==k?(c=(0,i.jsx)(D,{reloadOnChange:k}),y[6]=k,y[7]=c):c=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(F,{}),m=(0,i.jsx)(s.l.Divider,{}),y[8]=u,y[9]=m):(u=y[8],m=y[9]),y[10]!==S||y[11]!==L?(h=(0,i.jsx)(E,{lineSpacingPreferenceAvailable:S,reloadOnChange:L}),y[10]=S,y[11]=L,y[12]=h):h=y[12],y[13]!==c||y[14]!==h?(f=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsxs)(s.l,{children:[c,u,m,h]})}),y[13]=c,y[14]=h,y[15]=f):f=y[15],y[16]!==f||y[17]!==d?(p=(0,i.jsxs)(l.W,{children:[d,f]}),y[16]=f,y[17]=d,y[18]=p):p=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(g=(0,i.jsx)(N,{}),y[19]=g):g=y[19],y[20]!==p?(x=(0,i.jsxs)(i.Fragment,{children:[p,g]}),y[20]=p,y[21]=x):x=y[21],x}try{$.displayName||($.displayName="DiffViewSettings")}catch{}},78026:(e,t,n)=>{n.d(t,{L:()=>d});var i=n(74848),a=n(21728),r=n(38621),l=n(87330),s=n(94977),o=n(20053);let d=n(96540).forwardRef((e,t)=>{let n,d,c,u;let m=(0,a.c)(20),{expanded:h,testid:f,ariaLabel:p,ariaControls:g,onToggleExpanded:x,alignment:y,dataHotkey:b,className:v,tooltipDirection:C,variant:j}=e,w=`expand-button-${f}`,N=h?`collapse-${f}`:`expand-${f}`,S=`expand-button-${f}`,k=h?"left"===y?r.SidebarExpandIcon:r.SidebarCollapseIcon:"left"===y?r.SidebarCollapseIcon:r.SidebarExpandIcon;m[0]!==x?(n=e=>{x(e)},m[0]=x,m[1]=n):n=m[1];let E=j??"invisible";return m[2]!==v?(d=(0,o.$)(v,"fgColor-muted"),m[2]=v,m[3]=d):d=m[3],m[4]!==g||m[5]!==b||m[6]!==h||m[7]!==t||m[8]!==N||m[9]!==S||m[10]!==k||m[11]!==n||m[12]!==E||m[13]!==d?(c=(0,i.jsx)(l.K,{unsafeDisableTooltip:!0,ref:t,"data-testid":N,"aria-labelledby":S,"aria-expanded":h,"aria-controls":g,icon:k,"data-hotkey":b,onClick:n,variant:E,className:d}),m[4]=g,m[5]=b,m[6]=h,m[7]=t,m[8]=N,m[9]=S,m[10]=k,m[11]=n,m[12]=E,m[13]=d,m[14]=c):c=m[14],m[15]!==p||m[16]!==w||m[17]!==c||m[18]!==C?(u=(0,i.jsx)(s.A,{"aria-label":p,id:w,direction:C,children:c}),m[15]=p,m[16]=w,m[17]=c,m[18]=C,m[19]=u):u=m[19],u});d.displayName="ExpandButton"},8877:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(74848),a=n(94232),r=n(65481),l=n(75177),s=n(63867),o=n(52464),d=n(96540);let c={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function u(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function m(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}function h({identityUuid:e,size:t,type:n,url:o}){let[h]=(0,a.I)(()=>window.location.origin,"https://www.github.com",[]),p=new URL(o,h).origin,{renderState:g,errorMsg:x,iFrameRef:y,containerRef:b}=function(e){let[t,n]=function(e){let[t,n]=(0,d.useState)(e),i=(0,d.useRef)(t);return[i,e=>{i.current=e,n(e)}]}(c.LOADING),i=(0,d.useRef)(null),a=(0,d.useRef)(null),r=(0,d.useRef)(null),l=(0,d.useRef)({untimed:!0}),s=(0,d.useCallback)(t=>(function(e,t,n,i,a,r,l){if(e.origin!==t)return;let s=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!s){r(c.ERROR);return}let o=s.body,d=null!=s.payload?s.payload:void 0,u=n.current?.contentWindow;switch(o){case"hello":(a.current??{untimed:!0}).hello=Date.now(),m(u,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),m(u,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":d&&l(d.error??null),r(c.ERROR);break;case"loading":r(c.LOADING);break;case"loaded":r(c.LOADED);break;case"ready":d&&"number"==typeof d.height&&i.current&&(i.current.style.height=`${d.height}px`),r(c.READY);break;case"resize":d&&"number"==typeof d.height&&i.current&&(i.current.style.height=`${d.height}px`);break;case"code_rendering_service:container:get_size":m(u,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let n=e.getAttribute("data-content");if(!n)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(n).data,width:t.getBoundingClientRect().width}}};m(e.contentWindow,i)}(n.current,i.current)}})(t,e,a,r,l,n,e=>i.current=e),[e,n]);return(0,d.useEffect)(()=>{u(l.current);let e=e=>{(t.current===c.LOADING||t.current===c.LOADED)&&(!e||l.current.hello)&&n(c.ERROR)};return l.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{u(l.current)}},[t,n]),(0,d.useEffect)(()=>(window.addEventListener("message",s),()=>window.removeEventListener("message",s)),[s]),{renderState:t.current,errorMsg:i.current,iFrameRef:a,containerRef:r}}(p);if("ipynb"===n&&t>3e7||t>2e8)return(0,i.jsx)(r.A,{variant:"danger",children:"Sorry, this is too big to display."});let v=g!==c.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"};return(0,i.jsx)(l.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,i.jsxs)(l.A,{"data-hpc":!0,"data-host":p,"data-type":n,ref:b,sx:{width:1024,...g!==c.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...g===c.READY?{height:"500px",padding:0,background:"none"}:{}},children:[g===c.ERROR?(0,i.jsx)(f,{error:x}):g!==c.READY?(0,i.jsx)(s.A,{size:"large",sx:{mx:"auto"}}):null,g!==c.ERROR&&(0,i.jsx)(l.A,{as:"iframe",ref:y,src:`${o}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...v},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function f({error:e}){if(!e)return(0,i.jsx)(r.A,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,i.jsxs)(r.A,{variant:"danger",children:[(0,i.jsx)(o.A,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,i.jsx)("p",{children:t.map((e,t)=>(0,i.jsxs)(d.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{h.displayName||(h.displayName="FileRendererBlob")}catch{}try{f.displayName||(f.displayName="FileRendererErrorMessage")}catch{}},82091:(e,t,n)=>{n.d(t,{U:()=>o});var i=n(74848),a=n(53949),r=n(20053),l=n(21166);let s={container:"Description-module__container--b3n6F",compact:"Description-module__compact--SPRVh"};function o({children:e,style:t,className:n}){let{variant:o}=(0,l.e)();return(0,i.jsx)("div",{...(0,a.G)("list-view-item-description"),className:(0,r.$)(s.container,"compact"===o&&s.compact,n),style:t,children:e})}try{o.displayName||(o.displayName="ListItemDescription")}catch{}},30448:(e,t,n)=>{n.d(t,{Q:()=>c});var i=n(74848),a=n(53949),r=n(20053),l=n(96540),s=n(21166);let o={container:"MainContent-module__container--ry4iL",inner:"MainContent-module__inner--bU_tk",compact:"MainContent-module__compact--mM626"};var d=n(4535);function c({children:e}){let{variant:t}=(0,s.e)(),n=l.Children.toArray(e),c=n.findIndex(e=>(0,l.isValidElement)(e)&&"string"!=typeof e&&e.type===d.a),u=n[c],m=c<0?n:n.slice(0,c).concat(n.slice(c+1));return(0,i.jsxs)(i.Fragment,{children:[u,(0,i.jsx)("div",{...(0,a.G)("list-view-item-main-content"),className:o.container,children:(0,i.jsx)("div",{className:(0,r.$)(o.inner,"compact"===t&&o.compact),children:m})})]})}try{c.displayName||(c.displayName="ListItemMainContent")}catch{}},79910:(e,t,n)=>{n.d(t,{V:()=>s});var i=n(74848),a=n(53949),r=n(20053);let l={metadata:"Metadata-module__metadata--yvrod",secondary:"Metadata-module__secondary--zMgLx",primary:"Metadata-module__primary--cJgJU",alignRight:"Metadata-module__alignRight--rp0_Z"};function s({children:e,alignment:t,variant:n,...s}){return(0,i.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...s,className:(0,r.$)(l.metadata,"primary"===n?l.primary:l.secondary,"right"===t&&l.alignRight,s.className),children:e})}try{s.displayName||(s.displayName="ListItemMetadata")}catch{}},43943:(e,t,n)=>{n.d(t,{W:()=>en});var i=n(74848);let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"includesCreatedEdit",storageKey:null},i=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{alias:null,args:i,concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[a,{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[r,l,s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[o,d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MarkdownEditHistoryViewerQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,{kind:"InlineFragment",selections:[n,{alias:null,args:i,concreteType:"UserContentEditConnection",kind:"LinkedField",name:"userContentEdits",plural:!1,selections:[a,{alias:null,args:null,concreteType:"UserContentEditEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"node",plural:!1,selections:[r,l,s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[c,o,d,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"userContentEdits(first:100)"}],type:"Comment",abstractKey:"__isComment"},r],storageKey:null}]},params:{id:"c6113eea560ba83b319c9b30fc5d4f7e",metadata:{},name:"MarkdownEditHistoryViewerQuery",operationKind:"query",text:null}}}();a.hash="58ea81646b217a25de6cfe147936e7f6";let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownEditHistoryViewer_comment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lastEditedAt",storageKey:null}],type:"Comment",abstractKey:"__isComment"};r.hash="fcc1ee717c6a87a4ffdb4f4d9391d55c";var l=n(62456),s=n(4003),o=n(34407),d=n(75177),c=n(89323),u=n(8338),m=n(52464),h=n(89169),f=n(47139),p=n(96540),g=n(18312),x=n(30793);let y={couldNotDeleteEditRevision:"Failed to delete this revision",couldNotLoad:"Couldn't load"},b=({retry:e})=>(0,i.jsx)(x.h,{message:y.couldNotLoad,retry:e,sx:{p:4}});try{b.displayName||(b.displayName="CouldNotFindFallbackError")}catch{}let v=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"diffBefore",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditHistoryDialogQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[n,i,a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"EditHistoryDialogHeaderFragment"}],type:"UserContentEdit",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditHistoryDialogQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"InlineFragment",selections:[n,i,a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[l,r,s],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},r,s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null},s],storageKey:null}]},params:{id:"95112ed4d46018d629c28241b711a389",metadata:{},name:"EditHistoryDialogQuery",operationKind:"query",text:null}}}();v.hash="468f60acb1c6c8a75787e70fe36979a9";var C=n(75632),j=n(91246),w=n(91669);let N={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditHistoryDialogHeaderFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"editedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstEdit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanDelete",storageKey:null}],type:"UserContentEdit",abstractKey:null};N.hash="173b0fbf2e248d6057ccd670ace2eea7";var S=n(67136),k=n(38621),E=n(53526),L=n(55847),A=n(30729);let D={deleteEditRevision:"Delete revision"},_={ghostUserLogin:"ghost"},R=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"deletedAt",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"avatarUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"diff",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"deleteUserContentEditMutation",selections:[{alias:null,args:t,concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[n,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[a,r],storageKey:null},l],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"deleteUserContentEditMutation",selections:[{alias:null,args:t,concreteType:"DeleteUserContentEditPayload",kind:"LinkedField",name:"deleteUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"userContentEdit",plural:!1,selections:[n,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"deletedBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,r,n],storageKey:null},l],storageKey:null}],storageKey:null}]},params:{id:"71452b9f40a7828ac05811d1ad4f821e",metadata:{},name:"deleteUserContentEditMutation",operationKind:"mutation",text:null}}}();R.hash="45e1f3e7d425560f65ef39e8c357794d";let I=({queryRef:e,userContentEditId:t})=>{let n=(0,g.useFragment)(N,e),a=(0,g.useRelayEnvironment)(),r=(0,E.S)(),{addToast:l}=(0,S.Y6)(),s=(0,p.useCallback)(async()=>{await r({title:w.k.confirmations.deleteEditHistoryTitle,content:w.k.confirmations.deleteEditHistoryContent,confirmButtonType:"danger",confirmButtonContent:w.k.confirmations.deleteEditHistoryConfirmButtonContent})&&function({environment:e,input:{id:t},onCompleted:n,onError:i}){(0,g.commitMutation)(e,{mutation:R,variables:{input:{id:t}},onCompleted:e=>{null===e.deleteUserContentEdit?i?.():n?.()},onError:e=>i?.(e)})}({environment:a,input:{id:t},onError:()=>{l({type:"error",message:y.couldNotDeleteEditRevision})}})},[l,r,a,t]),o=n.newest||n.deletedAt;return(0,i.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",position:"sticky",top:0,backgroundColor:"canvas.subtle",p:3,borderBottom:"1px solid",borderColor:"border.muted"},children:[n.editor&&(0,i.jsx)(T,{login:n.editor.login,avatarUrl:n.editor.avatarUrl,time:n.editedAt,details:n.firstEdit?w.k.editHistory.created:w.k.editHistory.edited,trailingElement:o?(0,i.jsx)(f.A,{sx:{ml:1},children:n.deletedAt?w.k.editHistory.deleted:w.k.editHistory.mostRecent}):void 0}),n.viewerCanDelete&&!n.newest&&!n.deletedAt&&(0,i.jsxs)(L.Q,{sx:{marginLeft:"auto"},variant:"danger",size:"small","aria-label":w.k.editHistory.deleteRevisionAriaLabel,onClick:s,children:[(0,i.jsx)(A.A,{icon:k.TrashIcon})," ",D.deleteEditRevision]})]})};function T({login:e,avatarUrl:t,details:n,time:a,sx:r,trailingElement:s}){let o=!!t&&!!e;return(0,i.jsxs)(d.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsxs)(d.A,{sx:{...r},children:[o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.r,{src:t,size:16,alt:`@${e}`,sx:{boxShadow:"0 0 0 2px var(--bgColor-muted, var(--color-canvas-subtle))",mr:1}}),(0,i.jsx)(m.A,{sx:{fontWeight:"bold"},children:e})]}),!o&&(0,i.jsx)("span",{children:e??_.ghostUserLogin}),(0,i.jsxs)("span",{children:[" ",n," "]}),a&&(0,i.jsx)(h.A,{date:new Date(a)})]}),s]})}try{I.displayName||(I.displayName="EditHistoryDialogHeader")}catch{}try{T.displayName||(T.displayName="ActorOperationDetails")}catch{}let F=e=>e.split(/\r?\n/),O=e=>e.split(/\s+/),M=(e,t)=>({groups:[{words:e??"",modification:t}],modification:t}),$={diffContainer:"GroupedTextDiffViewer-module__diffContainer--hFr9Z",borderStylingAdded:"GroupedTextDiffViewer-module__borderStylingAdded--oOMUd",borderStylingRemoved:"GroupedTextDiffViewer-module__borderStylingRemoved--sC9wR",borderStylingChanged:"GroupedTextDiffViewer-module__borderStylingChanged--AAKXv",wordStylingAdded:"GroupedTextDiffViewer-module__wordStylingAdded--Vu4zN",wordStylingRemoved:"GroupedTextDiffViewer-module__wordStylingRemoved--FpdRV",diffLine:"GroupedTextDiffViewer-module__diffLine--UijDm"},P=e=>{switch(e){case"ADDED":return $.borderStylingAdded;case"REMOVED":return $.borderStylingRemoved;case"EDITED":return $.borderStylingChanged;case"UNCHANGED":return""}},B=e=>{switch(e){case"ADDED":return $.wordStylingAdded;case"REMOVED":return $.wordStylingRemoved;case"UNCHANGED":return""}},U=e=>{switch(e){case"ADDED":return{open:"[+]",close:"[/+]"};case"REMOVED":return{open:"[-]",close:"[/-]"}}return{open:"",close:""}},H=e=>"ADDED"===e||"REMOVED"===e,V=({groups:e,modification:t})=>{let n=e.map(e=>e.words).join(" ");return(0,i.jsxs)("span",{className:$.diffLine,children:["EDITED"===t&&e?.map((e,t)=>i.jsxs(i.Fragment,{children:[H(e.modification)&&i.jsx("span",{className:"sr-only",children:U(e.modification).open}),i.jsx("span",{className:B(e.modification),children:`${0===t?"":" "}${e.words}`}),H(e.modification)&&i.jsx("span",{className:"sr-only",children:U(e.modification).close})]},t-1)),"EDITED"!==t&&e.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"sr-only",children:U(t).open}),(0,i.jsx)("span",{children:n}),(0,i.jsx)("span",{className:"sr-only",children:U(t).close})]}),0===e.length&&(0,i.jsx)("br",{})]})},K=({before:e,after:t})=>{let n=function({before:e,after:t}){let n=e?F(e):[],i=t?F(t):[],a=[];for(let e=0;e<n.length||e<i.length;e++){let t=n[e],r=i[e];a.push(function(e,t){let n=e?O(e):[],i=t?O(t):[];if(0===n.length&&0===i.length||e===t)return M(e,"UNCHANGED");if(0===n.length)return M(t,"ADDED");if(0===i.length)return M(e,"REMOVED");let a=[],r={words:"",modification:"UNCHANGED"},l={words:"",modification:"ADDED"},s={words:"",modification:"REMOVED"};for(let e=0;e<n.length||e<i.length;e++){let t=n[e],o=i[e];t===o?(r.words=`${r.words}${0===r.words.length?"":" "}${t}`,""!==l.words&&(a.push(l),l={words:"",modification:"ADDED"}),""!==s.words&&(a.push(s),s={words:"",modification:"REMOVED"})):(""!==r.words&&(void 0!==t||void 0!==o)&&(a.push(r),r={words:"",modification:"UNCHANGED"}),void 0!==t&&(s.words=`${s.words}${0===s.words.length?"":" "}${t}`),void 0!==o&&(l.words=`${l.words}${0===l.words.length?"":" "}${o}`))}return""!==l.words&&a.push(l),""!==s.words&&a.push(s),""!==r.words&&a.push(r),{groups:a,modification:"EDITED"}}(t,r))}return{lines:a}}({before:e,after:t});return(0,i.jsx)("div",{className:$.diffContainer,children:n.lines.map((e,t)=>(0,i.jsx)("div",{className:P(e.modification),children:(0,i.jsx)(V,{...e})},t))})};try{V.displayName||(V.displayName="LineDiffViewer")}catch{}try{K.displayName||(K.displayName="GroupedTextDiffViewer")}catch{}let q=e=>e.split(/\r?\n/),z=e=>e.split(/\s+/),G=e=>{let t="3px solid";switch(e){case"ADDED":return{borderLeft:t,borderColor:"var(--borderColor-success-emphasis, var(--color-success-fg))"};case"REMOVED":return{borderLeft:t,borderColor:"var(--borderColor-danger-emphasis, var(--color-danger-fg))"};case"EDITED":return{borderLeft:t,borderColor:"var(--borderColor-severe-emphasis, var(--color-severe-fg))"};case"UNCHANGED":return{}}},W=e=>{switch(e){case"ADDED":return{backgroundColor:"var(--diffBlob-additionWord-bgColor, var(--diffBlob-addition-bgColor-word))",color:"var(--diffBlob-additionWord-fgColor, var(--diffBlob-addition-fgColor-text))"};case"REMOVED":return{backgroundColor:"var(--diffBlob-deletionWord-bgColor, var(--diffBlob-deletion-bgColor-word))",color:"var(--diffBlob-deletionWord-fgColor, var(--diffBlob-deletion-fgColor-text))",textDecoration:"line-through"};case"UNCHANGED":return{}}},Q=({words:e,modification:t})=>(0,i.jsxs)(d.A,{as:"span",sx:{pl:2},children:["EDITED"===t&&e.map((t,n)=>(0,i.jsx)(m.A,{sx:{...W(t.modification)},children:`${t.word}${n===e.length-1?"":" "}`},n)),"EDITED"!==t&&e.length>0&&(0,i.jsx)("span",{children:e.map(e=>e.word).join(" ")}),0===e.length&&(0,i.jsx)("br",{})]}),X=({before:e,after:t})=>{let n=function({before:e,after:t}){let n=e?q(e):[],i=t?q(t):[],a=[];for(let e=0;e<n.length||e<i.length;e++){let t=n[e],r=i[e];a.push(function(e,t){let n=e?z(e):[],i=t?z(t):[];if(0===n.length&&0===i.length||e===t)return{words:i.map(e=>({word:e,modification:"UNCHANGED"})),modification:"UNCHANGED"};if(0===n.length)return{words:i.map(e=>({word:e,modification:"ADDED"})),modification:"ADDED"};if(0===i.length)return{words:n.map(e=>({word:e,modification:"REMOVED"})),modification:"REMOVED"};let a=[];for(let e=0;e<n.length||e<i.length;e++){let t=n[e],r=i[e];t===r?a.push({word:t,modification:"UNCHANGED"}):(void 0!==t&&a.push({word:t,modification:"REMOVED"}),void 0!==r&&a.push({word:r,modification:"ADDED"}))}return{words:a,modification:"EDITED"}}(t,r))}return{lines:a}}({before:e,after:t});return(0,i.jsx)(d.A,{sx:{display:"flex",flexDirection:"column",overflow:"auto",gap:1},children:n.lines.map((e,t)=>(0,i.jsx)(d.A,{sx:{...G(e.modification),flexDirection:"row"},children:(0,i.jsx)(Q,{...e})},t))})};try{Q.displayName||(Q.displayName="LineDiffViewer")}catch{}try{X.displayName||(X.displayName="TextDiffViewer")}catch{}let Y=({userContentEditId:e,onClose:t})=>(0,i.jsx)(j.l,{renderBody:()=>(0,i.jsx)(J,{userContentEditId:e}),onClose:t,title:w.k.editHistory.viewingEditTitle,width:"xlarge",height:"auto",sx:{width:"100%",margin:4,maxWidth:"800px",maxHeight:"clamp(300px, 80vh, 800px)"}}),J=({userContentEditId:e})=>{let[t,n]=(0,g.useQueryLoader)(v);return((0,p.useEffect)(()=>{n({id:e})},[n,e]),t)?(0,i.jsx)(p.Suspense,{fallback:(0,i.jsx)(ee,{}),children:(0,i.jsx)(s.A,{onRetry:()=>n({id:e},{fetchPolicy:"network-only"}),fallback:e=>(0,i.jsx)(b,{retry:e}),children:(0,i.jsx)(Z,{queryRef:t,userContentEditId:e})})}):(0,i.jsx)(ee,{})},Z=({queryRef:e,userContentEditId:t})=>{let n=(0,g.usePreloadedQuery)(v,e).node,a=(0,C.G7)("issues_react_grouped_diff_on_edit_history");if(!n)return(0,i.jsx)(ee,{});let r=!n.diffBefore&&!n.diff;return(0,i.jsxs)(d.A,{sx:{overflowY:"auto"},children:[(0,i.jsx)(I,{queryRef:n,userContentEditId:t}),(0,i.jsxs)(d.A,{sx:{p:3},children:[!a&&!n.deletedAt&&!r&&(0,i.jsx)(X,{before:n.diffBefore??void 0,after:n.diff??void 0}),a&&!n.deletedAt&&!r&&(0,i.jsx)(K,{before:n.diffBefore??void 0,after:n.diff??void 0}),!n.deletedAt&&r&&(0,i.jsx)(m.A,{sx:{color:"fg.muted",fontStyle:"italic"},children:w.k.editHistory.emptyEdit}),n.deletedAt&&(0,i.jsx)(T,{login:n.deletedBy?.login,details:w.k.editHistory.deletedThisRevision,time:n.deletedAt,sx:{color:"fg.muted",fontStyle:"italic"}})]})]})};function ee(){return(0,i.jsxs)(d.A,{sx:{m:2,display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"})]})}try{Y.displayName||(Y.displayName="EditHistoryDialog")}catch{}try{J.displayName||(J.displayName="EditContent")}catch{}try{Z.displayName||(Z.displayName="EditContentInternal")}catch{}try{ee.displayName||(ee.displayName="EditContentLoading")}catch{}let et={ActionList_Description:"MarkdownEditHistoryViewer-module__ActionList_Description--Z9ggs"};function en({editHistory:e}){let t=(0,g.useFragment)(r,e),[n,a]=(0,p.useState)(!1),[l,s]=(0,p.useState)("");return t&&t.viewerCanReadUserContentEdits&&t.lastEditedAt?(0,i.jsxs)(d.A,{sx:{display:"flex"},children:[(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Button,{sx:{color:"fg.muted"},variant:"invisible",size:"small","aria-label":w.k.editHistory.ariaLabel,children:w.k.editHistory.openEditsButton}),(0,i.jsx)(c.W.Overlay,{width:"auto",children:(0,i.jsx)(ei,{setIsEditHistoryDialogOpen:a,setSelectedId:s,editHistoryId:t.id,lastEditedAt:t.lastEditedAt})})]}),n&&(0,i.jsx)(Y,{onClose:()=>a(!1),userContentEditId:l})]}):null}let ei=({editHistoryId:e,lastEditedAt:t,...n})=>{let[r,l]=(0,g.useQueryLoader)(a);return((0,p.useEffect)(()=>{l({id:e},{fetchPolicy:"network-only"})},[e,l,t]),r)?(0,i.jsx)(p.Suspense,{fallback:(0,i.jsx)(er,{}),children:(0,i.jsx)(s.A,{onRetry:()=>l({id:e},{fetchPolicy:"network-only"}),fallback:e=>(0,i.jsx)(b,{retry:e}),children:(0,i.jsx)(ea,{queryRef:r,...n})})}):(0,i.jsx)(er,{})},ea=({setIsEditHistoryDialogOpen:e,setSelectedId:t,queryRef:n})=>{let r=(0,g.usePreloadedQuery)(a,n);if(!r.node?.userContentEdits)return(0,i.jsx)(er,{});let s=r.node.userContentEdits.totalCount;return(0,i.jsx)(u.l,{sx:{maxHeight:"clamp(200px, 30vh, 320px)",overflow:"auto",width:"max-content"},children:(0,i.jsxs)(u.l.Group,{children:[(0,i.jsx)(u.l.GroupHeading,{children:`Edited ${s-1} time${s>2?"s":""}`}),r.node.userContentEdits.edges?.map((n,a)=>{let o=n?.node;if(!o?.editor)return null;let d=r.node?.includesCreatedEdit&&a===s-1;return i.jsxs(u.l.Item,{onSelect:()=>{t(o.id),e(!0)},children:[i.jsx(u.l.LeadingVisual,{children:i.jsx(l.r,{src:o.editor.avatarUrl,size:16,alt:`@${o.editor.login}`,sx:{boxShadow:"0 0 0 2px var(--bgColor-muted, var(--color-canvas-subtle))"}})}),i.jsx(m.A,{sx:{fontWeight:"normal"},children:o.editor.login}),i.jsxs(u.l.Description,{truncate:!0,className:et.ActionList_Description,children:[d&&i.jsx("div",{title:"",children:w.k.editHistory.created}),i.jsx(h.A,{date:new Date(o.editedAt)})]}),(0===a||o.deletedAt)&&i.jsx(u.l.TrailingVisual,{children:i.jsx(f.A,{children:0===a?w.k.editHistory.mostRecent:w.k.editHistory.deleted})})]},o.id)})]})})};function er(){return(0,i.jsxs)(d.A,{sx:{m:2,display:"flex",flexDirection:"column",gap:2,minWidth:"256px"},children:[(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"}),(0,i.jsx)(o.O,{variant:"rounded",height:"md",width:"100%"})]})}try{en.displayName||(en.displayName="MarkdownEditHistoryViewer")}catch{}try{ei.displayName||(ei.displayName="EditHistoryActionMenuContent")}catch{}try{ea.displayName||(ea.displayName="EditHistoryActionMenuContentInternal")}catch{}try{er.displayName||(er.displayName="EditHistoryLoading")}catch{}},31786:(e,t,n)=>{n.d(t,{_:()=>d});var i=n(74848);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLastEditedBy",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewerCanReadUserContentEdits",storageKey:null},{alias:null,args:null,concreteType:"UserContentEdit",kind:"LinkedField",name:"lastUserContentEdit",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"editor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}],type:"Comment",abstractKey:"__isComment"};a.hash="bbab0cb2d43eeaaa0ed5b010868ec7f4";var r=n(34614),l=n(18312),s=n(91669);let o={container:"MarkdownLastEditedBy-module__container--fKxHN"};function d({editInformation:e,includeSeparator:t,forceUnderline:n}){let d=(0,l.useFragment)(a,e);if(!d||!d.viewerCanReadUserContentEdits||!d.lastUserContentEdit||!d.lastUserContentEdit.editor)return null;let{login:c,url:u}=d.lastUserContentEdit.editor;return(0,i.jsxs)("span",{className:o.container,children:[t&&(0,i.jsx)("span",{children:" \xb7 "}),(0,i.jsxs)("span",{children:[`${s.k.editHistory.editedBy} `,(0,i.jsx)(r.A,{sx:{color:"fg.muted"},href:u,inline:n,children:c})]})]})}try{d.displayName||(d.displayName="MarkdownLastEditedBy")}catch{}},2668:(e,t,n)=>{n.d(t,{B:()=>l});var i=n(74848),a=n(96540),r=n(7284);function l({includeAriaAttributes:e=!0,...t}){let n=(0,a.useId)(),[l,s]=(0,a.useState)(!1),o=t.open??l,d=t.id??n,c=e?{"aria-describedby":d}:{},u=(0,a.useCallback)(()=>s(!0),[]),m=(0,a.useCallback)(()=>s(!1),[]);return[{...c,onPointerEnter:u,onPointerLeave:m,onFocus:u,onBlur:m},(0,i.jsx)(r.m,{...t,open:o,id:d},"portal-tooltip")]}},31670:(e,t,n)=>{n.d(t,{Dp:()=>o,Xv:()=>d,ww:()=>c});var i=n(74848),a=n(21728),r=n(96540),l=n(7922);let s=(0,r.createContext)({});function o(e){let t,n,r,o,d,c;let u=(0,a.c)(12),{baseRefOid:m,path:h,children:f}=e;if(u[0]!==m||u[1]!==h){let e=h.split("/"),t=e[e.length-1];if(t){let e=(0,l.W)(t);e&&(r="singleCommitOid"in e,o="startOid"in e?e.startOid:m,n="endOid"in e?e.endOid:e.singleCommitOid)}u[0]=m,u[1]=h,u[2]=n,u[3]=r,u[4]=o}else n=u[2],r=u[3],o=u[4];return u[5]!==n||u[6]!==r||u[7]!==o?(d={endOid:n,isSingleCommit:r,startOid:o},u[5]=n,u[6]=r,u[7]=o,u[8]=d):d=u[8],t=d,u[9]!==f||u[10]!==t?(c=(0,i.jsx)(s.Provider,{value:t,children:f}),u[9]=f,u[10]=t,u[11]=c):c=u[11],c}let d=()=>(0,r.useContext)(s);function c(){let{endOid:e,startOid:t}=d();return!!e||!!t}try{s.displayName||(s.displayName="SelectedRefContext")}catch{}try{o.displayName||(o.displayName="SelectedRefContextProvider")}catch{}},79287:(e,t,n)=>{n.d(t,{h:()=>c});var i=n(74848),a=n(38621),r=n(75177),l=n(87330),s=n(52464),o=n(47139),d=n(42522);function c({isCollapsed:e,isOutdated:t,isResolved:n,line:c,onToggleCollapsed:u,onNavigateToDiffComment:m,path:h,rightSideContent:f}){return(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",px:2,py:1,backgroundColor:"canvas.subtle",borderRadius:e?2:0,borderTopLeftRadius:2,borderTopRightRadius:2,borderBottom:e?"none":"1px solid",borderBottomColor:"border.default"},children:[(0,i.jsx)(l.K,{"aria-label":e?"Open review comment":"Close review comment",icon:e?a.ChevronRightIcon:a.ChevronDownIcon,size:"small",unsafeDisableTooltip:!0,variant:"invisible",onClick:u}),(0,i.jsxs)(r.A,{as:"h4",sx:{ml:1,display:"flex",alignItems:"center",flexGrow:1,minWidth:0,mr:2},children:[(0,i.jsx)(s.A,{sx:{overflow:"hidden",fontFamily:"var(--fontStack-monospace)",fontWeight:500,fontSize:0,whiteSpace:"nowrap",textOverflow:"ellipsis",direction:"rtl"},children:h}),!!c&&(0,i.jsxs)(s.A,{sx:{fontSize:0,color:"fg.muted",fontWeight:"normal",ml:2,whiteSpace:"nowrap"},children:["Line ",c]})]}),n&&(0,i.jsx)(o.A,{size:"large",sx:{mx:1},variant:"done",children:"Resolved"}),t&&!n&&(0,i.jsx)(o.A,{size:"large",sx:{mx:1},variant:"attention",children:"Outdated"}),(0,i.jsx)(d.m,{direction:"sw",id:"jump-to-comment",text:"Jump to comment in the diff",type:"label",children:(0,i.jsx)(l.K,{"aria-labelledby":"jump-to-comment",icon:a.FileSymlinkFileIcon,unsafeDisableTooltip:!0,variant:"invisible",onClick:m})}),f]})}try{c.displayName||(c.displayName="ConversationHeader")}catch{}},65698:(e,t,n)=>{n.d(t,{M:()=>d});var i=n(74848),a=n(38621),r=n(87330),l=n(42522),s=n(46156),o=n(79287);function d({isCollapsed:e,onToggleCollapsed:t,onNavigateToDiffComment:n,thread:d}){let{sendPullRequestAnalyticsEvent:c}=(0,s.$)();return(0,i.jsx)(o.h,{isCollapsed:e,isOutdated:d.isOutdated,isResolved:d.isResolved,line:d.line,path:d.path,rightSideContent:(0,i.jsx)(l.m,{direction:"sw",id:"resolve-conversation",text:d.isResolved?"Unresolve conversation":"Resolve conversation",type:"label",children:(0,i.jsx)(r.K,{"aria-labelledby":"resolve-conversation",icon:d.isResolved?a.CheckCircleFillIcon:a.CheckCircleIcon,sx:{color:d.isResolved?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},unsafeDisableTooltip:!0,variant:"invisible",onClick:d.isResolved?()=>{e||t(),c("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{e||t(),c("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),onNavigateToDiffComment:n,onToggleCollapsed:t})}try{d.displayName||(d.displayName="ThreadHeader")}catch{}},69231:(e,t,n)=>{n.d(t,{Kg:()=>s,Yu:()=>o});var i=n(74848),a=n(21728),r=n(96540);let l=(0,r.createContext)(null);function s(e){let t,n,r;let s=(0,a.c)(5),{children:o,basePageDataUrl:d}=e;return s[0]!==d?(n={basePageDataUrl:d},s[0]=d,s[1]=n):n=s[1],t=n,s[2]!==o||s[3]!==t?(r=(0,i.jsx)(l.Provider,{value:t,children:o}),s[2]=o,s[3]=t,s[4]=r):r=s[4],r}function o(){let e=(0,r.useContext)(l);if(!e)throw Error("usePageDataContext must be used within a PageDataContextProvider");return e}try{l.displayName||(l.displayName="PageDataContext")}catch{}try{s.displayName||(s.displayName="PageDataContextProvider")}catch{}},11394:(e,t,n)=>{n.d(t,{q:()=>eB,C:()=>eH});var i=n(74848),a=n(86365),r=n(69231),l=n(12152),s=n(21085),o=n(23536),d=n(56389),c=n(91089),u=n(96540),m=n(20053);let h={OPEN:{description:"Open",status:"pullOpened"},CLOSED:{description:"Closed",status:"pullClosed"},QUEUED:{description:"Queued",status:"pullQueued"},MERGED:{description:"Merged",status:"pullMerged"},DRAFT:{description:"Draft",status:"draft"}};function f({className:e,state:t}){let n=(0,u.useMemo)(()=>h[t],[t]);return(0,i.jsx)(c.A,{className:(0,m.$)("flex-self-start",e),status:n.status,children:n.description})}try{f.displayName||(f.displayName="PullRequestStateLabel")}catch{}var p=n(26514),g=n(5796),x=n(63867),y=n(34614),b=n(16255),v=n(55847),C=n(89169),j=n(2676),w=n(10312),N=n(17500),S=n(38359),k=n(21110),E=n(42522),L=n(97665),A=n(87904),D=n(41281),_=n(65292),R=n(57572),I=n(94747);let T={truncateBranch:"PullRequestHeaderSummary-module__truncateBranch--u_0Mq"};var F=n(65510),O=n(56366);function M(){let{basePageDataUrl:e}=(0,r.Yu)();return[D.u.header,`basePageDataURL:${e}`]}function $(e){let t=(0,_.e)(D.u.header),n=M();return(0,F.U)({queryKey:n,queryFn:async()=>{let e=await (0,R.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,O.Av)(n),n},initialData:e,staleTime:1/0})}var P=n(32845);function B({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:a="",baseRepositoryOwnerLogin:r="",canChangeBase:l=!1,commitsCount:s,headBranch:o,headRepositoryOwnerLogin:d="",headRepositoryName:c="",isInAdvisoryRepo:m,isEditing:h=!1,mergedBy:f,mergedTime:j,setIsEditing:E,state:T}){let F=(0,L.jE)(),{refListCacheKey:O}=(0,S.X)(),[$,B]=(0,u.useState)(!1),[H,V]=(0,u.useState)(!1),[K,q]=(0,u.useState)(""),[z,G]=(0,u.useState)(""),W=M(),Q=(0,P.E)(),{mutate:X}=function(){let e=(0,_.e)(D.u.changeBase);return(0,I.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,R.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,A.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})}(),Y=e=>{V(!1),q(e)},J=H?()=>(0,i.jsx)(x.A,{size:"small"}):null,Z=d&&d!==r?`${r}:${t}`:t,ee=function(e,t,n,i,a){if(!t)return"unknown repository";let r=!!t&&t!==e,l=a&&!!n;switch(!0){case r&&l:return`${t}/${n}:${i}`;case r:return`${t}:${i}`;case l:return`${n}:${i}`;default:return i}}(r,d,c,o,m),et="MERGED"===T?f:e,en=function(e,t,n){let i=`${t} ${t>1?"commits":"commit"}`;return"MERGED"!==e?`wants to merge ${i} into`:n?`merged ${i} into`:`${i} merged into`}(T,s,et);return(0,i.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center flex-wrap",style:{gap:"0px 4px"},children:[et?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,g.dCN)({owner:et}),href:`/${et}`,children:et})," "]}):null,en,l&&h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.PI,{cacheKey:O,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:r,repo:a,types:["branch"],onSelectItem:e=>{B(!0),G(e)}}),(0,i.jsx)(b.Z,{children:(0,i.jsxs)(w.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:$,onDismiss:()=>{B(!1),G(""),q("")},children:[(0,i.jsx)(w.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),K&&(0,i.jsx)(k.v,{className:"mt-2",variant:"critical",children:K}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:H?"Base branch update in progress.":""}),(0,i.jsx)(v.Q,{alignContent:"center","aria-disabled":H?"true":void 0,block:!0,className:"mt-3",disabled:H,leadingVisual:J,onClick:()=>{V(!0),X({newBaseBranch:z},{onError:e=>Y(e.message),onSuccess:async()=>{try{await Promise.all([F.refetchQueries({queryKey:W},{throwOnError:!0}),F.refetchQueries({queryKey:Q},{throwOnError:!0})]),V(!1),E?.(!1),B(!1)}catch{Y("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:H?null:"Change base"})]})]})})]}):(0,i.jsx)(U,{branch:t,branchText:Z,repositoryName:a,repositoryOwner:r}),(0,i.jsx)("span",{children:"from "}),(0,i.jsx)(U,{branch:o,branchText:ee,repositoryName:c,repositoryOwner:d}),(0,i.jsx)(p.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:d?ee:o}),"MERGED"===T&&(0,i.jsx)(C.A,{datetime:j})]})}function U({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(j.A,{as:"span",className:T.truncateBranch,title:"This repository has been deleted",children:e});{let r=(0,g.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(E.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(j.A,{href:r,className:T.truncateBranch,children:e})})}}try{B.displayName||(B.displayName="PullRequestHeaderSummary")}catch{}try{U.displayName||(U.displayName="PullRequestBranchName")}catch{}var H=n(84492);function V({repository:e,pullRequest:t,responsiveWrapperClasses:n}){let{stickyStyles:a}=(0,o.a)();return(0,H.Y)()&&(a={...a,position:"fixed"}),(0,i.jsx)(d.z,{className:"py-2 border-bottom color-shadow-small",sx:a,children:(0,i.jsxs)(d.z.TitleArea,{className:`flex-items-center ${n}`,sx:{gridColumn:"1/-1",minWidth:["100vw","100vw","100vw","1280px"]},children:[(0,i.jsx)(d.z.LeadingVisual,{children:(0,i.jsx)(f,{state:t.state})}),(0,i.jsx)(d.z.Title,{className:"lh-condensed",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("bdi",{className:"f5 text-bold",children:t.title}),(0,i.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",t.number]}),(0,i.jsx)("div",{className:"f6 text-normal",children:(0,i.jsx)(B,{author:t.author.login,baseBranch:t.baseBranch,baseRepositoryOwnerLogin:e.ownerLogin,baseRepositoryName:e.name,commitsCount:t.commitsCount,headBranch:t.headBranch,headRepositoryOwnerLogin:t.headRepositoryOwnerLogin,headRepositoryName:t.headRepositoryName,isInAdvisoryRepo:t.isInAdvisoryRepo,mergedBy:t.mergedBy,state:t.state})})]})})]})})}try{V.displayName||(V.displayName="StickyPullRequestHeader")}catch{}var K=n(93653),q=n(37827);function z({pullRequest:e}){return(0,i.jsx)(q.l,{"aria-label":"Hidden Characters Warning Banner",className:"d-flex flex-row width-full",variant:"warning",title:"Hidden character warning",hideTitle:!0,children:(0,i.jsxs)(q.l.Description,{children:["The head ref may contain hidden characters:"," ",(0,i.jsxs)(j.A,{as:"span",children:['"',e.headBranch.replace(/[\u007F-\uFFFF]/g,e=>`\\u${`0000${e.charCodeAt(0).toString(16)}`.substr(-4)}`),'"']})]})})}try{z.displayName||(z.displayName="PullRequestHiddenCharactersBanner")}catch{}var G=n(44968),W=n(98939),Q=n(84217);function X({onBoardingProps:e}){let[t,n]=(0,u.useState)(!0),{mutate:a}=function(){let e=M(),t=(0,L.jE)();return(0,I.n)({networkMode:"always",mutationFn:({dismissPath:e})=>(0,R.Sr)(e,{method:"POST"}),onSuccess:()=>{t.setQueryData(e,e=>{let t={...e};return t.bannersData.banners.dependabotAutomatedSecurityUpdates.showOnboardingPopover=!1,t})}})}();return(0,i.jsx)(W.A,{className:"mt-2",open:t,children:(0,i.jsxs)(W.A.Content,{className:"Popover-message Popover-message--large",children:[(0,i.jsx)(Q.A,{as:"h3",variant:"small",children:"Your first automated security update"}),(0,i.jsx)("p",{className:"mt-2 f5",children:"Dependabot security updates keep your projects secure and up-to-date."}),e.showOptOut&&(0,i.jsxs)("p",{children:["You can opt out at any time in"," ",(0,i.jsx)(y.A,{inline:!0,href:e.repoSettingsPath,children:"this repository\u2019s settings"})]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(v.Q,{block:!1,onClick:()=>{a({dismissPath:e.dismissNoticePath}),n(!1)},children:"Got it!"}),(0,i.jsx)(y.A,{className:"ml-3",href:e.helpURL,"aria-label":"Learn more about Dependabot security updates",children:"Learn more"})]})]})})}try{X.displayName||(X.displayName="PullRequestAutomatedSecurityOnboarding")}catch{}function Y({dependabotUpdates:e,pullRequest:t}){let n="Merging this pull request will resolve",a="a Dependabot alert",r=t=>`<a class="Link Link--underline" href=${e.securityAlertPath}>${t}</a>`,l=e=>`<strong>${e}</strong>`;return(0,i.jsxs)("div",{className:"width-full",children:[(0,i.jsx)(q.l,{"aria-label":"Automated Security Update Banner",variant:"info",title:"Automated security update",hideTitle:!0,children:(0,i.jsx)(q.l.Description,{children:"OPEN"===t.state?(()=>{if(!e.alertPresent)return`${n} ${a}`;if(e.singleAlert){let t=`${n} a ${l(e.severity)} severity ${r("Dependabot Alert")} on ${e.packageName}`;return(0,i.jsx)(G.yx,{as:"span",html:t})}{let t=`${n} ${r("Dependabot Alerts")} on ${e.packageName} including a ${l(e.severity)} severity alert`;return(0,i.jsx)(G.yx,{as:"span",html:t})}})():`This pull request ${"MERGED"===t.state?"resolved":"would resolve"} ${e.alertPresent?`a Dependabot alert on ${e.packageName}.`:a}`})}),e.showOnboardingPopover&&(0,i.jsx)(X,{onBoardingProps:e.onboardingBannerProps})]})}try{Y.displayName||(Y.displayName="PullRequestAutomatedSecurityUpdateBanner")}catch{}function J({repository:e}){let t=`We noticed you haven't used Dependabot in a while, so we've paused automated Dependabot
  updates for this repository.`,n=`${(0,S.X)().helpUrl}/code-security/dependabot/dependabot-security-updates/about-dependabot-security-updates#about-automatic-deactivation-of-dependabot-updates`,a=`${(0,g.SHX)({owner:e.ownerLogin,repo:e.name,action:"pulls"})}/app%2Fdependabot`;return(0,i.jsx)(q.l,{className:"d-flex flex-row width-full",variant:"warning",title:"Dependabot updates are paused",children:(0,i.jsx)(q.l.Description,{children:(0,i.jsxs)("p",{children:[t,(0,i.jsx)("br",{}),"To resume updates, merge a Dependabot pull request or use "," ",(0,i.jsx)("b",{children:"@dependabot rebase."}),".","\xa0",(0,i.jsx)(y.A,{inline:!0,href:a,children:"See open Dependabot pull requests"})," ","or","\xa0",(0,i.jsx)(y.A,{inline:!0,href:n,children:"learn more about pausing of activity."})]})})})}try{J.displayName||(J.displayName="PullRequestPausedDependabotBanner")}catch{}function Z({bannersData:e,pullRequest:t,repository:n}){return(0,i.jsxs)(i.Fragment,{children:[e.banners.hiddenCharacterWarning.render&&(0,i.jsx)(z,{pullRequest:t}),e.banners.pausedDependabotUpdate.render&&(0,i.jsx)(J,{repository:n}),e.banners.dependabotAutomatedSecurityUpdates.render&&"OPEN"===t.state&&(0,i.jsx)(Y,{dependabotUpdates:e.banners.dependabotAutomatedSecurityUpdates,pullRequest:t})]})}try{Z.displayName||(Z.displayName="PullRequestBanners")}catch{}var ee=n(73451),et=n(67138),en=n(46309),ei=n(52916),ea=n(88108);function er({initialTitle:e,pullRequestNumber:t,onCloseForm:n}){let[a,r]=(0,u.useState)(e),[l,s]=(0,ea.c)(!0),[o,d]=(0,u.useState)(null),[c,m]=(0,ei.A)({title:e}),h=(0,u.useRef)(null),{mutate:f,isPending:p}=function(){let e=(0,L.jE)(),t=(0,_.e)(D.u.updateTitle),n=M();return(0,I.n)({networkMode:"always",mutationFn:({id:e,title:n})=>(0,R.Sr)(t,{method:"PATCH",body:{id:e,title:n}}),onSuccess:async t=>{let i=await t.json();if(!t.ok)throw Error(i.errors);e.setQueryData(n,e=>({...e,pullRequest:{...e.pullRequest,title:i.pullRequest.title,titleHtml:i.pullRequest.titleHtml}}))}})}(),g=e=>{d(e),h.current?.focus()},x=!l||p;return(0,i.jsxs)(en.B,{direction:{narrow:"vertical",regular:"horizontal"},gap:"condensed",as:"form",onSubmit:e=>{if(e.preventDefault(),d(null),!l){h.current?.focus();return}if(l&&!c){n();return}f({id:t,title:a},{onError:e=>g(e.message),onSuccess:()=>n()})},children:[(0,i.jsx)(en.B.Item,{grow:!0,children:(0,i.jsxs)(ee.A,{children:[(0,i.jsx)(ee.A.Label,{visuallyHidden:!0,children:"Edit Pull Request Title"}),(0,i.jsx)(et.A,{autoFocus:!0,block:!0,className:"f4",contrast:!0,onChange:e=>{var t;r(e.target.value),m({title:e.target.value}),s((t=e.target.value).trim().length>0&&t.length<=256)},ref:h,validationStatus:l?void 0:"error",value:a}),(0,i.jsx)(el,{isValid:l,saveErrorMessage:o,title:a})]})}),(0,i.jsx)(en.B.Item,{children:(0,i.jsxs)(en.B,{direction:"horizontal",gap:"condensed",children:[(0,i.jsx)(en.B.Item,{children:(0,i.jsx)(v.Q,{name:"Save",type:"submit",disabled:x,children:"Save"})}),(0,i.jsx)(en.B.Item,{children:(0,i.jsx)(v.Q,{variant:"invisible",onClick:n,disabled:p,children:"Cancel"})})]})})]})}function el({isValid:e,saveErrorMessage:t,title:n}){return e?t?(0,i.jsx)(ee.A.Validation,{variant:"error",children:t}):null:(0,i.jsx)(ee.A.Validation,{variant:"error",children:0===n.trim().length?"Title can't be blank":n.length>256?`Title can't be longer than 256 characters (currently ${n.length} characters)`:void 0})}try{er.displayName||(er.displayName="PullRequestEditTitleForm")}catch{}try{el.displayName||(el.displayName="DisplayError")}catch{}var es=n(38621),eo=n(12528),ed=n(60499),ec=n(47767);let eu={overrideLineHeight:"PullRequestHeaderNavigation-module__overrideLineHeight--NEMgb",muteWhenUnselected:"PullRequestHeaderNavigation-module__muteWhenUnselected--lopP8",counterLoading:"PullRequestHeaderNavigation-module__counterLoading--j38f6"};var em=n(97286),eh=n(49787),ef=n(19327),ep=n(55048),eg=n(75632),ex=n(46584),ey=n(35337);function eb({commitsCount:e,urls:t}){return(0,ep.E)()?(0,i.jsx)(eC,{commitsCount:e,urls:t}):(0,i.jsx)(ev,{commitsCount:e,urls:t})}function ev({commitsCount:e,urls:t}){let{data:n}=function(e){let t=(0,_.e)(D.u.tabCounts),n=function(){let{basePageDataUrl:e}=(0,r.Yu)();return[D.u.tabCounts,`basePageDataURL:${e}`]}();return(0,em.I)({queryKey:n,queryFn:async()=>{let e=await (0,R.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,O.Av)(n),n},initialData:void 0,staleTime:1/0})}();return(0,i.jsx)(ej,{labelCounts:n,commitsCount:e,urls:t})}function eC({commitsCount:e,urls:t}){let n=(0,ex.u)("react_data_router_pull_requests_layout")?ey.j:ef.B,{data:a}=(0,eh.xX)(n,"tabCounts");return(0,i.jsx)(ej,{labelCounts:a,commitsCount:e,urls:t})}function ej({commitsCount:e,urls:t,labelCounts:n}){let a=(0,ec.zy)(),r=(0,u.useCallback)(e=>a.pathname===e,[a]),l=`position-relative px-3 flex-shrink-0 ${eu.muteWhenUnselected} ${eu.overrideLineHeight}`,s="fg-muted mr-2 d-none d-sm-inline-block",o=(0,m.$)("ml-2",n?"":eu.counterLoading),d=(0,eg.G7)("hypersight");return(0,i.jsxs)(ed.A,{"aria-label":"Pull request navigation tabs",children:[(0,i.jsxs)(ed.A.Link,{href:t.conversation,selected:r(t.conversation),className:l,children:[(0,i.jsx)(es.CommentDiscussionIcon,{className:s}),"Conversation","number"==typeof n?.conversationCount&&(0,i.jsx)(eo.A,{className:o,children:n.conversationCount})]}),(0,i.jsxs)(ed.A.Link,{href:t.commits,selected:r(t.commits),className:l,children:[(0,i.jsx)(es.GitCommitIcon,{className:s}),"Commits","number"==typeof e&&(0,i.jsx)(eo.A,{className:"ml-2",children:e})]}),(0,i.jsxs)(ed.A.Link,{href:t.checks,selected:r(t.checks),className:l,children:[(0,i.jsx)(es.ChecklistIcon,{className:s}),"Checks","number"==typeof n?.checksCount&&(0,i.jsx)(eo.A,{className:o,children:n.checksCount})]}),(0,i.jsxs)(ed.A.Link,{href:t.files,selected:r(t.files),className:l,children:[(0,i.jsx)(es.FileDiffIcon,{className:s}),"Files changed",n&&n.filesChangedCount?(0,i.jsx)(eo.A,{className:o,children:n.filesChangedCount}):null]}),d&&(0,i.jsxs)(ed.A.Link,{href:t.walkthrough,selected:r(t.walkthrough),className:l,children:[(0,i.jsx)(es.CopilotIcon,{className:s}),"Walkthrough"]})]})}try{eb.displayName||(eb.displayName="PullRequestHeaderNavigation")}catch{}try{ev.displayName||(ev.displayName="PullRequestHeaderNavigationNavigator")}catch{}try{eC.displayName||(eC.displayName="PullRequestHeaderNavigationData")}catch{}try{ej.displayName||(ej.displayName="PullRequestHeaderNavigationShared")}catch{}var ew=n(56578),eN=n(8338),eS=n(30729),ek=n(42512),eE=n(74182),eL=n(46928),eA=n(95709);function eD({codespacesEnabled:e,copilotEnabled:t,headBranch:n,isEnterprise:a,pullRequestNumber:r,repository:l}){let s={repoOwner:l.ownerLogin,repoName:l.name,refName:n},o=(0,eA.QS)(l.id,n);return(0,i.jsx)(ek.n,{primary:!1,size:"small",isEnterprise:a,showCodespacesTab:e,codespacesPath:o,showCopilotTab:t,copilotTabProps:s,localTab:(0,i.jsx)(e_,{pullNumber:r})})}function e_(e){let{pullNumber:t}=e,n="Checkout with GitHub CLI",a=`gh pr checkout ${t}`,r=(0,eL.Z)();return(0,i.jsxs)(eN.l,{className:"py-0",children:[(0,i.jsx)("ul",{children:(0,i.jsxs)("li",{className:"mt-2 px-3 py-2",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[(0,i.jsx)(eS.A,{className:"mr-2",icon:es.TerminalIcon}),(0,i.jsx)("p",{className:"text-bold mb-0",children:n})]}),(0,i.jsx)(eE.J,{buttonAriaLabel:"Copy command to clipboard",inputId:"checkout-with-gh-cli",inputLabel:`${n} command`,url:a}),(0,i.jsxs)("p",{className:"text-normal color-fg-muted",children:["Work fast with our official CLI."," ",(0,i.jsx)(y.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})}),(0,i.jsx)(eN.l.Divider,{sx:{marginBottom:0}}),(0,i.jsx)(eN.l.Item,{className:"mx-0 py-3 px-3 width-full rounded-0",onSelect:()=>r("https://desktop.github.com"),children:(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(eS.A,{className:"mr-2",icon:es.DesktopDownloadIcon}),(0,i.jsx)("p",{className:"text-bold mb-0",children:"Checkout with GitHub Desktop"})]})})]})}try{eD.displayName||(eD.displayName="PullRequestCodeButton")}catch{}try{e_.displayName||(e_.displayName="LocalTab")}catch{}var eR=n(69710);function eI(){let{data:{diffstat:e}}=function(){let e=(0,_.e)(D.u.diffstat);return(0,F.U)({queryKey:[D.u.diffstat,e],queryFn:async()=>{let t=await (0,R.QJ)(e);if(!t.ok)throw Error(`HTTP ${t.status}`);let n=await t.json();return(0,O.Av)(n),n},staleTime:1/0})}();return(0,i.jsx)(eR.z,{linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,linesChanged:e.linesChanged,tooltipDirection:"nw"})}try{eI.displayName||(eI.displayName="DiffStat")}catch{}let eT={diffStatesWrapper:"PullRequestHeader-module__diffStatesWrapper--i4iJ1"};var eF=n(34407);function eO({bannersData:e,pullRequest:t,repository:n,urls:a,user:r,aliveChannel:l}){let{data:s}=$({aliveChannel:l,repository:n,pullRequest:t,bannersData:e,urls:a,user:r});return!function(e){let{refetch:t}=$();(0,ew.og)(e,t,{git_updated:!0,title_updated:!0})}(l),(0,i.jsx)(eM,{...s})}function eM({bannersData:e,pullRequest:t,repository:n,urls:a,user:r}){let[l,s]=(0,u.useState)(!1),o=(0,i.jsxs)(i.Fragment,{children:[r.canEditTitle&&(0,i.jsx)(v.Q,{onClick:()=>s(!0),size:"small",children:"Edit"}),(0,i.jsx)(eD,{codespacesEnabled:n.codespacesEnabled,copilotEnabled:n.copilotEnabled,headBranch:t.headBranch,isEnterprise:n.isEnterprise,pullRequestNumber:t.number,repository:n})]});return(0,i.jsxs)(i.Fragment,{children:[l&&(0,i.jsx)(er,{initialTitle:t.title,pullRequestNumber:t.number,onCloseForm:()=>s(!1)}),!l&&(0,i.jsx)("div",{className:"d-block d-sm-none pb-2 mb-3 flex-md-order-1 flex-shrink-0 d-flex flex-items-center gap-1",children:o}),(0,i.jsxs)(d.z,{className:"flex-items-center",children:[l&&(0,i.jsx)("h1",{className:"sr-only",children:`${t.title} - #${t.number}`}),!l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.z.TitleArea,{children:(0,i.jsxs)(d.z.Title,{as:"h1",className:"lh-condensed",children:[(0,i.jsx)(G.yx,{className:"f1 text-normal markdown-title",html:t.titleHtml}),(0,i.jsxs)("span",{className:"pl-2 fgColor-muted f1-light d-inline",children:["#",t.number]})]})}),(0,i.jsx)(d.z.Actions,{className:"d-none d-sm-flex flex-items-center gap-1",children:o})]}),(0,i.jsxs)(d.z.Description,{className:"d-flex flex-column flex-items-start",children:[(0,i.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2 width-full flex-items-start flex-justify-between",children:[(0,i.jsx)(f,{state:t.state}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(B,{author:t.author.login,mergedTime:t.mergedTime,baseBranch:t.baseBranch,baseRepositoryDefaultBranch:n.defaultBranch,baseRepositoryName:n.name,baseRepositoryOwnerLogin:n.ownerLogin,canChangeBase:r.canChangeBase,commitsCount:t.commitsCount,headBranch:t.headBranch,headRepositoryOwnerLogin:t.headRepositoryOwnerLogin,headRepositoryName:t.headRepositoryName,isInAdvisoryRepo:t.isInAdvisoryRepo,isEditing:l,mergedBy:t.mergedBy,setIsEditing:s,state:t.state})})]}),(0,i.jsx)(Z,{bannersData:e,pullRequest:t,repository:n})]}),(0,i.jsxs)(d.z.Navigation,{className:"pt-3 px-3 ml-n3 mr-n3",children:[(0,i.jsx)("div",{className:(0,m.$)(eT.diffStatesWrapper,"float-right d-none d-md-block"),children:(0,i.jsx)(u.Suspense,{fallback:(0,i.jsx)(eF.O,{width:"80px"}),children:(0,i.jsx)(eI,{})})}),(0,i.jsx)("div",{className:"flex-auto",children:(0,i.jsx)(eb,{commitsCount:t.commitsCount,urls:a})})]})]})]})}try{eO.displayName||(eO.displayName="LivePullRequestHeader")}catch{}try{eM.displayName||(eM.displayName="PullRequestHeader")}catch{}var e$=n(53808),eP=n(71727);function eB(e){return(0,i.jsx)(l.t,{critical:!0,fallback:(0,i.jsx)(s.M,{}),children:(0,i.jsx)(eU,{children:e.children})})}function eU(e){let{aliveChannel:t,pullRequest:n,bannersData:r,repository:l,urls:s,user:o}=function(){let e=(0,a.B)();if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:r,urls:l,user:s}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:r,urls:l,user:s}}();return(0,i.jsx)(eH,{aliveChannel:t,pullRequest:n,bannersData:r,repository:l,urls:s,user:o,children:e.children})}function eH({aliveChannel:e,pullRequest:t,bannersData:n,repository:a,urls:l,user:s,children:d}){let{isSticky:c,observe:u,unobserve:m}=(0,o.a)(),h=(0,ec.RQ)(`${eP.y}/*`)?"px-3 px-md-4 px-lg-5":"container-xl px-3 px-md-4 px-lg-5";return(0,i.jsxs)(r.Kg,{basePageDataUrl:l.conversation,children:[c&&(0,i.jsx)(V,{repository:a,pullRequest:t,responsiveWrapperClasses:h}),(0,i.jsx)("div",{className:`mt-4 ${h}`,children:(0,i.jsxs)(K.O7,{children:[(0,i.jsxs)(K.O7.Header,{divider:"none",padding:"none",className:"mb-3",children:[(0,i.jsx)(eO,{aliveChannel:e,repository:a,pullRequest:t,bannersData:n,urls:l,user:s}),(0,i.jsx)(e$.X,{sx:{visibility:"hidden",height:"1px"},onObserve:u,onUnobserve:m})]}),d]})})]})}try{eB.displayName||(eB.displayName="App")}catch{}try{eU.displayName||(eU.displayName="Layout")}catch{}try{eH.displayName||(eH.displayName="LayoutComponent")}catch{}},21085:(e,t,n)=>{n.d(t,{M:()=>l});var i=n(74848),a=n(38621),r=n(24664);function l({text:e}){return(0,i.jsx)("div",{children:(0,i.jsxs)(r.A,{border:!1,spacious:!1,children:[(0,i.jsx)(r.A.Visual,{children:(0,i.jsx)(a.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),(0,i.jsx)(r.A.Heading,{children:e||"Unable to load page."}),(0,i.jsxs)(r.A.Description,{children:[(0,i.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),(0,i.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),(0,i.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,i.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})})}try{l.displayName||(l.displayName="PullRequestErrorState")}catch{}},17755:(e,t,n)=>{n.d(t,{Wf:()=>tE});var i=n(74848),a=n(12152),r=n(21085),l=n(93653),s=n(86365),o=n(21728),d=n(10712),c=n(38621),u=n(89323),m=n(55847),h=n(8338),f=n(96540),p=n(31670),g=n(89169),x=n(61597);let y=(0,f.memo)(function(e){let t,n,a,r,l,s,d,c,u,m,p,y,b,v,C,j,w,N,S;let k=(0,o.c)(49),{baseRefOid:E,commitOids:L,commits:A,endOid:D,onClose:_,onRangeUpdated:R,startOid:I}=e;k[0]!==L||k[1]!==D||k[2]!==I?(t=()=>{if(!I||!D)return;let e=I?L.indexOf(I)+1:-1,t=D?L.indexOf(D):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},k[0]=L,k[1]=D,k[2]=I,k[3]=t):t=k[3];let[T,F]=(0,f.useState)(t);k[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{F(void 0)},k[4]=n):n=k[4];let O=n;k[5]!==L||k[6]!==T?(a=(e,t)=>{let n;let i=L.indexOf(e);if(T){if(!(T.start===T.end&&"removed"===t)){var a,r;let e,l;let{newStartIndex:s,newEndIndex:o}=(a=T.start,r=T.end,"added"===t?(e=Math.min(i,a),l=Math.max(i,r)):i===a?(e=a+1,l=r):(e=a,l=i-1),{newStartIndex:e,newEndIndex:l});n={start:s,end:o}}}else n="added"===t?{start:i,end:i}:void 0;F(n)},k[5]=L,k[6]=T,k[7]=a):a=k[7];let M=a;k[8]!==E||k[9]!==L||k[10]!==D||k[11]!==R||k[12]!==T||k[13]!==I?(r=()=>{let e,t;T&&(T.start>0||T.end<L.length-1)&&(e=T.start>0?L[T.start-1]:E,t=L[T.end]),(e!==I||t!==D)&&(e&&t?T&&T.start===T.end?R({singleOrStartOid:t}):R({singleOrStartOid:e,endOid:t}):R(void 0))},k[8]=E,k[9]=L,k[10]=D,k[11]=R,k[12]=T,k[13]=I,k[14]=r):r=k[14];let $=r;if(k[15]!==L||k[16]!==A||k[17]!==$||k[18]!==M||k[19]!==_||k[20]!==T){let e=T?L.slice(T.start,T.end+1):[];s=x.X,b=!0,v="Picking a range will select commits in between.",C="multiple",j="Pick one or more commits",d="modal",c="large",u=_,m=O,p=$,l=h.l,y=A.map(t=>{let n=e.includes(t.oid);return(0,i.jsxs)(h.l.Item,{selected:n,onSelect:()=>M(t.oid,n?"removed":"added"),children:[t.messageHeadline,(0,i.jsxs)(h.l.Description,{variant:"block",children:[t.shortOid," \xb7 ",t.actorLogin," \xb7 ",(0,i.jsx)(g.A,{datetime:t.createdAt})]})]},t.oid)}),k[15]=L,k[16]=A,k[17]=$,k[18]=M,k[19]=_,k[20]=T,k[21]=l,k[22]=s,k[23]=d,k[24]=c,k[25]=u,k[26]=m,k[27]=p,k[28]=y,k[29]=b,k[30]=v,k[31]=C,k[32]=j}else l=k[21],s=k[22],d=k[23],c=k[24],u=k[25],m=k[26],p=k[27],y=k[28],b=k[29],v=k[30],C=k[31],j=k[32];return k[33]!==l||k[34]!==y?(w=(0,i.jsx)(l,{children:y}),k[33]=l,k[34]=y,k[35]=w):w=k[35],k[36]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(x.X.Footer,{}),k[36]=N):N=k[36],k[37]!==s||k[38]!==d||k[39]!==c||k[40]!==u||k[41]!==m||k[42]!==p||k[43]!==w||k[44]!==b||k[45]!==v||k[46]!==C||k[47]!==j?(S=(0,i.jsxs)(s,{defaultOpen:b,description:v,selectionVariant:C,title:j,variant:d,width:c,onCancel:u,onClearSelection:m,onSubmit:p,children:[w,N]}),k[37]=s,k[38]=d,k[39]=c,k[40]=u,k[41]=m,k[42]=p,k[43]=w,k[44]=b,k[45]=v,k[46]=C,k[47]=j,k[48]=S):S=k[48],S});try{y.displayName||(y.displayName="CommitsSelector")}catch{}function b({onRangeUpdated:e,baseRefOid:t,commits:n,lastReviewOid:a}){let{endOid:r,isSingleCommit:l,startOid:s}=(0,p.Xv)(),o=(0,p.ww)(),d=(0,f.useMemo)(()=>n.map(e=>e.oid),[n]),g=!!a&&s===a&&r===d[d.length-1],[x,b]=(0,f.useState)(!1),[v,C]=(0,f.useState)(!1),j=(0,f.useMemo)(()=>{if(!s)return;if(s===t)return d[0];let e=d.findIndex(e=>e===s);if(!(e<0))return d[e+1]},[t,d,s]),w=function({endOid:e,isSingleCommit:t,startOid:n}){return(n&&e&&n===e&&(t=!0),t&&e)?`Commit ${e.slice(0,7)}`:n&&e?`${n.slice(0,7)}..${e.slice(0,7)}`:"All changes"}({endOid:r,isSingleCommit:l,startOid:j}),N=function({commitOids:e,endOid:t,isSingleCommit:n,startOid:i}){if(i&&t&&i===t&&(n=!0),n&&t)return`Commit ${t.slice(0,7)}...`;if(i&&t){let n=e.indexOf(i),a=e.indexOf(t);if(n>-1&&a>-1)return`${a-n+1} commits...`}return"Specific commit\u2026"}({endOid:r,startOid:j,commitOids:d}),S=t=>{C(!1),e(t)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.W,{open:x,onOpenChange:b,children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(m.Q,{alignContent:"start",block:!0,className:"flex-shrink-0",leadingVisual:c.VersionsIcon,trailingAction:c.TriangleDownIcon,children:w})}),(0,i.jsx)(u.W.Overlay,{side:"outside-bottom",width:"small",children:(0,i.jsxs)(h.l,{selectionVariant:"single",children:[(0,i.jsx)(h.l.Item,{selected:!o,onSelect:()=>{e(void 0)},children:"All changes"}),a&&a!==d[d.length-1]&&(0,i.jsx)(h.l.Item,{selected:g,onSelect:()=>S({singleOrStartOid:a,endOid:d[d.length-1]}),children:"Changes since your last review"}),(0,i.jsx)(h.l.Divider,{}),(0,i.jsx)(h.l.Item,{selected:o&&!g,onSelect:()=>{b(!1),C(!0)},children:N})]})})]}),v&&(0,i.jsx)(y,{baseRefOid:t,commitOids:d,commits:n,endOid:r,startOid:s,onClose:()=>C(!1),onRangeUpdated:S})]})}try{b.displayName||(b.displayName="CommitsDropdown")}catch{}var v=n(70170),C=n(3240);function j(e){let t,n,a,r,l,s,d,c,u,m,p,g,x,y,b,j,L,A;let D=(0,o.c)(64),{diffs:_,fileFilterState:R,setFileFilterState:I}=e,{filterText:T,fileExtensions:F,unselectedFileExtensions:O,showCodeowners:M,showDeletedFiles:$,showOnlyManifestFiles:P,showVendorFiles:B,showViewedFiles:U}=R;D[0]!==R||D[1]!==I?(t=(0,v.s)(e=>I({...R,filterText:e}),250),D[0]=R,D[1]=I,D[2]=t):t=D[2];let H=(0,f.useRef)(t);D[3]!==R||D[4]!==I||D[5]!==O?(n=(e,t)=>{I({...R,unselectedFileExtensions:new Set("selectFileExtension"===e?[...O].filter(e=>e!==t.extension):[...O,t.extension])})},D[3]=R,D[4]=I,D[5]=O,D[6]=n):n=D[6];let V=n;D[7]!==_?(a=_.some(E),D[7]=_,D[8]=a):a=D[8],D[9]!==_?(r=_.some(k),D[9]=_,D[10]=r):r=D[10],D[11]!==_?(l=_.some(S),D[11]=_,D[12]=l):l=D[12],D[13]!==_?(s=_.some(N),D[13]=_,D[14]=s):s=D[14],D[15]!==a||D[16]!==r||D[17]!==l||D[18]!==s?(d={showCodeownersFilter:a,showDeletedFilesFilter:r,showOnlyManifestFilesFilter:l,showVendorFilesFilter:s},D[15]=a,D[16]=r,D[17]=l,D[18]=s,D[19]=d):d=D[19];let{showCodeownersFilter:K,showDeletedFilesFilter:q,showOnlyManifestFilesFilter:z,showVendorFilesFilter:G}=d;return D[20]===Symbol.for("react.memo_cache_sentinel")?(c=e=>H.current(e),D[20]=c):c=D[20],D[21]!==_||D[22]!==R||D[23]!==I||D[24]!==M||D[25]!==K?(u=K&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.l.Divider,{}),(0,i.jsx)(h.l.Group,{selectionVariant:"single",children:(0,i.jsx)(h.l.Item,{selected:M,onSelect:()=>{I({...R,showCodeowners:!M})},children:`Only files owned by you (${_.filter(w).length})`})})]}),D[21]=_,D[22]=R,D[23]=I,D[24]=M,D[25]=K,D[26]=u):u=D[26],D[27]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(h.l.Divider,{}),D[27]=m):m=D[27],D[28]!==R||D[29]!==I||D[30]!==P||D[31]!==z?(p=z&&(0,i.jsx)(h.l.Item,{selected:P,onSelect:()=>I({...R,showOnlyManifestFiles:!P}),children:"Only manifest files"}),D[28]=R,D[29]=I,D[30]=P,D[31]=z,D[32]=p):p=D[32],D[33]!==R||D[34]!==I||D[35]!==$||D[36]!==q?(g=q&&(0,i.jsx)(h.l.Item,{selected:$,onSelect:()=>I({...R,showDeletedFiles:!$}),children:"Deleted files"}),D[33]=R,D[34]=I,D[35]=$,D[36]=q,D[37]=g):g=D[37],D[38]!==R||D[39]!==I||D[40]!==B||D[41]!==G?(x=G&&(0,i.jsx)(h.l.Item,{selected:B,onSelect:()=>I({...R,showVendorFiles:!B}),children:"Vendored files"}),D[38]=R,D[39]=I,D[40]=B,D[41]=G,D[42]=x):x=D[42],D[43]!==R||D[44]!==I||D[45]!==U?(y=()=>{I({...R,showViewedFiles:!U})},D[43]=R,D[44]=I,D[45]=U,D[46]=y):y=D[46],D[47]!==U||D[48]!==y?(b=(0,i.jsx)(h.l.Item,{selected:U,onSelect:y,children:"Viewed files"}),D[47]=U,D[48]=y,D[49]=b):b=D[49],D[50]!==p||D[51]!==g||D[52]!==x||D[53]!==b?(j=(0,i.jsxs)(h.l.Group,{selectionVariant:"single",children:[p,g,x,b]}),D[50]=p,D[51]=g,D[52]=x,D[53]=b,D[54]=j):j=D[54],D[55]!==u||D[56]!==j?(L=(0,i.jsxs)(i.Fragment,{children:[u,m,j]}),D[55]=u,D[56]=j,D[57]=L):L=D[57],D[58]!==F||D[59]!==T||D[60]!==V||D[61]!==L||D[62]!==O?(A=(0,i.jsx)(C.kF,{filterText:T,fileExtensions:F,unselectedFileExtensions:O,onFilterTextChange:c,onFilterChange:V,additionalFilterGroups:L}),D[58]=F,D[59]=T,D[60]=V,D[61]=L,D[62]=O,D[63]=A):A=D[63],A}function w(e){return e.isCodeowner}function N(e){return e.isVendored}function S(e){return e.isManifestFile}function k(e){return"REMOVED"===e.changeType||"DELETED"===e.changeType}function E(e){return e.isCodeowner}try{j.displayName||(j.displayName="FileFilter")}catch{}var L=n(73218),A=n(5796),D=n(47584),_=n(20053);let R={"react-pr-files-file-tree":"PullRequestFileTree-module__react-pr-files-file-tree--kgeKj"};function I(e){let t,n,r,l,s,c,u,m,h;let f=(0,o.c)(26),{baseRefOid:g,commits:x,diffs:y,lastReviewOid:v,ownerLogin:C,pullRequestNumber:w,repositoryName:N,onFileSelected:S,fileFilterState:k,setFileFilterState:E,filteredDiffs:I}=e,T=void 0===S?L.l:S;f[0]!==C||f[1]!==w||f[2]!==N?(t=e=>{let t;t=e?e.endOid?(0,A.nSV)({owner:C,repo:N,number:w,base:e.singleOrStartOid,head:e.endOid}):(0,A.yIb)({owner:C,repo:N,number:w,commit:e.singleOrStartOid}):(0,A.jrm)({owner:C,repo:N,number:w}),window.location.href=t},f[0]=C,f[1]=w,f[2]=N,f[3]=t):t=f[3];let F=t;return f[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{children:"File tree failed to load."}),r=(0,_.$)("d-flex flex-column gap-2",R["react-pr-files-file-tree"]),f[4]=n,f[5]=r):(n=f[4],r=f[5]),f[6]!==g||f[7]!==x||f[8]!==v||f[9]!==F?(l=(0,i.jsx)(b,{baseRefOid:g,commits:x,lastReviewOid:v,onRangeUpdated:F}),f[6]=g,f[7]=x,f[8]=v,f[9]=F,f[10]=l):l=f[10],f[11]!==g||f[12]!==l?(s=(0,i.jsx)(p.Dp,{baseRefOid:g,path:D.cg?.location?.pathname??"",children:l}),f[11]=g,f[12]=l,f[13]=s):s=f[13],f[14]!==y||f[15]!==k||f[16]!==E?(c=(0,i.jsx)(j,{diffs:y,fileFilterState:k,setFileFilterState:E}),f[14]=y,f[15]=k,f[16]=E,f[17]=c):c=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)("h2",{className:"sr-only",children:"File tree"}),f[18]=u):u=f[18],f[19]!==I||f[20]!==T?(m=(0,i.jsx)(d.oj,{diffs:I,renderPattern:"traditional",onSelect:T}),f[19]=I,f[20]=T,f[21]=m):m=f[21],f[22]!==s||f[23]!==c||f[24]!==m?(h=(0,i.jsx)(a.t,{fallback:n,children:(0,i.jsxs)("div",{className:r,id:"pr-file-tree",children:[s,c,u,m]})}),f[22]=s,f[23]=c,f[24]=m,f[25]=h):h=f[25],h}try{I.displayName||(I.displayName="PullRequestFileTree")}catch{}var T=n(78026),F=n(42505),O=n(52464),M=n(41281),$=n(97286),P=n(97665),B=n(94747),U=n(56366);function H(e){return[M.u.viewedFilesCount2,e]}let V=({progress:e})=>(0,i.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,i.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,i.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]});function K({pullRequest:e,totalFilesCount:t,...n}){let{data:a}=function(e,t){let n=H(e);return(0,$.I)({queryKey:n,queryFn:async()=>t||0,initialData:t,staleTime:1/0})}(e.pathName,n.viewedFilesCount);return 0===t?null:(0,i.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,i.jsx)(V,{progress:(a??0)/t||0}),(0,i.jsxs)(O.A,{className:"ml-1",sx:{fontSize:0,color:"fg.muted",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,i.jsx)(O.A,{sx:{fontWeight:500,color:"fg.default"},children:a})," /"," ",(0,i.jsx)(O.A,{sx:{fontWeight:500,color:"fg.default"},children:t})," ",(0,i.jsx)(O.A,{sx:{display:["none","none","none","inline-flex"]},children:"viewed"})]})]})}try{V.displayName||(V.displayName="ProgressIcon")}catch{}try{K.displayName||(K.displayName="ViewedFileProgress")}catch{}var q=n(57259),z=n(91246),G=n(84217),W=n(87330),Q=n(63867),X=n(67138);let Y={filterText:"",showResolvedThreads:!0};function J({className:e,filterState:t,onFilterStateChange:n}){let a=e=>{n({...t,filterText:e})},r=()=>{n({...t,showResolvedThreads:!t.showResolvedThreads})};return(0,i.jsxs)("div",{className:(0,_.$)("d-flex flex-row gap-2 flex-nowrap",e),children:[(0,i.jsx)(X.A,{block:!0,"aria-label":"Filter comments",leadingVisual:c.SearchIcon,placeholder:"Filter comments",value:t.filterText,onChange:e=>a(e.target.value)}),(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(m.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:c.FilterIcon,trailingAction:c.TriangleDownIcon,children:"Filter"})}),(0,i.jsx)(u.W.Overlay,{width:"small",children:(0,i.jsx)(h.l,{selectionVariant:"single",children:(0,i.jsx)(h.l.Item,{selected:t.showResolvedThreads,onSelect:()=>r(),children:"Show resolved comments"})})})]})]})}try{J.displayName||(J.displayName="CommentsFilter")}catch{}var Z=n(24664);function ee({heading:e,description:t,icon:n}){return(0,i.jsxs)(Z.A,{children:[(0,i.jsx)(Z.A.Visual,{children:(0,i.jsx)(n,{size:"medium"})}),(0,i.jsx)(Z.A.Heading,{children:e}),(0,i.jsx)(Z.A.Description,{children:t})]})}try{ee.displayName||(ee.displayName="ZeroState")}catch{}var et=n(82431),en=n(60658),ei=n(37109),ea=n(38359),er=n(65698),el=n(46008),es=n(62456);function eo({comments:e}){let t=function(e){let t=new Set;return e.reduce((e,n)=>(n?.author&&!t.has(n.author.login)&&(e.push({avatarUrl:n.author.avatarUrl,login:n.author.login}),t.add(n.author.login)),e),[])??[]}(e);return t.length<1?null:(0,i.jsx)(el.A,{children:t.map(({login:e,avatarUrl:t})=>(0,i.jsx)(es.r,{alt:e,size:18,src:t},e))})}try{eo.displayName||(eo.displayName="PreviewAuthors")}catch{}let ed=(0,f.memo)(function({onNavigateToDiffComment:e,pullRequestId:t,repositoryId:n,tabSize:a,thread:r}){let l=r.firstComment,s=r.id,o=r.isOutdated,d=l?.id,u=r.path,h=(0,f.useCallback)(()=>{window.location.hash=`#r${l?.databaseId}`,e()},[e,l?.databaseId]),p=function(e={lazyFetchReactionGroups:!1}){let{addSuggestedChangeToBatch:t,pendingSuggestedChangesBatch:n,removeSuggestedChangeFromBatch:i,submitSuggestedChanges:a}=function(){let e=(0,f.useCallback)(()=>{},[]),t=(0,f.useMemo)(()=>[],[]),n=(0,f.useCallback)(()=>{},[]),i=function(){let e=(0,f.useCallback)(()=>{},[]);return(0,f.useCallback)(({onCompleted:t})=>{t?.(),e(),location.reload()},[e])}();return(0,f.useMemo)(()=>({addSuggestedChangeToBatch:e,pendingSuggestedChangesBatch:t,removeSuggestedChangeFromBatch:n,submitSuggestedChanges:i}),[e,t,n,i])}(),r=(0,f.useCallback)(async()=>{},[]),l=(0,f.useCallback)(({diffLine:e,isLeftSide:t,onCompleted:n,selectedDiffRowRange:i})=>{let a,r;if(!e)return;let l=!!i&&i.startLineNumber!==i.endLineNumber,s=e.blobLineNumber,o=t&&!(0,ei.Ji)(e)?"LEFT":"RIGHT";i&&l&&(o="left"===i.endOrientation?"LEFT":"RIGHT",r="left"===i.startOrientation?"LEFT":"RIGHT",s=i.endLineNumber,a=i.startLineNumber),n?.(`${o} ${r} ${s} ${a}`)},[]),s=(0,f.useCallback)(({onCompleted:e})=>{e?.()},[]),o=(0,f.useCallback)(({onCompleted:e})=>{e?.("")},[]),d=(0,f.useCallback)(({onCompleted:e})=>{e?.()},[]),c=(0,f.useCallback)(({onCompleted:e})=>{e?.()},[]),u=(0,f.useCallback)(({onCompleted:e})=>{e?.()},[]),m=(0,f.useCallback)(({onCompleted:e})=>{e?.()},[]),h=(0,ea.X)(),p=h?.paste_url_link_as_plain_text||!1,g=h?.current_user_settings?.use_monospace_font||!1;return(0,f.useMemo)(()=>({batchingEnabled:!0,multilineEnabled:!0,resolvingEnabled:!0,suggestedChangesEnabled:!0,lazyFetchReactionGroups:e.lazyFetchReactionGroups,commentSubjectType:"pull request",pendingSuggestedChangesBatch:n,addSuggestedChangeToPendingBatch:t,removeSuggestedChangeFromPendingBatch:i,addThread:l,addThreadReply:s,addFileLevelThread:o,deleteComment:d,editComment:c,fetchThread:r,resolveThread:u,unresolveThread:m,hideComment:L.l,unhideComment:L.l,commentBoxConfig:{pasteUrlsAsPlainText:p,useMonospaceFont:g},submitSuggestedChanges:a}),[o,t,l,s,d,c,r,e,p,n,i,u,a,m,g])}({lazyFetchReactionGroups:!0}),[g,x]=(0,en.M)(`panel-thread-collapsed-state-${s}`,!1),y=r.threadPreviewComments.length,b=0===y?"No replies":`${y} ${1===y?"reply":"replies"}`,v={...r,commentsData:{comments:[]}};return p&&l&&v?(0,i.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,i.jsx)(er.M,{isCollapsed:g,thread:r,onNavigateToDiffComment:h,onToggleCollapsed:()=>x(!g)}),!g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,i.jsx)(et.i4,{diffTableSx:{borderStyle:"none"},hideHeaderDetails:!0,subject:v.subject,sx:{m:0,borderStyle:"none"},tabSize:a||4})}),(0,i.jsx)("div",{children:(0,i.jsx)(et.UA,{hideActions:!0,comment:l,commentingImplementation:p,filePath:u,index:0,isAnchorable:!1,isOutdated:o,isThreadResolved:r.isResolved,repositoryId:n,subjectId:t,threadId:s},d)}),(0,i.jsx)("div",{className:"mb-2 px-2",children:(0,i.jsx)(m.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:c.ChevronRightIcon,variant:"invisible",onClick:h,children:(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,i.jsx)("span",{children:b}),(0,i.jsx)(eo,{comments:r.threadPreviewComments})]})})})]})]}):null});try{ed.displayName||(ed.displayName="ThreadPreview")}catch{}var ec=n(79317),eu=n(18312);let em=(0,ec.E7)(),eh=(0,f.memo)(function({onClose:e,isOpen:t,pullRequestId:n,repositoryId:a,threadPreviews:r,toggleSidesheetRef:l,tabSize:s}){let[o,d]=(0,f.useState)(()=>({...Y})),u=new Set([...r.filter(e=>{let t=e?.firstComment;return function(e,t){let{filterText:n,showResolvedThreads:i}=t;if(!i&&e.isResolved)return!1;if(n){let t=n.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!0}({authorLogin:t?.author?.login??"",body:t?.body??"",id:e?.id??"",isResolved:e?.isResolved??!1,path:e?.path??""},o)}).map(e=>e.id??"")]),m=(0,f.useRef)(null),h=r.length>0,p=(0,f.useCallback)(()=>{e()},[e]);if(!t)return null;let g=r.map(e=>e&&u.has(e.id)?(0,i.jsx)(ed,{tabSize:s,thread:e,onNavigateToDiffComment:p,pullRequestId:n,repositoryId:a},e.id):null).filter(Boolean);return(0,i.jsx)(z.l,{"aria-label":"Comments list",initialFocusRef:m,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:l,onClose:e,title:"Comments",renderHeader:()=>(0,i.jsxs)(z.l.Header,{className:"p-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,i.jsx)(G.A,{as:"h3",sx:{fontSize:2,fontWeight:600},children:"Comments"}),(0,i.jsx)(W.K,{ref:m,"aria-label":"Close comments panel",icon:c.XIcon,unsafeDisableTooltip:!0,variant:"invisible",onClick:e})]}),(0,i.jsx)(J,{className:"mt-2 width-full",filterState:o,onFilterStateChange:d})]}),children:g.length>0?(0,i.jsx)(f.Suspense,{fallback:(0,i.jsx)(Q.A,{}),children:(0,i.jsx)(eu.RelayEnvironmentProvider,{environment:em,children:(0,i.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:g})})}):(0,i.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,i.jsx)(ee,{description:"Comments will show up here as soon as there are some.",heading:h?"No comments match the current filter":"No comments on changes yet",icon:c.CommentIcon})})})});try{eh.displayName||(eh.displayName="CommentsSidePanel")}catch{}var ef=n(65510),ep=n(57572);function eg(e){return[M.u.threadPreviews,e]}function ex({pullRequest:e,repositoryId:t,tabSize:n,...r}){let[l,s]=(0,f.useState)(!1),o=(0,f.useRef)(null),d=e.id,{data:u}=function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=function(e){let t=`${e}/page_data/${M.u.threadPreviews}`;return{queryKey:eg(e),queryFn:async()=>{let e=await (0,ep.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,U.Av)(n),n}}}(e);return(0,ef.U)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})}({pathName:e.pathName,initialData:r.threadPreviews});return(0,i.jsx)("div",{className:"d-flex flex-items-center",children:(0,i.jsxs)(a.t,{fallback:(0,i.jsx)(m.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:c.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,i.jsx)(m.Q,{ref:o,"aria-label":"Open comments side panel",count:u.length||void 0,leadingVisual:c.CommentDiscussionIcon,size:"small",onClick:()=>{(0,q.e)(),s(!0)}}),(0,i.jsx)(eh,{isOpen:l,pullRequestId:d,repositoryId:t.toString(),tabSize:n,threadPreviews:u,toggleSidesheetRef:o,onClose:()=>s(!1)})]})})}try{ex.displayName||(ex.displayName="OpenCommentsSidePanelButton")}catch{}var ey=n(81229),eb=n(42522);function ev({className:e,filteredText:t,onFilteredTextChange:n}){return(0,i.jsx)("div",{className:e,children:(0,i.jsx)(X.A,{block:!0,"aria-label":"Filter annotations\u2026",leadingVisual:c.SearchIcon,placeholder:"Filter annotations\u2026",value:t,onChange:e=>n(e.target.value)})})}try{ev.displayName||(ev.displayName="AnnotationsFilter")}catch{}function eC({lineNumber:e,path:t,onNavigateToAnnotation:n}){return(0,i.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,i.jsxs)("h4",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,i.jsx)(O.A,{className:"overflow-hidden text-mono text-semibold f6 no-wrap",sx:{textOverflow:"ellipsis",direction:"rtl"},children:t}),(0,i.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",e]})]}),(0,i.jsx)(eb.m,{direction:"se",id:"jump-to-annotation",text:"Jump to the annotation in the diff",type:"label",children:(0,i.jsx)(W.K,{"aria-labelledby":"jump-to-annotation",icon:c.FileSymlinkFileIcon,unsafeDisableTooltip:!0,variant:"invisible",onClick:n})})]})}let ej=(0,f.memo)(function({annotations:e,onClose:t,isOpen:n,returnFocusRef:a}){let[r,l]=(0,f.useState)(""),s=new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,r)).map(e=>e.id)),o=(0,f.useRef)(null),d=e.length>0,u=(0,f.useCallback)(()=>{t()},[t]);if(!n)return null;let m=e.map(e=>e&&s.has(e.id)?(0,i.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,i.jsx)(eC,{lineNumber:e.endLine,path:e.path,onNavigateToAnnotation:()=>u()}),(0,i.jsx)(ey.Y,{annotation:e})]},e.id):null).filter(Boolean);return(0,i.jsx)(z.l,{"aria-label":"Annotations list",initialFocusRef:o,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:()=>(0,i.jsxs)(z.l.Header,{className:"p-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,i.jsx)(G.A,{as:"h3",className:"f4 text-bold",children:"Annotations"}),(0,i.jsx)(W.K,{ref:o,"aria-label":"Close annotations panel",icon:c.XIcon,unsafeDisableTooltip:!0,variant:"invisible",onClick:t})]}),(0,i.jsx)(ev,{className:"mt-2 width-full",filteredText:r,onFilteredTextChange:l})]}),children:m.length>0?(0,i.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:m}):(0,i.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,i.jsx)(ee,{description:"Annotations will show up here as soon as there are some.",heading:d?"No annotations match the current filter":"No annotations on changes yet",icon:c.AlertIcon})})})});try{eC.displayName||(eC.displayName="AnnotationHeader")}catch{}try{ej.displayName||(ej.displayName="AnnotationsSidePanel")}catch{}function ew({annotations:e}){let[t,n]=(0,f.useState)(!1),r=(0,f.useRef)(null),l=(0,f.useCallback)(()=>n(!1),[]),s=e.length;return s>0?(0,i.jsx)("div",{className:"d-flex flex-items-center",children:(0,i.jsxs)(a.t,{fallback:(0,i.jsx)(m.Q,{"aria-label":"The annotations side panel cannot currently be opened.",icon:c.AlertIcon,size:"small",variant:"invisible"}),children:[(0,i.jsx)(m.Q,{ref:r,"aria-label":"Open annotations side panel",count:s,leadingVisual:c.AlertIcon,size:"small",onClick:()=>{(0,q.e)(),n(!0)}}),(0,i.jsx)(ej,{annotations:e,isOpen:t,returnFocusRef:r,onClose:l})]})}):null}try{ew.displayName||(ew.displayName="OpenAnnotationsPanelButton")}catch{}var eN=n(82060),eS=n(89015),ek=n(73451),eE=n(15198),eL=n(65481),eA=n(75177),eD=n(94977),e_=n(30729),eR=n(62976),eI=n(46156);let eT={Closed:"CLOSED",Merged:"MERGED"};var eF=n(65292);let eO={approve:"approve",comment:"comment",requestChanges:"request changes"};var eM=n(79287),e$=n(44968);let eP=(0,f.memo)(function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[a,r]=(0,f.useState)(!1),l=(0,f.useCallback)(()=>{window.location.hash=`#r${e.id}`,t(e.id)},[e.id,t]),s=e.threadPreviewComments.length,o=`${s} previous ${1===s?"comment":"comments"}`;return(0,i.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,i.jsx)(eM.h,{isCollapsed:a,isOutdated:e.isOutdated,isResolved:e.isResolved,line:e.line,path:e.path,onNavigateToDiffComment:l,onToggleCollapsed:()=>r(e=>!e)}),!a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"border borderColor-muted overflow-x-auto",children:(0,i.jsx)(et.i4,{diffTableSx:{borderStyle:"none"},hideHeaderDetails:!0,subject:e.subject,sx:{m:0,borderStyle:"none"},tabSize:n||4})}),s>0&&(0,i.jsx)("div",{className:"my-2 px-2",children:(0,i.jsx)(m.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:c.ChevronRightIcon,variant:"invisible",onClick:l,children:(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,i.jsx)("span",{children:o}),(0,i.jsx)(eo,{comments:e.threadPreviewComments})]})})}),(0,i.jsx)(e$.oG,{className:"markdown-body",html:e.bodyHTML,sx:{p:3,fontSize:1}})]})]})});try{eP.displayName||(eP.displayName="PendingCommentPreview")}catch{}function eB(e){return[M.u.pendingReview,e]}var eU=n(80688),eH=n(55516);let{getItem:eV,removeItem:eK,setItem:eq}=(0,eU.D)("localStorage"),ez={Radio:"ReviewMenuButton-module__Radio--hIdEi",RadioGroup:"ReviewMenuButton-module__RadioGroup--WG56C"},eG=(0,ec.E7)();function eW({onReviewEventChange:e,reviewEvent:t,viewerCanLeaveNonCommentReviews:n,viewerCanWriteToRepo:a,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l}){var s;return(0,i.jsxs)(eS.A,{name:"reviewEvent",onChange:e,className:ez.RadioGroup,children:[(0,i.jsx)(eS.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,i.jsx)(eQ,{checked:t===eO.comment,label:(0,eR.ZH)(eO.comment),subLabel:"Submit general feedback without explicit approval.",value:eO.comment}),(0,i.jsx)(eQ,{checked:t===eO.approve,disabled:!n,label:(0,eR.ZH)(eO.approve),subLabel:"Submit feedback and approve merging these changes.",value:eO.approve,disabledTooltip:(s=!!r,l?"Pull request authors can't approve their own pull requests.":s?"Users that pushed changes to this pull request after it was opened can't approve":n?"":"Only users with explicit access to this repository may approve pull requests")}),(0,i.jsx)(eQ,{checked:t===eO.requestChanges,disabled:!n,disabledTooltip:l?"Pull request authors can't request changes on their own pull requests.":n?"":"Only users with explicit access to this repository may request changes on pull requests",label:(0,eR.ZH)(eO.requestChanges),value:eO.requestChanges,subLabel:a?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})}function eQ({checked:e,disabled:t,disabledTooltip:n,label:a,subLabel:r,value:l}){let s=(0,i.jsxs)(ek.A,{disabled:t,children:[(0,i.jsx)(eE.A,{checked:e,value:l,className:ez.Radio}),(0,i.jsxs)(ek.A.Label,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("span",{children:a}),(0,i.jsx)(O.A,{sx:{color:"fg.muted",fontWeight:"normal",fontSize:0},children:r})]})]});return t&&n?(0,i.jsx)(eD.A,{text:n,children:s}):s}function eX({currentUserLogin:e,initialPendingReview:t,pullRequest:n,repository:a,redirectOnMutation:r=!0,tabSize:l}){let{author:s,pathName:o,state:d,viewerCanLeaveNonCommentReviews:u,viewerHasViolatedPushPolicy:h,comparison:p}=n,g=function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=function(e){let t=`${e}/page_data/${M.u.pendingReview}`;return{queryKey:eB(e),queryFn:async()=>{let e=await (0,ep.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()}}}(e);return(0,ef.U)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})}({pathName:o,initialData:t}),{persistedReview:x,persistReviewToStorage:y,removePersistedReviewFromStorage:b}=function(e){let[t,n]=(0,f.useState)(!1),i=(0,f.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:eV(i),persistReviewToStorage:(0,eH.d)((e,a)=>{if(!t)try{eq(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{eK(i)}}}(o),v=g?.data,C=v?.comments.length??0,j=s?.login===e,w=d!==eT.Closed&&d!==eT.Merged,N="WRITE"===a.viewerPermission||"ADMIN"===a.viewerPermission,S=p.headOid,k=(0,f.useRef)(null),[E,L]=(0,eN.A)(!1),[A,D]=(0,eN.A)(!1),[_,R]=(0,eN.A)(!1),[I,T]=(0,eN.A)(),[F,O]=(0,eN.A)(x?.text??""),[$,P]=(0,eN.A)(x?.event??eO.comment),U=A||!F&&$===eO.comment&&!C,{sendPullRequestAnalyticsEvent:H}=(0,eI.$)(),V=(0,ea.X)(),K=V?.paste_url_link_as_plain_text||!1,q=V?.current_user_settings?.use_monospace_font||!1;(0,f.useEffect)(()=>{if(E){let e=window.setTimeout(()=>k.current?.focus());return()=>{window.clearTimeout(e)}}},[E]);let{mutate:W}=function({onSuccess:e,onError:t}){let n=(0,eF.e)(M.u.submitReview);return(0,B.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,ep.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{b(),r&&(window.location.href=e)},onError:e=>{D(!1),T(e.message)}}),{mutate:X}=function({onSuccess:e,onError:t}){let n=(0,eF.e)(M.u.abandonReview);return(0,B.n)({mutationFn:async()=>(0,ep.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{b(),r&&(window.location.href=e)},onError:e=>{R(!1),T(e.message)}}),Y=()=>{I&&T(void 0),D(!0),H("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),W({body:F,event:$,headSha:S})},J=()=>{v?.id&&confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(I&&T(void 0),R(!0),H("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),X())},Z=(0,f.useMemo)(()=>(function({totalPendingComments:e,viewerIsAuthor:t,viewerCanLeaveNonCommentReviews:n,isPROpen:i}){let a=(e??0)>0;switch(!0){case!i:return{isHidden:!a,text:"comments"};case t&&a||!n&&a:return{isHidden:!1,text:"comments"};case n:return{isHidden:!1,text:"review"};default:return{isHidden:!0}}})({isPROpen:w,viewerCanLeaveNonCommentReviews:u,viewerIsAuthor:j,totalPendingComments:C}),[u,C,w,j]);return Z.isHidden?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Q,{count:C||void 0,sx:{"[data-component=trailingIcon]":{marginX:-1}},trailingAction:c.TriangleDownIcon,variant:"primary",onClick:()=>{L(!0),H("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},size:"small",children:["Submit ",Z.text]}),E&&(0,i.jsxs)(z.l,{onClose:()=>L(!1),"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${Z.text}`,renderFooter:()=>(0,i.jsxs)(z.l.Footer,{children:[I&&(0,i.jsxs)(eL.A,{className:"mx-3 my-2",variant:"danger",children:[(0,i.jsx)(e_.A,{className:"mr-2",icon:c.StopIcon}),I]}),(0,i.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between",children:[v?.id&&(0,i.jsx)(m.Q,{className:"mx-2",disabled:_,onClick:J,tabIndex:0,variant:"danger",children:(0,i.jsxs)(eA.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row"},children:["Discard ",Z.text,_&&(0,i.jsx)(Q.A,{size:"small",sx:{ml:2}})]})}),(0,i.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,i.jsx)(m.Q,{onClick:()=>L(!1),children:"Cancel"}),(0,i.jsx)(m.Q,{disabled:U,variant:"primary",onClick:Y,children:(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",Z.text,A&&(0,i.jsx)(Q.A,{size:"small",sx:{ml:2}})]})})]})]})]}),children:[(0,i.jsx)(et.Su,{ref:k,label:"Add review comment",placeholder:"Leave a comment",sx:{flexGrow:"1",width:"100%"},userSettings:{pasteUrlsAsPlainText:K,useMonospaceFont:q},value:F,onChange:e=>{O(e),y($,e)},onPrimaryAction:Y}),w&&(0,i.jsx)(eW,{reviewEvent:$,viewerCanLeaveNonCommentReviews:u,viewerCanWriteToRepo:N,viewerHasViolatedPushPolicy:h,viewerIsAuthor:j,onReviewEventChange:e=>{Object.values(eO).includes(e)&&(P(e),y(e,F))}}),C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.A,{as:"h3",sx:{mt:3,mb:2},variant:"small",children:"Review comments"}),(0,i.jsx)(f.Suspense,{fallback:(0,i.jsx)(Q.A,{}),children:(0,i.jsx)(eu.RelayEnvironmentProvider,{environment:eG,children:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:v?.comments.map(e=>i.jsx(eP,{commentPreview:e,tabSize:l,onNavigateToDiffComment:()=>L(!1)},e.id))})})})]}):null]})]})}try{eW.displayName||(eW.displayName="ReviewRadioButtons")}catch{}try{eQ.displayName||(eQ.displayName="RadioButton")}catch{}try{eX.displayName||(eX.displayName="ReviewMenuButton")}catch{}var eY=n(20317),eJ=n(30451),eZ=n(7201),e0=n(15673);let e1=e=>{let{entriesData:t,loading:n,error:a}=(0,eJ.D)(e);return n?(0,i.jsx)(eY.Y7,{}):a instanceof eJ.X?null:a?(0,i.jsx)(eY.yJ,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eZ.K,{entriesData:t}),(0,i.jsx)(e0.A,{entriesData:t})]})},e2=e=>{let t=(0,f.useMemo)(()=>{let t=e.prPathName.split("/");if(t.length<4)return null;let n=parseInt(t[4],10);return isNaN(n)?null:{baseOid:e.baseOid,headOid:e.headOid,owner:t[1],repo:t[2],number:n}},[e]);return t?(0,i.jsx)(a.t,{fallback:(0,i.jsx)(eY.yJ,{}),children:(0,i.jsx)(e1,{...t})}):null};var e4=n(47326),e3=n(69231),e8=n(56578),e6=n(34614);let e5={refresh:"RefreshButton-module__refresh--XCINa"};function e7({aliveChannel:e,pathName:t}){let[n,a]=(0,f.useState)(!1);return((0,e8.Zi)(e,()=>{a(!0)},{git_updated:!0}),n)?(0,i.jsx)(m.Q,{as:e6.A,variant:"invisible",href:`${t}/files`,className:e5.refresh,leadingVisual:c.SyncIcon,children:"Refresh"}):null}try{e7.displayName||(e7.displayName="RefreshButton")}catch{}function e9({annotations:e,copilotAccessAllowed:t,currentUserLogin:n,isFileTreeExpanded:a,pullRequest:r,repository:l,shouldShowViewedFilesCount:s,totalFilesCount:o,threadPreviews:d,viewedFilesCount:c,viewerPendingReview:u,stackingBreakpoint:m="md",fileFilterState:h,setFileFilterState:p,filteredDiffs:g}){let[x,y]=f.useState(a),[b,v]=f.useState(!1),C=(0,f.useCallback)(e=>{let{detail:t}=e;switch(t){case M.u.threadPreviews:(0,F.S)().invalidateQueries({queryKey:eg(r.pathName)});break;case M.u.viewedFilesCount:var n;(0,F.S)().invalidateQueries({queryKey:(n=r.pathName,[M.u.viewedFilesCount,n])});break;case M.u.pendingReview:(0,F.S)().invalidateQueries({queryKey:eB(r.pathName)})}},[r.pathName]);return(0,f.useEffect)(()=>(D.XC?.addEventListener("rails-action-event",C),()=>D.XC?.removeEventListener("rails-action-event",C)),[C]),(0,i.jsxs)(e3.Kg,{basePageDataUrl:r.pathName,children:[(0,i.jsxs)("section",{className:"d-flex flex-justify-between flex-items-center pb-2 bgColor-default pt-2 mt-n2",id:"react-partial-pull-requests-files-toolbar",children:[(0,i.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(T.L,{alignment:"left",ariaLabel:x?"Collapse file tree":"Expand file tree",ariaControls:"pr-file-tree",expanded:x,onToggleExpanded:()=>{let e=document.getElementById("diff-layout-component");if(e){let t=!x;if(y(e=>!e),e.classList.toggle("hx_Layout--sidebar-hidden",!t),n){let e=new FormData;e.set("file_tree_visible",t?"true":"false"),(0,ep.DI)((0,A.h6D)({login:n}),{method:"PUT",body:e,headers:{Accept:"application/json"}})}}},testid:"pr-file-tree-expand-button",className:`d-none d-${m}-block`}),(0,i.jsx)(T.L,{alignment:"left",ariaLabel:b?"Collapse file tree":"Expand file tree",ariaControls:"pr-file-tree",expanded:b,onToggleExpanded:()=>{document.getElementById("diff-layout-component")&&v(!b)},testid:"pr-file-tree-expand-button-mobile",className:`d-block d-${m}-none`})]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(e7,{aliveChannel:r.aliveChannel,pathName:r.pathName}),s&&(0,i.jsx)(K,{pullRequest:r,totalFilesCount:o,viewedFilesCount:c}),(0,i.jsx)(ex,{pullRequest:r,threadPreviews:d,repositoryId:l.id}),(0,i.jsx)(ew,{annotations:e}),t&&(0,i.jsx)(e2,{prPathName:r.pathName,baseOid:r.comparison.baseOid,headOid:r.comparison.headOid}),n&&(0,i.jsx)(eX,{currentUserLogin:n,initialPendingReview:u,pullRequest:r,repository:l}),(0,i.jsx)(e4.G,{invisible:!1,reloadOnWhitespaceChange:!0,small:!0})]})]}),b&&(0,i.jsx)("div",{className:`d-block d-${m}-none`,children:(0,i.jsx)(te,{fileFilterState:h,setFileFilterState:p,filteredDiffs:g,pathName:r.pathName,onFileSelected:()=>{v(!1)}})})]})}function te({pathName:e,onFileSelected:t,fileFilterState:n,setFileFilterState:a,filteredDiffs:r}){let{data:l}=function(e){var t;let n,i;let a=(0,o.c)(6),{pathName:r,initialData:l}=e;a[0]!==r?(t=r,n={queryKey:[M.u.fileTree,t],queryFn:async()=>{}},a[0]=r,a[1]=n):n=a[1];let{queryFn:s,queryKey:d}=n;return a[2]!==l||a[3]!==s||a[4]!==d?(i={queryKey:d,queryFn:s,initialData:l,staleTime:1/0},a[2]=l,a[3]=s,a[4]=d,a[5]=i):i=a[5],(0,$.I)(i)}({pathName:e});return l?(0,i.jsx)(I,{...l,onFileSelected:t,fileFilterState:n,setFileFilterState:a,filteredDiffs:r}):null}try{e9.displayName||(e9.displayName="PullRequestFilesToolbar")}catch{}try{te.displayName||(te.displayName="PullRequestFileTreeWrapper")}catch{}var tt=n(73974);function tn({codeownerPath:e,ownedByCurrentUser:t,ownersForFile:n,ruleForPathLine:a,className:r}){let l;let s=(0,f.useId)();if(!(t||n))return null;let o=(l="Owned by ",t&&(l+="you",n&&(l+=" along with ")),l+=n,a&&(l+=` (from CODEOWNERS line ${a})`),l);return(0,i.jsx)(eb.m,{id:s,"aria-label":o,text:o,children:e?(0,i.jsx)(e6.A,{"aria-labelledby":s,href:e,className:r,muted:!t,children:(0,i.jsx)(c.ShieldLockIcon,{})}):(0,i.jsx)(c.ShieldLockIcon,{className:r})})}try{tn.displayName||(tn.displayName="CodeownersBadge")}catch{}let ti={viewed:"MarkAsViewedButton-module__viewed--W1yv9"};function ta(e,t){return[M.u.updateViewedFiles,t,e]}function tr(e){return[M.u.diffSummaries,e]}function tl({path:e,setIsCollapsed:t,viewed:n,basePath:a}){let{data:r}=function(e,t,n){let i=ta(t,e);return(0,$.I)({queryKey:i,queryFn:async()=>!!n&&n,initialData:n,staleTime:1/0})}(a,e,n),{mutate:l}=function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`,a=(0,P.jE)();return(0,B.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,ep.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onMutate:async t=>{a.setQueryData(ta(t.path,e),()=>t.viewedStatus)},onSuccess:()=>{t()},onError:e=>{n(e)}})}(a,{onSuccess:()=>{},onError:()=>{}}),{mutate:s}=function(){let e=(0,P.jE)();return(0,B.n)({onMutate:async t=>{e.setQueryData(H(t.path),e=>e+(t.viewedStatus?1:-1))}})}(),{mutate:o}=function(){let e=(0,P.jE)();return(0,B.n)({onMutate:async t=>{e.setQueryData(tr(t.basePath),e=>{let n=e.find(e=>e.path===t.path);return n?(n.markedAsViewed=t.viewedStatus,[...e.filter(e=>e.path!==t.path),n]):e})}})}();return(0,i.jsx)(m.Q,{"aria-pressed":r,size:"small",leadingVisual:()=>r?(0,i.jsx)(c.CheckboxIcon,{}):(0,i.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),className:(0,_.$)({[ti.viewed]:r}),onClick:()=>{l({viewedStatus:!r,path:e}),s({viewedStatus:!r,path:a}),o({viewedStatus:!r,path:e,basePath:a}),t(!r)},children:"Viewed"})}try{tl.displayName||(tl.displayName="MarkAsViewedButton")}catch{}var ts=n(96590);function to({oid:e,path:t,repo:n,branchName:a,isViewable:r=!0,copilotDiffChatProps:l}){return(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,i.jsx)(c.KebabHorizontalIcon,{})})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsxs)(h.l,{children:[(0,i.jsxs)(h.l.LinkItem,{href:(0,A.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:r?void 0:"Action unavailable",children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.EyeIcon,{})}),"View file"]}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.l.LinkItem,{href:(0,A.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:a}),children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.PencilIcon,{})}),"Edit file"]}),(0,i.jsxs)(h.l.LinkItem,{variant:"danger",href:(0,A.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:a}),children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.TrashIcon,{})}),"Delete file"]})]}),l&&(0,i.jsx)(ts.$,{...l})]})})]})}try{to.displayName||(to.displayName="BlobActionsMenu")}catch{}let td={entry:"PullRequestDiffsList-module__entry--SQtpu"};function tc(e){return[M.u.diffCollapsedStatus,e]}function tu(){return(0,i.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,i.jsx)(Z.A,{border:!1,spacious:!0,children:(0,i.jsx)(Z.A.Description,{children:"No files match your search"})})})}try{tu.displayName||(tu.displayName="FilesChangedFilterBlankSlate")}catch{}var tm=n(87592),th=n(56471);function tf(e){return[M.u.markers,e]}function tp({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}={queryKey:tf(e),queryFn:async()=>{}};return(0,$.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})}function tg({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}={queryKey:[M.u.tableOfContents,e],queryFn:async()=>{}};return(0,$.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})}var tx=n(84);function ty(e,t){return[M.u.diffContextLines,e,t]}async function tb(e,t,n){let i=`${t}?path=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`,a=await (0,ep.QJ)(i);if(a.ok)return await a.json()??void 0}function tv({focusedSearchResult:e,basePath:t,collapsed:n,diffManuallyExpanded:a,commentingImplementation:r,markerNavigationImplementation:l,rightSideContent:s,leftSideContent:o,contextLinesURL:d,onOptionCollapseToggle:c,diffLines:u,path:m,...h}){let{data:p}=function(e,t,n){let i=ty(e,t);return(0,$.I)({queryKey:i,queryFn:async()=>n||[],initialData:n,staleTime:1/0})}(t,m,u),{mutate:g}=function(e,t){let n=ty(e,t),i=(0,P.jE)();return(0,B.n)({onMutate:async e=>{let t=await tb(e.contextLineRanges,e.url,e.path);i.setQueryData(n,e=>(function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})})(e,t?.diffEntryWithContext??[]))}})}(t,m),{data:x}=tg({basePath:t}),{data:y}=tp({basePath:t}),b=p??[];x&&y&&(b=b.map(e=>({...e,...function(e,t,n,i){let a=null!==t.right?`R${t.right}`:`L${t.left}`,r=n.find(t=>t.path===e);if(!r||!r.markersMap)return;let l=r.markersMap[a],s=[],o=[];if(l){for(let e of l.threads)if(void 0!==e.id){let n=i.threads[e.id];if(n){let i,a;e.start&&(i="L"===e.start[0]?"LEFT":"RIGHT",a=parseInt(e.start.slice(1))||-1),s.push({id:n.id,isOutdated:n.isOutdated||!1,commentsData:{__id:n.commentsData.__id,comments:n.commentsData.comments.map(e=>({...e,id:parseInt(e.id)??-1,author:e.author??null})),totalCount:n.commentsData.comments.length},diffSide:null!==t.right?"RIGHT":"LEFT",line:null!==t.right?t.right:t.left,startDiffSide:i,startLine:a})}}}return{threadsData:{threads:s,totalCommentsCount:0,totalCount:s.length},annotationsData:{totalCount:o.length,annotations:o}}}(m,e,x,y)})));let v=(0,f.useRef)([]),[C,j]=(0,f.useState)(!1),w=(0,f.useCallback)(async e=>{v.current.push(e),g({contextLineRanges:v.current,url:d,path:m})},[g,d,m]),N=(0,f.useMemo)(()=>{if(h.isBinary||h.isSubmodule||(0,tx.dK)({linesChanged:h.linesChanged,newTreeEntry:h.newTreeEntry,oldTreeEntry:h.oldTreeEntry,status:h.status,truncatedReason:h.truncatedReason}))return!1;if(C)return!0;if(p?.length===0)return!1;if((p?.[1]?.blobLineNumber||0)>1)return!0;let e=p?.length||0,t=p?.[e-1]?.blobLineNumber||0,n=h.newTreeEntry?.lineCount||0;return t<n||e-1<n},[h.isBinary,h.isSubmodule,h.linesChanged,h.newTreeEntry,h.oldTreeEntry,h.status,h.truncatedReason,p,C]),S=async()=>{v.current=[],C||v.current.push({start:1,end:Math.max(h.oldTreeEntry?.lineCount??0,h.newTreeEntry?.lineCount??0)}),j(!C),g({contextLineRanges:v.current,url:d,path:m})};return(0,i.jsx)(th.oO,{focusedSearchResult:e,basePath:t,collapsed:n,diffManuallyExpanded:a,commentingImplementation:r,markerNavigationImplementation:l,rightSideContent:s,leftSideContent:o,contextLinesURL:d,canExpandOrCollapseLines:N,expandAllContextLines:S,hasExpandedAllRanges:C,addInjectedContextLines:w,onOptionCollapseToggle:c,path:m,...h,diffLines:b})}try{tv.displayName||(tv.displayName="PullRequestDiff")}catch{}let tC=(0,f.memo)(tj);function tj({contextLinesURL:e,currentUser:t,diffs:n,headBranchName:a,pullRequest:r,repository:l}){var s;let[o,d]=(0,f.useState)(!1),u=(0,tm.l)(),m=(0,f.useRef)(""),h=(0,f.useRef)(null),p=(s=r.pathName,{lazyFetchReactionGroups:!0,fetchThread:(0,f.useCallback)(async e=>new Promise(async t=>{let n=(0,F.S)().getQueryData(tf(s));t(n?.threads?.[e])}),[s]),batchingEnabled:!1,multilineEnabled:!1,resolvingEnabled:!1,pendingSuggestedChangesBatch:[],suggestedChangesEnabled:!1,submitSuggestedChanges:()=>{},addSuggestedChangeToPendingBatch:()=>{},removeSuggestedChangeFromPendingBatch:()=>{},addThread:()=>{},addThreadReply:()=>{},addFileLevelThread:()=>{},deleteComment:()=>{},editComment:()=>{},hideComment:()=>{},unhideComment:()=>{},resolveThread:()=>{},unresolveThread:()=>{},commentBoxConfig:{pasteUrlsAsPlainText:!1,useMonospaceFont:!1,emojiSkinTonePreference:0}}),g={incrementActiveMarker:()=>{},decrementActiveMarker:()=>{},filteredMarkers:[],onActivateGlobalMarkerNavigation:()=>{},activeGlobalMarkerID:void 0},x=(0,f.useMemo)(()=>{let e=new Map;for(let t of n)e.set(t.path,t.collapsed??!1);return e},[n]),{data:y}=function(e,t){let n=tc(e);return(0,$.I)({queryKey:n,queryFn:async()=>t||new Map,initialData:t,staleTime:1/0})}(r.pathName,x),{mutate:b}=function(){let e=(0,P.jE)();return(0,B.n)({onMutate:async t=>{e.setQueryData(tc(t.basePath),e=>(e.has(t.path)&&e.set(t.path,t.collapsedStatus),e))}})}(),v=(0,f.useCallback)((e,t)=>{b({collapsedStatus:e,path:t,basePath:r.pathName})},[b,r.pathName]);(0,f.useEffect)(()=>{let e=u.includes("R"),t=u.includes("L"),i=t||e,a=i?t?u.split("L")[0]:u.split("R")[0]:u;if((a=a?.replace("#",""))===m.current)return;m.current=a??"";let r=u.replace("#","").split("-")[0],l=function(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}(a??u,n);if(-1!==l){if(i&&function(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}(h,r??""));else{let e=h.current?.querySelectorAll(`[data-diff-anchor=diff-${a}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(D.cg?.scrollY??0)-57-60;D.cg?.scrollTo({top:t,left:0});let i=h.current?.querySelectorAll(`[aria-label="collapse file: ${n[l]?.path}"]`);i&&1===i.length&&i[0].focus()}else{let e=h.current?.querySelectorAll(`[aria-label="expand file: ${n[l]?.path}"]`);if(e&&1===e.length){let t=e[0],n=t.getBoundingClientRect().top+(D.cg?.scrollY??0)-57-60;D.cg?.scrollTo({top:n,left:0}),t.focus()}}}}},[u,n]);let C=void 0,j={codeownerPath:"repo-name/blob/master/CODEOWNERS#L1",ownedByCurrentUser:!0,ownersForFile:"pull-requests-reviewers",ruleForPathLine:""};return(0,i.jsxs)("div",{ref:h,children:[n.map(n=>{let s=!!(void 0!==y&&y.has(n.path))&&y.get(n.path);return(0,i.jsx)("div",{className:td.entry,children:(0,i.jsx)(tv,{basePath:r.pathName,changeType:n.status,collapsed:s??!1,commentingEnabled:!0,commentingImplementation:p,contextLinesURL:e,currentUser:t,diffContext:"pr",diffLines:n.diffLines,diffManuallyExpanded:o,diffMatches:n.diffMatches,diffSize:n.diffSize,focusedSearchResult:C,helpUrl:n.helpUrl,isBinary:n.isBinary,isSubmodule:n.isSubmodule,isTooBig:n.isTooBig,leftSideContent:j&&(0,i.jsx)(tn,{className:"d-flex px-1 flex-items-center flex-order-2 flex-sm-order-1",...j}),linesAdded:n.linesAdded,linesChanged:n.linesChanged,linesDeleted:n.linesDeleted,markerNavigationImplementation:g,newCommitOid:n.newCommitOid,newTreeEntry:n.newTreeEntry,objectId:n.objectId,oldCommitOid:n.oldCommitOid,oldTreeEntry:n.oldTreeEntry,onOptionCollapseToggle:e=>v(e,n.path),path:n.path,pathDigest:n.pathDigest,repository:l,richDiff:n.richDiff,rightSideContent:(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(W.K,{icon:c.CommentIcon,"aria-label":"Comment on this file",size:"small"}),(0,i.jsx)(tl,{path:n.path,basePath:r.pathName,setIsCollapsed:e=>v(e,n.path),viewed:n.reviewed}),(0,i.jsx)(to,{oid:"REMOVED"===n.status&&n.oldCommitOid?n.oldCommitOid:n.newCommitOid||"",path:n.path,repo:l,isViewable:!n.isSubmodule,branchName:a})]}),status:n.status,submodule:n.submodule,truncatedReason:n.truncatedReason})},n.pathDigest)}),0===n.length&&(0,i.jsx)(tu,{}),(0,i.jsx)(tt.nq,{})]})}try{tC.displayName||(tC.displayName="PullRequestDiffsList")}catch{}try{tj.displayName||(tj.displayName="PullRequestDiffsListUnmemoized")}catch{}var tw=n(62964),tN=n(46184),tS=n(86617),tk=n(26920);function tE(){return(0,i.jsx)(a.t,{critical:!0,fallback:(0,i.jsx)(r.M,{text:"Changes cannot be loaded"}),children:(0,i.jsx)(tL,{})})}function tL(){let e=(0,s.B)();return(0,i.jsx)(tA,{...e})}function tA(e){let{annotations:t,commits:n,diffSummaries:a,diffContents:r,pullRequest:s,repository:o,threadPreviews:c,markers:u,user:m,viewerPendingReview:h}=e,p=(0,tS.C0)(m.viewSettings.splitPreference),g=(0,tS.Qn)(m.viewSettings.hideWhitespace),x=(0,f.useMemo)(()=>({hideWhitespace:g,splitPreference:p,lineSpacing:m.viewSettings.lineSpacing,commentsPreference:m.viewSettings.commentsPreference}),[m.viewSettings.commentsPreference,m.viewSettings.lineSpacing,p,g]),y=(0,f.useMemo)(()=>(0,A.mJ6)({owner:o.ownerLogin,repo:o.name,number:s.number}),[o.name,o.ownerLogin,s.number]),{data:b}=(0,tS.Pe)(x),[v,C]=(0,f.useState)(()=>({filterText:"",fileExtensions:(0,tk.s2)(a),unselectedFileExtensions:new Set,showCodeowners:!1,showDeletedFiles:!0,showGeneratedFiles:!0,showOnlyManifestFiles:!1,showVendorFiles:!0,showViewedFiles:!0})),[j,w]=function(e,t,n){let{data:i}=function(e,t){let n=tr(e);return(0,$.I)({queryKey:n,queryFn:async()=>t||[],initialData:t,staleTime:1/0})}(n,e),a=(0,f.useMemo)(()=>{let e=new Map;for(let t of i??[])e.set(t.pathDigest,!1);return e},[i]),[r,l]=(0,f.useMemo)(()=>{let e=[],n=[];for(let r of i??[])r.path.toLowerCase().includes(t.filterText.toLowerCase())&&!t.unselectedFileExtensions.has((0,tk.QC)(r.path))&&(t.showDeletedFiles||!("REMOVED"===r.changeType||"DELETED"===r.changeType))&&(!t.showOnlyManifestFiles||r.isManifestFile)&&(!t.showCodeowners||r.isCodeowner)&&(t.showViewedFiles||!r.markedAsViewed)&&(t.showVendorFiles||!r.isVendored)?(n.push(r),a.set(r.path,!1)):(e.push(r),a.set(r.path,!0));return[n,e]},[i,t]);return!function(e,t=0){if(void 0===D.XC)return;let n=D.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===D.XC)return;let e=D.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),D.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(`${r.length} file${1===r.length?"":"s"} remain${1===r.length?"s":""}`,1e3),[a,r,l]}(a,v,s.pathName),N={avatarURL:"",login:m.currentUserLogin||"",tabSize:void 0,splitPreference:b?.splitPreference??"unified",lineSpacing:b?.lineSpacing??"relaxed",canComment:!0,commentsPreference:b?.commentsPreference??"visible",hasCopilotAccess:m.hasCopilotAccess},S=r.filter(e=>!0!==j.get(e.path)).map(e=>({...e,helpUrl:"",collapsed:e.reviewed,commentingEnabled:!0,changeType:e.status})),{splitPagePaneHiddenSx:k,splitPageContentHidden:E}=(0,tw.q)(d.eL,m.isFileTreeExpanded);tp({basePath:s.pathName,initialData:u}),tg({basePath:s.pathName,initialData:a});let L=(0,ec.E7)();return(0,i.jsxs)(eu.RelayEnvironmentProvider,{environment:L,children:[(0,i.jsx)(l.O7.Pane,{position:"start",sticky:!0,offsetHeader:"80px","aria-label":"File tree",padding:"none",className:"pr-3",sx:k,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,children:(0,i.jsx)(I,{baseRefOid:s.comparison.baseOid,commits:n,diffs:a,ownerLogin:o.ownerLogin,pathName:s.pathName,pullRequestId:s.globalRelayId,pullRequestNumber:s.number,repositoryName:o.name,setFileFilterState:C,filteredDiffs:w,fileFilterState:v})}),(0,i.jsxs)(l.O7.Content,{as:"div",width:"full",hidden:E,padding:"none",children:[(0,i.jsx)(e9,{annotations:t,copilotAccessAllowed:o.copilotEnabled,currentUserLogin:m.currentUserLogin,isFileTreeExpanded:m.isFileTreeExpanded,pullRequest:s,repository:o,shouldShowViewedFilesCount:m.shouldShowViewedFilesCount,totalFilesCount:a.length,threadPreviews:c,viewedFilesCount:m.viewedFilesCount,viewerPendingReview:h,setFileFilterState:C,filteredDiffs:w,fileFilterState:v}),(0,i.jsx)(tC,{contextLinesURL:y,currentUser:N,headBranchName:s.headBranch,diffs:S,pullRequest:s,repository:o}),(0,i.jsx)(tN.E,{initialIsOpen:!1})]})]})}try{tE.displayName||(tE.displayName="FilesEntrypoint")}catch{}try{tL.displayName||(tL.displayName="Files")}catch{}try{tA.displayName||(tA.displayName="FilesComponent")}catch{}},82599:(e,t,n)=>{n.r(t),n.d(t,{ReactionViewerRelay:()=>C,ReactionViewerRelayQueryComponent:()=>j,default:()=>w});var i=n(74848);let a=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReactionViewerRelayGroups",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:e,type:"User",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Mannequin",abstractKey:null}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}}();a.hash="683f509bd79d5a4206eb49d13f947374";let r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,i,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:a,type:"User",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:a,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}]},params:{id:"d284cb78e50ac8ee8a082f7850e0f1de",metadata:{},name:"ReactionViewerRelayLazyQuery",operationKind:"query",text:null}}}();r.hash="95899d766fa2c1bc2ea04b604e3db421";var l=n(96540),s=n(18312);let o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"addReactionMutation",selections:[{alias:null,args:t,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"addReactionMutation",selections:[{alias:null,args:t,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[n,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:i,type:"User",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},a],storageKey:null}],storageKey:null}]},params:{id:"3654a2fd2d4535d6fdbb8be8a477a510",metadata:{},name:"addReactionMutation",operationKind:"mutation",text:null}}}();o.hash="504ef43df20e9ee96a023f421682e18d";let d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"removeReactionMutation",selections:[{alias:null,args:t,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"removeReactionMutation",selections:[{alias:null,args:t,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[n,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[n,{kind:"InlineFragment",selections:i,type:"User",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},a],storageKey:null}],storageKey:null}]},params:{id:"7d1ddf2cc4ed2ddb612c4ba7d9ea4f28",metadata:{},name:"removeReactionMutation",operationKind:"mutation",text:null}}}();d.hash="8e28d0138da52c07bb0e64eda432f580";var c=n(69676),u=n(82678),m=n(85349),h=n(8338),f=n(55847),p=n(94977),g=n(86911);function x({reactionGroup:e,disabled:t,onReact:n}){let{content:a,viewerHasReacted:r}=e.reaction,{reactors:l,totalCount:s}=e;if(0===s)return null;let o=l.flatMap(e=>"Other"!==e.typeName?[e.login]:[]),d=(0,g.fj)(a,r,o,s);return(0,i.jsx)(p.A,{"aria-label":(0,g.Js)(o,s),sx:{maxWidth:"100%"},wrap:!0,direction:"ne",align:"left",children:(0,i.jsx)(f.Q,{size:"small",sx:{"&:hover:not([disabled])":{backgroundColor:"accent.muted"},backgroundColor:r?"accent.subtle":"transparent",borderColor:r?"accent.emphasis":"border.default",borderRadius:100,px:2,boxShadow:"none"},"aria-label":d,role:"switch","aria-checked":r,leadingVisual:()=>(0,i.jsx)(i.Fragment,{children:g.qG[a]}),onClick:()=>n(a,r),disabled:t,children:s})})}try{x.displayName||(x.displayName="ReactionButton")}catch{}function y({onReact:e,reaction:t}){let{content:n,viewerHasReacted:a}=t;return(0,i.jsx)(h.l.Item,{sx:{"&:hover":{backgroundColor:"accent.emphasis"},py:0,px:0,width:"max-content",m:0,backgroundColor:a?"accent.subtle":"transparent"},role:"menuitemcheckbox","aria-checked":a,onSelect:()=>e(n,a),children:g.qG[n]},n)}try{y.displayName||(y.displayName="ReactionsMenuItem")}catch{}var b=n(73991);function v({reactionGroups:e,canReact:t=!0,onReact:n}){let[a,r]=(0,l.useState)(!1),s=e.length>0,{containerRef:o}=(0,u.G)({bindKeys:c.z0.HomeAndEnd|c.z0.ArrowHorizontal,focusOutBehavior:"wrap"});return(0,i.jsxs)("div",{role:"toolbar","aria-label":"Reactions",ref:o,className:"d-flex gap-1 flex-wrap",children:[t&&(0,i.jsx)(m.T,{open:a,onOpen:()=>r(s),onClose:()=>r(!1),anchorRef:o,focusZoneSettings:{bindKeys:c.z0.ArrowAll|c.z0.HomeAndEnd,focusOutBehavior:"wrap"},renderAnchor:e=>(0,i.jsx)(b.N,{renderAnchorProps:e,reactionsAvailable:s}),children:(0,i.jsx)(h.l,{className:"d-flex flex-row p-1 gap-1",role:"menu","aria-orientation":"horizontal",children:(e||[]).map((e,t)=>(0,i.jsx)(y,{reaction:e.reaction,onReact:(e,t)=>{n(e,t),r(!1)}},t))})}),(e||[]).map((e,t)=>(0,i.jsx)(x,{reactionGroup:e,onReact:(e,t)=>n(e,t)},t))]})}try{v.displayName||(v.displayName="ReactionViewerBase")}catch{}function C({reactionGroups:e,subjectId:t,canReact:n=!0}){let r=(0,s.useRelayEnvironment)(),c=(0,s.useFragment)(a,e),u=(0,l.useCallback)((e,i)=>{n&&(i?function({environment:e,input:{subject:t,content:n},onError:i,onCompleted:a}){return(0,s.commitMutation)(e,{mutation:d,variables:{input:{subjectId:t,content:n}},optimisticUpdater:e=>{let i=e.get(t);if(!i)return;let a=i.getLinkedRecords("reactionGroups");if(!a)return;let r=a.findIndex(e=>e.getValue("content")===n),l=a[r];if(l){l.setValue(!1,"viewerHasReacted");let n=`client:${t}:reactionGroups:${r}:reactors(first:5)`,i=e.get(n);if(i){let e=i.getValue("totalCount");i.setValue(e&&e>0?e-1:0,"totalCount")}}},onError:e=>i&&i(e),onCompleted:e=>a&&a(e)})}({environment:r,input:{subject:t,content:e}}):function({environment:e,input:{subject:t,content:n},onError:i,onCompleted:a}){return(0,s.commitMutation)(e,{mutation:o,variables:{input:{subjectId:t,content:n}},optimisticUpdater:e=>{let i=e.get(t);if(!i)return;let a=i.getLinkedRecords("reactionGroups");if(!a)return;let r=a.findIndex(e=>e.getValue("content")===n),l=a[r];if(l){l.setValue(!0,"viewerHasReacted");let n=`client:${t}:reactionGroups:${r}:reactors(first:5)`,i=e.get(n);if(i){let e=i.getValue("totalCount");i.setValue(e?e+1:1,"totalCount")}}},onError:e=>i&&i(e),onCompleted:e=>a&&a(e)})}({environment:r,input:{subject:t,content:e}}))},[n,r,t]),m=(c.reactionGroups||[]).filter(e=>!!e).map(e=>({reaction:{content:e.content,viewerHasReacted:e.viewerHasReacted},reactors:e.reactors?.nodes?.map(e=>({login:e?.__typename==="%other"?"":e?.login,typeName:e?.__typename||""}))||[],totalCount:e.reactors?.totalCount||0}));return(0,i.jsx)(v,{reactionGroups:m,canReact:n,subjectId:t,onReact:u})}function j({id:e,subjectLocked:t}){let n=(0,s.useLazyLoadQuery)(r,{id:e},{fetchPolicy:"store-or-network"});return n.node?(0,i.jsx)(C,{subjectId:e,reactionGroups:n.node,canReact:!t}):null}let w=C;try{C.displayName||(C.displayName="ReactionViewerRelay")}catch{}try{j.displayName||(j.displayName="ReactionViewerRelayQueryComponent")}catch{}},73991:(e,t,n)=>{n.d(t,{N:()=>o});var i=n(74848),a=n(38621),r=n(87330),l=n(94977);let s={addOrRemoveReaction:"Add or remove reactions",reactionsUnavailable:"Reactions are currently unavailable"};function o({renderAnchorProps:e,reactionsAvailable:t}){let n=(0,i.jsx)(d,{renderAnchorProps:e,reactionsAvailable:t});return t?n:(0,i.jsx)(l.A,{"aria-label":s.reactionsUnavailable,children:n})}let d=({renderAnchorProps:e,reactionsAvailable:t})=>(0,i.jsx)(r.K,{unsafeDisableTooltip:!0,size:"small",sx:{borderRadius:100,height:28,width:28,display:"flex",alignItems:"center","& > span":{lineHeight:1,ml:"-1px"}},icon:a.SmileyIcon,...e,"aria-label":s.addOrRemoveReaction,inactive:!t,"aria-labelledby":void 0});try{o.displayName||(o.displayName="ReactionViewerAnchor")}catch{}try{d.displayName||(d.displayName="BaseIcon")}catch{}},16497:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(74848),a=n(34407);function r(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(a.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{r.displayName||(r.displayName="ReactionViewerLoading")}catch{}},4003:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(74848),a=n(96540),r=n(42445),l=n(50045);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o=e=>(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"Error:"}),(0,i.jsx)("button",{onClick:e,children:"Retry"})]});let BasicPreloadedQueryBoundary=class BasicPreloadedQueryBoundary extends a.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){let t=e.shouldSkipReport??!1,n={critical:this.props.critical||!1,reactAppName:this.props.appName};t||(0,r.N7)(e,n)}render(){let{children:e}=this.props,{error:t}=this.state,n=this.props.fallback||o;return t?n(this._retry,t):e}constructor(...e){super(...e),s(this,"state",{error:null}),s(this,"_retry",()=>{this.props.onRetry(),this.setState({error:null})})}};function d(e){let t=(0,a.useContext)(l.I),n=e.appName||t?.appName;return(0,i.jsx)(BasicPreloadedQueryBoundary,{...e,appName:n})}try{d.displayName||(d.displayName="PreloadedQueryBoundary")}catch{}},86836:(e,t,n)=>{n.d(t,{k:()=>s});var i=n(74848),a=n(62456),r=n(75177),l=n(61500);function s({zIndex:e,altText:t,hovercardUrl:n,src:s,square:o,icon:d,iconColor:c,backgroundColor:u,backgroundSx:m,sx:h,size:f=20}){return(0,i.jsxs)(r.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...h},children:[(0,i.jsx)(a.r,{alt:t,"data-hovercard-url":n,size:f,square:o,src:s}),(0,i.jsx)(l.k,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:m})]})}try{s.displayName||(s.displayName="StatusAvatar")}catch{}},61500:(e,t,n)=>{n.d(t,{k:()=>l});var i=n(74848),a=n(75177),r=n(30729);function l({iconColor:e,icon:t,size:n=12,backgroundColor:l="fg.onEmphasis",absolute:s=!0,backgroundSx:o}){let d,c;return 12===n?(d="10px",c="1px"):20===n?(d="16px",c="2px"):(d="16px",c="4px"),(0,i.jsxs)(a.A,{sx:{display:"flex",borderRadius:"100px",...s?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...o},children:[(0,i.jsx)(a.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:l}}),(0,i.jsx)(r.A,{icon:t,size:n,sx:{color:e,position:"relative"}})]})}try{l.displayName||(l.displayName="StatusIcon")}catch{}},53808:(e,t,n)=>{n.d(t,{X:()=>l});var i=n(74848),a=n(75177),r=n(96540);function l({children:e,onObserve:t,onUnobserve:n,...l}){let s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(s.current){let e=s.current;return t?.(e),()=>n?.(e)}},[s,t,n]),(0,i.jsx)(a.A,{...l,ref:s,children:e})}try{l.displayName||(l.displayName="ObservableBox")}catch{}},61388:(e,t,n)=>{n.d(t,{_:()=>s});var i=n(36158),a=n(26261),r=n(66500),l=n(24880),s=class extends r.Q{#e;#t=void 0;#n;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#r()}mutate(e,t){return this.#i=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#a(){let e=this.#n?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){a.j.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,n),this.#i.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#i.onError?.(e.error,t,n),this.#i.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#t)})})}}},46184:(e,t,n)=>{n.d(t,{E:()=>i});var i=function(){return null}},94747:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(96540),a=n(61388),r=n(26261),l=n(97665),s=n(54362);function o(e,t){let n=(0,l.jE)(t),[o]=i.useState(()=>new a._(n,e));i.useEffect(()=>{o.setOptions(e)},[o,e]);let d=i.useSyncExternalStore(i.useCallback(e=>o.subscribe(r.j.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=i.useCallback((e,t)=>{o.mutate(e,t).catch(s.l)},[o]);if(d.error&&(0,s.G)(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}},97286:(e,t,n)=>{n.d(t,{I:()=>r});var i=n(1651),a=n(15985);function r(e,t){return(0,a.t)(e,i.$,t)}},65510:(e,t,n)=>{n.d(t,{U:()=>l});var i=n(1651),a=n(15985),r=n(60791);function l(e,t){return(0,a.t)({...e,enabled:!0,suspense:!0,throwOnError:r.R3,placeholderData:void 0},i.$,t)}},46996:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(21179);let a=function(e,t){return(0,i.A)(e,t)}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-62da9f","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-2906d7","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_react-relay_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_fzy_js_index_js-node_mo-c4d1d6","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es__baseIsEqual_js","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-e0180f","vendors-node_modules_github_combobox-nav_dist_index_js-node_modules_github_g-emoji-element_di-24c074","vendors-node_modules_react-relay_hooks_js-node_modules_color2k_dist_index_exports_import_es_m-e8b6bb","vendors-node_modules_react-intersection-observer_react-intersection-observer_modern_mjs-node_-b27033","ui_packages_failbot_failbot_ts","ui_packages_aria-live_aria-live_ts-ui_packages_promise-with-resolvers-polyfill_promise-with-r-17c672","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_list-view_src_ListView_ListView_tsx-ui_packages_safe-html_SafeHTML_tsx","ui_packages_list-view_src_ListItem_ListItem_tsx-ui_packages_list-view_src_ListItem_Title_tsx","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx","ui_packages_item-picker_constants_labels_ts-ui_packages_item-picker_constants_values_ts-ui_pa-163a9a","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_app-uuid_app-uuid_ts-ui_packages_document-metadata_document-metadata_ts-ui_packag-0663c3","ui_packages_comment-box_api_file-upload_ts-ui_packages_comment-box_api_preview_ts-ui_packages-2c5e84","ui_packages_ref-selector_RefSelector_tsx","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_signed-commit-badge_index_ts-ui_packages_use-navigate_use-navigate_ts","ui_packages_code-view-shared_utilities_web-worker_ts-ui_packages_diff-file-header_diff-file-h-1692d0","ui_packages_commit-attribution_index_ts-ui_packages_commit-checks-status_index_ts-ui_packages-7094d4"],()=>t(6331)),e.O()}]);
//# sourceMappingURL=pull-requests-4a65d5f95b71.js.map