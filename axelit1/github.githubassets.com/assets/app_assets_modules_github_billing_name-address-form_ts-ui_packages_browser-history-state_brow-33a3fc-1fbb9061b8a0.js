"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_billing_name-address-form_ts-ui_packages_browser-history-state_brow-33a3fc"],{22781:(e,t,n)=>{var r=n(97797),i=n(21403);let{getItem:o,setItem:l}=(0,n(80688).A)("localStorage",{ttl:6e5,throwQuotaErrorsOnSet:!1});function c(e){let t=e.options[e.selectedIndex]?.value,n=document.querySelector(".js-name-address-collection primer-multi-input[data-name=region]");n&&("US"===t?n.activateField("us_states"):"CA"===t?n.activateField("ca_provinces"):n.activateField("region"))}function s(){let e=document.querySelector(".js-user-personal-profile-summary");e&&(e.hidden=!0)}function a(){let e=document.querySelector(".js-user-personal-profile-summary");e&&(e.hidden=!1)}function d(e){if(!(e.currentTarget instanceof HTMLInputElement))return;let t=e.currentTarget,n=document.querySelector(".js-billing-information-linking-summary");n&&(h("js-has-valid-payment-method"),t.checked?n.hidden=!1:n.hidden=!0)}function u(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-edit-user-personal-profile-wrapper");t&&(t.hidden=!1);let n=document.querySelector(".js-name-address-collection-wrapper");n&&(n.hidden=!0);let r=document.querySelector(".js-billing-info-avatar-wrapper");r&&(r.hidden=!1),a(),function(){let e=f();e&&e.classList.remove("has-removed-contents")}()}function m(){let e=document.querySelector(".js-billing-section");e&&(e.hidden=!0);let t=document.querySelector(".js-billing-pay-with");t&&(t.hidden=!0);let n=document.querySelector(".js-payment-methods-radio");n&&(n.hidden=!0);let r=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");r&&(r.hidden=!0);let i=document.querySelector(".js-sponsors-form");i&&(i.hidden=!1);let o=document.querySelector(".js-zuora-existing-card");o&&o.classList.remove("d-none")}function p(){let e=document.querySelector(".js-billing-information-summary-wrapper");e&&(e.hidden=!0);let t=document.querySelector(".js-name-address-collection-wrapper");t&&(t.hidden=!1);let n=document.querySelector(".js-add-billing-information-btn");n&&(n.hidden=!0);let r=document.querySelector(".js-no-billing-information-message");r&&(r.hidden=!0);let i=document.querySelector(".js-org-payment-method-wrapper");i&&(i.hidden=!0)}function f(e=""){return e?document.querySelector(`.js-payment-methods-wrapper:not(.${e})`):document.querySelector(".js-payment-methods-wrapper")}function h(e=""){let t=f(e);t&&t.classList.add("has-removed-contents")}function y(e=""){S().classList.remove("has-removed-contents"),b().classList.add("has-removed-contents"),h(e),j(),l("plan_upgrade_billing_info_type","individual")}function g(){S().classList.add("has-removed-contents"),b().classList.remove("has-removed-contents"),h(),j(),l("plan_upgrade_billing_info_type","business")}function j(){let e=document.querySelector(".js-trade-controls-notice-container");e&&(e.hidden=!0)}function b(){return document.querySelector(".js-business-details-inputs-wrapper")}function S(){return document.querySelector(".js-billing-info-linking-wrapper")}(0,r.on)("click",".js-edit-user-personal-profile",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-edit-user-personal-profile-wrapper");t&&(t.hidden=!0);let n=document.querySelector(".js-name-address-collection-wrapper");if(n){n.hidden=!1;let e=n.querySelector('input[name="account_screening_profile[first_name]"]'),t=n.querySelector('input[name="account_screening_profile[entity_name]"]');null!==e?e.focus():null!==t&&t.focus()}let r=document.querySelector(".js-profile-summaries");r&&(r.hidden=!0),s(),function(){let e=document.querySelector(".js-cancel-billing-info");e&&(e.hidden=!1)}();let i=document.querySelector(".js-awaiting-payment");i&&!i.hasAttribute("hidden")&&(i.hidden=!0);let o=document.querySelector(".js-sponsors-form");o&&(o.hidden=!0);let l=document.querySelector(".js-marketplace-form-wrapper");l&&(l.hidden=!0);let c=document.querySelector(".js-sdn-screening-error-wrapper");c&&(c.hidden=!0),function(){let e=f();e&&(e.hidden=!0)}();let a=document.querySelector(".js-coupons-form-wrapper");a&&(a.hidden=!0);let d=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");d&&!d.hidden&&d.click();let u=document.querySelector(".js-org-payment-method-wrapper");u&&(u.hidden=!0);let m=document.querySelector(".js-billing-section.js-data-collection-org-signup");m&&m.classList.toggle("has-removed-contents");let p=document.querySelector(".js-llama2-submit-wrapper");p&&(p.hidden=!0)}),(0,r.on)("click",".js-cancel-billing-info",function(e){if(!(e.currentTarget instanceof Element))return;(function(){let e=document.querySelector(".js-cancel-billing-info");e&&(e.hidden=!0)})(),document.querySelector(".js-name-address-collection-wrapper").hidden=!0,a();let t=document.querySelector(".js-edit-user-personal-profile-wrapper");t.hidden=!1,function(){let e=f();e&&(e.hidden=!1)}();let n=document.querySelector(".js-sponsors-form");n&&(n.hidden=!1);let r=document.querySelector(".js-marketplace-form-wrapper");r&&(r.hidden=!1),setTimeout(function(){t.querySelector("button.js-edit-user-personal-profile").focus()},0)}),(0,r.on)("click",".js-view-user-personal-profile",function(){fetch("/account/user_profile_view?form_loaded_from=SPONSORABLE",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})}),(0,r.on)("click",".js-edit-paypal-method",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-awaiting-payment");t&&(t.hidden=!0);let n=document.querySelector(".js-sponsors-form");n&&(n.hidden=!0);let r=document.querySelector(".js-marketplace-form-wrapper");r&&(r.hidden=!0),document.querySelector(".js-payment-methods-radio").hidden=!1;let i=document.querySelector(".js-billing-pay-with");i&&(i.hidden=!1),document.querySelector(".js-existing-paypal-summary").hidden=!0;let o=document.querySelector(".js-paypal-method-details");o&&(o.hidden=!1),document.querySelector(".js-paypal-payment-method-form").hidden=!1}),(0,r.on)("click",".js-enter-new-card",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-awaiting-payment");t&&(t.hidden=!0);let n=document.querySelector(".js-sponsors-form");n&&(n.hidden=!0);let r=document.querySelector(".js-marketplace-form-wrapper");r&&(r.hidden=!0);let i=document.querySelector(".js-billing-pay-with");i&&(i.hidden=!1);let o=document.querySelector(".js-payment-methods-radio");o&&(o.hidden=!1);let l=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");l&&(l.hidden=!1)}),(0,r.on)("click",".js-edit-payment-method-btn",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-update-billing-information-banner"),n=document.querySelector("#update-billing-info-banner"),r=document.querySelector(".js-billing-info-linking-wrapper"),i=document.querySelector(".js-billing-information-summary"),o=document.querySelector(".js-edit-payment-method-btn"),l=o.classList.contains("js-skip-billing-info");if(r||i||l){t.hidden=!0,document.querySelector(".js-payment-summary-wrapper").hidden=!0,document.querySelector(".js-payment-method-section-wrapper").hidden=!1,o.hidden=!0;let e=document.querySelector("#z_hppm_iframe");null!=e&&(e.setAttribute("height","100%"),e.setAttribute("width","100%")),window.dispatchEvent(new Event("resize"))}else t.hidden=!1,n?.focus(),p()}),(0,r.on)("click",".js-cancel-edit-payment-method-btn",function(e){e.currentTarget instanceof Element&&(document.querySelector(".js-payment-summary-wrapper").hidden=!1,document.querySelector(".js-payment-method-section-wrapper").hidden=!0,document.querySelector(".js-edit-payment-method-btn").hidden=!1)}),(0,r.on)("click",".js-sponsors-cancel-edit-payment-method-btn",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-sponsors-payment-method-update-confirmation-dialog");t?.classList.remove("has-removed-contents"),null==document.querySelector(".js-paypal-payment-method-form")?m():(document.querySelector(".payment-methods").classList.add("js-sponsors-handle-cancel-edit-payment"),document.querySelector("#pay-by-credit-card").click())}),(0,r.on)("click",".js-edit-linked-billing-info",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-edit-user-personal-profile-wrapper");t&&(t.hidden=!0);let n=document.querySelector(".js-name-address-collection-wrapper");n&&(n.hidden=!1);let r=document.querySelector(".js-billing-info-avatar-wrapper");r&&(r.hidden=!0),s(),h()}),(0,r.on)("click",".js-cancel-edit-linked-billing-info",u),(0,r.on)("click",".js-billing-settings-billing-information-cancel-button",u),(0,r.on)("click",".js-add-billing-information-btn",function(e){e.currentTarget instanceof Element&&p()}),(0,r.on)("click",".js-cancel-submit-personal-profile-btn",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-billing-information-summary-wrapper");t&&(t.hidden=!1);let n=document.querySelector(".js-name-address-collection-wrapper");n&&(n.hidden=!0);let r=document.querySelector(".js-add-billing-information-btn");r&&(r.hidden=!1);let i=document.querySelector(".js-no-billing-information-message");i&&(i.hidden=!1)}),(0,r.on)("click",".js-dismiss-flash-message",function(e){e.currentTarget instanceof Element&&(document.querySelector(".js-update-billing-information-banner").hidden=!0)}),(0,r.on)("click",".js-sign-ctos-btn",function(e){let t=e.currentTarget;if(!t)return;t.hidden=!0;let n=document.querySelector(".js-tos-name-address-form");n&&(n.hidden=!1)}),(0,r.on)("click",".js-cancel-sign-ctos",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-tos-name-address-form");t&&(t.hidden=!0);let n=document.querySelector(".js-sign-ctos-btn");n&&(n.hidden=!1)}),(0,r.on)("change",".js-allow-billing-info-link",d),(0,r.on)("click",".js-settings-cancel-billing-info-linkage",function(e){if(!(e.currentTarget instanceof Element))return;let t=document.querySelector(".js-allow-billing-info-link");t&&(t.onchange=d,t.checked=!1,t.disabled=!1,t.dispatchEvent(new Event("change")))}),(0,r.on)("click",".js-show-individual-billing-info-inputs",function(){y("")}),(0,r.on)("click",".js-show-business-billing-info-inputs",g),(0,i.lB)(".js-name-address-select-country",{constructor:HTMLSelectElement,initialize(e){c(e),e.form&&(0,r.h)(e.form,"change"),e.addEventListener("change",function(){c(e)})}}),(0,i.lB)(".js-allow-billing-info-link",{constructor:HTMLInputElement,initialize(e){e.addEventListener("change",d),e.dispatchEvent(new Event("change"))}}),(0,i.lB)(".js-sponsors-handle-cancel-edit-payment .pay-by-credit-card .js-zuora-existing-card",{constructor:HTMLElement,add(){m(),document.querySelector(".payment-methods").classList.remove("js-sponsors-handle-cancel-edit-payment")}}),(0,i.lB)(".js-show-individual-billing-info-inputs",{constructor:HTMLInputElement,initialize(e){let t=o("plan_upgrade_billing_info_type");"individual"!==t&&t||(e.checked=!0,e.dispatchEvent(new Event("change")),y("js-has-valid-payment-method"))}}),(0,i.lB)(".js-show-business-billing-info-inputs",{constructor:HTMLInputElement,initialize(e){"business"===o("plan_upgrade_billing_info_type")&&(e.checked=!0,e.dispatchEvent(new Event("change")),g())}}),(0,i.lB)("#submit_personal_profile",{constructor:HTMLInputElement,initialize(e){e.addEventListener("focus",()=>{for(let e of document.querySelectorAll("input, select"))if(e.name.includes("account_screening_profile")||e.name.includes("organization")){let t=null,n=e.name.match(/\[(.*?)\]/),r=n?n[1]:"";if(""===e.value.trim()&&"true"===e.getAttribute("aria-required")?t="can't be blank":["address1","address2","postal_code","billing_email"].includes(r)||/^[a-zA-Z0-9\s]*$/.test(e.value)?["first_name","last_name"].includes(r)&&e.value.length<2&&(t="is too short"):t="should not contain special characters",t){let n="";if(r){if("address1"===r)n="Address";else{let e=r.split("_"),t=e[0];t&&(n=`${t.charAt(0).toUpperCase()+t.slice(1)} ${e.slice(1).join(" ")}`)}}e.setAttribute("aria-invalid","true"),e.setAttribute("invalid","true"),e.setAttribute("autofocus","true");let i=e.getAttribute("aria-describedby");if(i){let e=document.getElementById(i);if(e){e.removeAttribute("hidden");let r=e.getElementsByTagName("span"),i=e.getElementsByTagName("span")[r.length-1];i&&(i.textContent=`${n} ${t}.`,i.removeAttribute("hidden"))}}}else{e.removeAttribute("aria-invalid"),e.removeAttribute("invalid"),e.removeAttribute("autofocus");let t=e.getAttribute("aria-describedby");if(t){let e=document.getElementById(t);e&&e.setAttribute("hidden","true")}}}})}})},588:(e,t,n)=>{let r,i;n.d(t,{Gu:()=>s,c8:()=>m,g5:()=>p});var o=n(47584);let l=[],c=0;function s(){return r}function a(){try{return Math.min(Math.max(0,o.Kn?.length||0)||0,0x1fffffffffffff)}catch{return 0}}function d(e){r=e;let t=o.fV?.href;l[a()-1+c]={url:t,state:r},l.length=a(),o.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}function u(){return Date.now()}function m(e,t,n){c=0;let r={_id:u(),...e};o.Kn?.pushState(r,t,n),d(r)}function p(e,t,n){let i={...r,...e};o.Kn?.replaceState(i,t,n),d(i)}r=function(){let e={_id:Date.now(),...o.Kn?.state};return d(e),e}(),o.cg?.addEventListener("popstate",function(e){let t=e.state;if(!t||!t._id&&!t.turbo?.restorationIdentifier)return;let n=t.turbo?.restorationIdentifier;l[a()-1+c-1]?.state?.turbo?.restorationIdentifier===n?c--:c++,d(t)},!0),o.cg?.addEventListener("turbo:visit",e=>{e instanceof CustomEvent&&(i=e.detail.action)}),o.cg?.addEventListener("turbo:load",()=>{"restore"!==i&&(c=0,p(o.Kn?.state,"",""))}),o.cg?.addEventListener("hashchange",function(){if(a()>l.length){let e={_id:u()};o.Kn?.replaceState(e,"",o.fV.href),d(e)}},!0),o.cg?.addEventListener("pageshow",()=>{l=[],c=0})},18056:(e,t,n)=>{n.d(t,{z:()=>r});let r=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})}}]);
//# sourceMappingURL=app_assets_modules_github_billing_name-address-form_ts-ui_packages_browser-history-state_brow-33a3fc-c749088a2388.js.map